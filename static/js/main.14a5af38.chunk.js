/*! For license information please see main.14a5af38.chunk.js.LICENSE.txt */
(this.webpackJsonpreservation_of_workspace_spa=this.webpackJsonpreservation_of_workspace_spa||[]).push([[0],{114:function(e,t,n){},180:function(e,t,n){},186:function(e,t,n){},187:function(e,t,n){},188:function(e,t,n){},189:function(e,t,n){},190:function(e,t,n){},191:function(e,t,n){},192:function(e,t,n){},193:function(e,t,n){},194:function(e,t,n){},195:function(e,t,n){},196:function(e,t,n){},197:function(e,t,n){},235:function(e,t,n){},236:function(e,t,n){},237:function(e,t,n){},238:function(e,t,n){},239:function(e,t,n){},241:function(e,t,n){},242:function(e,t,n){},243:function(e,t,n){},342:function(e,t,n){},343:function(e,t,n){},344:function(e,t,n){},345:function(e,t,n){},346:function(e,t,n){},347:function(e,t,n){},348:function(e,t,n){},349:function(e,t,n){},350:function(e,t,n){},351:function(e,t,n){},352:function(e,t,n){},353:function(e,t,n){},354:function(e,t,n){},355:function(e,t,n){},356:function(e,t,n){},357:function(e,t,n){},358:function(e,t,n){},359:function(e,t,n){},360:function(e,t,n){},361:function(e,t,n){},362:function(e,t,n){},363:function(e,t,n){},364:function(e,t,n){},365:function(e,t,n){},366:function(e,t,n){},367:function(e,t,n){},368:function(e,t,n){},369:function(e,t,n){},370:function(e,t,n){},371:function(e,t,n){},372:function(e,t,n){},373:function(e,t,n){},374:function(e,t,n){},375:function(e,t,n){},376:function(e,t,n){},377:function(e,t,n){},378:function(e,t,n){},379:function(e,t,n){},381:function(e,t){!function(e,t,n){function c(e,t){return typeof e===t}function r(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):d?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function a(){var e=t.body;return e||((e=r(d?"svg":"body")).fake=!0),e}var s=[],i=[],o={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout((function(){t(n[e])}),0)},addTest:function(e,t,n){i.push({name:e,fn:t,options:n})},addAsyncTest:function(e){i.push({name:null,fn:e})}},l=function(){};l.prototype=o,l=new l;var u=t.documentElement,d="svg"===u.nodeName.toLowerCase(),j=o._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];o._prefixes=j;var b=o.testStyles=function(e,n,c,s){var i,o,l,d,j="modernizr",b=r("div"),f=a();if(parseInt(c,10))for(;c--;)(l=r("div")).id=s?s[c]:j+(c+1),b.appendChild(l);return(i=r("style")).type="text/css",i.id="s"+j,(f.fake?f:b).appendChild(i),f.appendChild(b),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(t.createTextNode(e)),b.id=j,f.fake&&(f.style.background="",f.style.overflow="hidden",d=u.style.overflow,u.style.overflow="hidden",u.appendChild(f)),o=n(b,e),f.fake?(f.parentNode.removeChild(f),u.style.overflow=d,u.offsetHeight):b.parentNode.removeChild(b),!!o};l.addTest("touchevents",(function(){var n;if("ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch)n=!0;else{var c=["@media (",j.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");b(c,(function(e){n=9===e.offsetTop}))}return n})),function(){var e,t,n,r,a,o;for(var u in i)if(i.hasOwnProperty(u)){if(e=[],(t=i[u]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(r=c(t.fn,"function")?t.fn():t.fn,a=0;a<e.length;a++)1===(o=e[a].split(".")).length?l[o[0]]=r:(!l[o[0]]||l[o[0]]instanceof Boolean||(l[o[0]]=new Boolean(l[o[0]])),l[o[0]][o[1]]=r),s.push((r?"":"no-")+o.join("-"))}}(),function(e){var t=u.className,n=l._config.classPrefix||"";if(d&&(t=t.baseVal),l._config.enableJSClass){var c=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(c,"$1"+n+"js$2")}l._config.enableClasses&&(t+=" "+n+e.join(" "+n),d?u.className.baseVal=t:u.className=t)}(s),delete o.addTest,delete o.addAsyncTest;for(var f=0;f<l._q.length;f++)l._q[f]();e.Modernizr=l}(window,document)},382:function(e,t,n){},383:function(e,t,n){"use strict";n.r(t);var c,r,a=n(1),s=n.n(a),i=n(35),o=n.n(i),l=n(136),u=n.n(l).a.create(),d=n(137),j=n.n(d),b=n(3),f=n(11),m=n(14),O=(n(178),n(2)),v=n.n(O),p=n(8),h=n(84),x="accessToken",_="accessTokenStoredAt",g={refresh:function(){},init:function(e,t,n){return this.refresh=e,!!this.isAccessTokenValid()&&(this.setupRefreshTimer(),this.setClaims(this.getAccessToken()),t.dispatch(n.setClaims(this.getClaims())),!0)},getAccessToken:function(){return localStorage.getItem(x)},setAccessToken:function(e){localStorage.setItem(x,String(e))},removeTokens:function(){localStorage.clear()},get storedAt(){var e=localStorage.getItem(_);return Number.isNaN(e)?null:parseInt(e,10)},set storedAt(e){e&&localStorage.setItem(_,String(e))},setTokens:function(e){this.storedAt=Date.now(),this.setAccessToken(e),this.setClaims(e),this.setupRefreshTimer()},isAccessTokenValid:function(){var e=this.getAccessToken();return!!e&&this.isTokenExpired(e)},setupRefreshTimer:function(){var e=this,t=this.getAccessToken();if(t){var n=Object(h.a)(t),c=this.calcTimeout(this.storedAt,1e3*n.exp);this.timer=setTimeout((function(){e.refresh()}),c)}},calcTimeout:function(e,t){var n=.8*(t-e)-(Date.now()-e);return Math.max(0,n)},isTokenExpired:function(e){var t=Object(h.a)(e);return Date.now()-1e3*t.exp<0},setClaims:function(e){e&&(this.claims=Object(h.a)(e))},getClaims:function(){return this.claims}},N="/locations",k="/login",y="/locations/:id",w="/locations/loadAll",C="/locations/search/:fullName",S="/locations/:id/:number/calendar/:mode",I="/my-reservations",R="/users",T="/user-roles",D="/compensations",L="/settings",M="/version-history",F="/api/Auth/login",E="/api/Auth/logout",A="/api/Auth/refresh",P="/api/user",U="/api/location/rooms",H="/api/location/page",z="/api/location",B="/api/location",q="/api/schedule/set-own-schedules",V="/api/schedule/set-schedules",W="/api/schedule/page",Y="/api/schedule/remove-user-schedules",J="/api/schedule/remove-schedules",G="/api/location-item/item-type",$="/api/location-item",K="/api/Location/status",Q="/api/location-item",X="/api/location-item/with-code",Z="/api/User/info/Page",ee="/api/User/info",te="/api/location-item",ne="/api/schedule/user-schedules",ce="/api/schedule/search-page",re="/api/user/search",ae="/api/User/info-role/page",se="/api/Role",ie="/api/User/info-role",oe="/api/schedule/set-tech-schedules",le="/api/schedule/remove-tech-schedules",ue={CanManageLocations:"CanManageLocations",CanDeleteReservations:"CanDeleteReservations",CanManageUserInfoRole:"CanManageUserInfoRole",CanManageReservations:"CanManageReservations",CanManageOwnReservations:"CanManageOwnReservations",CanAccessLogs:"CanAccessLogs",CanManageUserInfo:"CanManageUserInfo",CanViewLocations:"CanViewLocations",CanViewReservations:"CanViewReservations",CanDeleteOwnReservations:"CanDeleteOwnReservations",CanDeleteLocations:"CanDeleteLocations",CanAccessStats:"CanAccessStats",CanManageLocationItemsWithCodes:"CanManageLocationItemsWithCodes",CanViewLocationItems:"CanViewLocationItems",CanDeleteLocationItems:"CanDeleteLocationItems",CanManageLocationItems:"CanManageLocationItems",CanManuallyImportData:"CanManuallyImportData",CanSearchUsers:"CanSearchUsers",CanManageTechnicalWorkPeriod:"CanManageTechnicalWorkPeriod"},de=[ue.CanViewLocationItems,ue.CanManageLocations,ue.CanAccessStats,ue.CanViewLocations,ue.CanDeleteReservations,ue.CanManageUserInfoRole,ue.CanManageUserInfo,ue.CanManageReservations,ue.CanDeleteOwnReservations,ue.CanAccessLogs,ue.CanDeleteLocationItems,ue.CanManageOwnReservations,ue.CanManageLocationItems,ue.CanDeleteLocations,ue.CanViewReservations],je=[ue.CanViewReservations],be=[ue.CanManageUserInfo,ue.CanManageReservations],fe=[ue.CanManageUserInfo,ue.CanAccessStats],me=[ue.CanManageLocationItems,ue.CanViewLocationItems,ue.CanManageLocations,ue.CanViewLocations,ue.CanDeleteReservations,ue.CanManuallyImportData,ue.CanManageReservations,ue.CanSearchUsers,ue.CanDeleteOwnReservations,ue.CanDeleteLocationItems,ue.CanManageOwnReservations,ue.CanManageLocationItems,ue.CanDeleteLocations,ue.CanViewReservations,ue.CanManageTechnicalWorkPeriod],Oe=658,ve="sessionDate",pe=void 0,he="schedule-week",xe="schedule-month",_e="schedule-year",ge="details",Ne=function(e,t){return Object(p.a)(v.a.mark((function n(){var c;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.post(F,{username:e,password:t});case 2:return c=n.sent,n.next=5,g.setTokens(c.data.accessToken);case 5:return n.abrupt("return",g.getClaims());case 6:case"end":return n.stop()}}),n)})))()},ke=function(){return Object(p.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get(E);case 2:g.removeTokens();case 3:case"end":return e.stop()}}),e)})))()},ye=function(){return Object(p.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get(A,{withCredentials:!0});case 2:(t=e.sent).data&&g.setTokens(t.data.accessToken);case 4:case"end":return e.stop()}}),e)})))()},we=Object(m.b)("login/requestStatus",(function(e){var t=e.username,n=e.password;return Ne(t,n)})),Ce=Object(m.b)("logout/requestStatus",(function(){return ke()})),Se=Object(m.b)("refresh/requestStatus",(function(){return ye()})),Ie=Object(m.c)({name:"auth",initialState:{isAuth:!1,claims:{}},reducers:{setIsAuth:function(e,t){e.isAuth=t.payload},setClaims:function(e,t){e.claims=t.payload}},extraReducers:function(e){e.addCase(we.fulfilled,(function(e,t){e.isAuth=!0,e.claims=t.payload})),e.addCase(Ce.fulfilled,(function(e){e.isAuth=!1,e.claims={}})),e.addCase(Se.rejected,(function(e){e.isAuth=!1}))}}),Re=Ie.reducer,Te=Ie.actions,De=n(13),Le=function(){return u.get("locations/rooms")},Me=function(e){return u.post("locations/search/".concat(e))},Fe=(Object(m.b)(w,(function(){return Le().then((function(e){return e.data}))})),Object(m.b)(C,(function(e){return Me(e).then((function(e){return e.data}))})),Object(m.b)(y,Object(p.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get(U);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))))),Ee=function(e){return e.locations.locations},Ae=function(e){return function(t){return t.locations.locations.find((function(t){return t.name===e}))}},Pe=function(e){return e.locations.isOpenSearch},Ue=Object(m.c)((r={name:"locations",initialState:{locations:[],users:[{id:1,name:"\u0418\u0432\u0430\u043d",surname:"\u0418\u0432\u0430\u043d\u043e\u0432"},{id:2,name:"\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440",surname:"\u0418\u0432\u0430\u043d\u043e\u0432"}],loaded:!1,searchItem:null,isOpenSearch:!1},reducers:{setLocations:function(e,t){e.locations=t.payload},setIsOpenSearch:function(e,t){e.isOpenSearch=t.payload}},extraReducers:(c={},Object(De.a)(c,Fe.pending,(function(e){e.isLoading=!0})),Object(De.a)(c,Fe.fulfilled,(function(e,t){e.locations=t.payload,e.isLoading=!1})),Object(De.a)(c,Fe.rejected,(function(e){e.isLoading=!1})),c)},Object(De.a)(r,Fe.fulfilled,(function(e,t){e.locations=t.payload,e.isLoading=!1})),Object(De.a)(r,Fe.rejected,(function(e){e.isLoading=!1})),r)),He=Ue.reducer,ze=Ue.actions.setIsOpenSearch,Be=n(12),qe=(n(180),n(0)),Ve=function(){var e=(new Date).getFullYear();return Object(qe.jsxs)("p",{className:"copyrights sidebar__copyrights",children:["\xa9 ",e," - INOSTUDIO"]})},We=n(32),Ye=n(6),Je=n.n(Ye),Ge=["isLoading","className","icon","children"];function $e(e){var t=e.isLoading,n=e.className,c=e.icon,r=e.children,a=Object(We.a)(e,Ge);return Object(qe.jsx)("button",Object(Be.a)(Object(Be.a)({className:Je()("ctrl-button",Object(De.a)({},n,n))},a),{},{disabled:t,children:Object(qe.jsxs)("span",{className:"ctrl-button__container",children:[Object(qe.jsx)("span",{className:"ctrl-button__text",children:r}),s.a.isValidElement(c)?s.a.cloneElement(c,{className:Je()("ctrl-button__icon",c.props.className)}):null]})}))}$e.defaultProps={type:"button"};var Ke=n.p+"static/media/svg-sprite.aabdbac0.svg",Qe=["name","size","className","fill"];function Xe(e){var t=e.name,n=e.size,c=void 0===n?24:n,r=e.className,a=e.fill,s=Object(We.a)(e,Qe);return Object(qe.jsx)("svg",Object(Be.a)(Object(Be.a)({className:Je()("icon",r,{"icon--fill":a}),width:c,height:c},s),{},{children:Object(qe.jsx)("use",{xlinkHref:"".concat(Ke,"#").concat(t)})}))}Xe.defaultProps={size:24};var Ze=n(23);function et(){return Object(qe.jsxs)(Ze.a,{to:I,className:"logo",children:[Object(qe.jsx)("span",{className:"logo__decor",children:"ino"}),Object(qe.jsx)("span",{className:"logo__text",children:"reserv"})]})}var tt=n(9),nt=function(e){return e.auth.isAuth},ct=function(e){return e.auth.claims.permissions},rt=function(e){return e.auth.claims.sub},at=s.a.forwardRef((function(e,t){return Object(b.d)(nt)?Object(qe.jsx)(tt.b,Object(Be.a)({ref:t},e)):Object(qe.jsx)(tt.a,{ref:t,to:k})}));at.displayName="ProtectedRoute";var st=at,it=n(5),ot=function(e){return e.cards.cards},lt=function(e){return e.cards.itemTypes},ut=n(146),dt=n(103),jt=n(400),bt=n(185);function ft(e){if(e&&e.addEventListener){for(var t=arguments.length,n=new Array(t>1?t-1:0),c=1;c<t;c++)n[c-1]=arguments[c];e.addEventListener.apply(e,n)}}function mt(e){if(e&&e.removeEventListener){for(var t=arguments.length,n=new Array(t>1?t-1:0),c=1;c<t;c++)n[c-1]=arguments[c];e.removeEventListener.apply(e,n)}}function Ot(e,t){return e.every((function(e){return null===t||void 0===t?void 0:t.includes(e)}))}function vt(e,t){return Object(dt.default)(e,t,{locale:ut.a})}function pt(e){e.stopPropagation(),e.preventDefault()}function ht(e){return"null"===(null===e||void 0===e?void 0:e.slice(0,4))}var xt="undefined"!==typeof window,_t=n(19),gt=["mousedown","touchstart"],Nt=function(e){var t=e.ref,n=e.cb,c=e.events,r=void 0===c?gt:c,s=e.exclude,i=Object(a.useRef)(n);Object(a.useEffect)((function(){i.current=n}),[n]),Object(a.useEffect)((function(){var e,n=function(e){var n;!t||(null===(n=t.current)||void 0===n?void 0:n.contains(e.target))||(null===s||void 0===s?void 0:s.current)&&s.current.contains(e.target)||i.current(e)},c=Object(_t.a)(r);try{for(c.s();!(e=c.n()).done;){var a=e.value;ft(document,a,n)}}catch(o){c.e(o)}finally{c.f()}return function(){var e,t=Object(_t.a)(r);try{for(t.s();!(e=t.n()).done;){var c=e.value;mt(document,c,n)}}catch(o){t.e(o)}finally{t.f()}}}),[r,t,s])};function kt(e,t){return{pageRequest:{size:100,index:0,params:{query:"",sortAsc:!0,sortBy:0,options:{parentLocationId:e,date:t}}}}}var yt,wt={getCards:function(){var e=Object(p.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.post(H,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getCardItemsType:function(){var e=Object(p.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get(G);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getCardItems:function(){var e=Object(p.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get("".concat($,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",{data:n.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteCard:function(){var e=Object(p.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.delete(z,{data:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createCard:function(){var e=Object(p.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.post(B,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editActiveCard:function(){var e=Object(p.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.post(K,t);case 2:return e.abrupt("return",{activeCard:t.dto});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToLocalStorage:function(e,t,n,c){localStorage.setItem(e,JSON.stringify(n)),localStorage.setItem(t,JSON.stringify(c))},createCardItem:function(){var e=Object(p.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.post(Q,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getScheduleDay:function(){var e=Object(p.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.post(W,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createCardItemWithCode:function(){var e=Object(p.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.post(X,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteCardItem:function(){var e=Object(p.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.delete(te,{data:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),checkMonitor:function(){var e=Object(p.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.post("https://inventory.linserv.inostudio.net/api/reservation/monitor",{code:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ct=Object(m.b)("location/page",function(){var e=Object(p.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wt.getCards(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),St=Object(m.b)("location/deleteCard",function(){var e=Object(p.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wt.deleteCard(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),It=Object(m.b)("location/createCard",function(){var e=Object(p.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wt.createCard(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Rt=Object(m.b)("/api/location-item/item-type",Object(p.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wt.getCardItemsType());case 1:case"end":return e.stop()}}),e)})))),Tt=Object(m.b)("/api/Location/status",function(){var e=Object(p.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wt.editActiveCard(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Dt=Object(m.b)("/api/location-item",function(){var e=Object(p.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wt.createCardItem(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Lt=Object(m.b)("/api/Schedule/page",function(){var e=Object(p.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wt.getScheduleDay(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Mt=Object(m.b)("location/deleteCardItem",function(){var e=Object(p.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wt.deleteCardItem(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ft={cards:{rows:[]},loaded:!1,searchItem:null,isLoading:!1,itemTypes:[],currentCard:null},Et=Object(m.c)({name:"cards",initialState:Ft,reducers:{setCards:function(e,t){e.cards=t.payload},removeCard:function(e,t){e.cards.rows=e.cards.rows.filter((function(e){return e.id!==t.payload}))},setCurrentCard:function(e,t){e.currentCard=t.payload},cleanState:function(e){e.cards=Ft.cards,e.loaded=Ft.loaded,e.searchItem=Ft.searchItem,e.isLoading=Ft.isLoading,e.itemTypes=Ft.itemTypes,e.currentCard=Ft.currentCard}},extraReducers:(yt={},Object(De.a)(yt,Ct.pending,(function(e){e.isLoading=!0})),Object(De.a)(yt,Rt.fulfilled,(function(e,t){e.itemTypes=t.payload})),Object(De.a)(yt,Ct.fulfilled,(function(e,t){e.cards=t.payload,e.isLoading=!1})),Object(De.a)(yt,Lt.fulfilled,(function(){})),Object(De.a)(yt,Ct.rejected,(function(e){e.isLoading=!1})),Object(De.a)(yt,It.pending,(function(e){e.isLoading=!0})),Object(De.a)(yt,It.rejected,(function(e){e.isLoading=!1})),Object(De.a)(yt,It.fulfilled,(function(e){e.isLoading=!1})),Object(De.a)(yt,Tt.fulfilled,(function(e,t){var n,c,r=null===(n=e.cards)||void 0===n||null===(c=n.rows)||void 0===c?void 0:c.findIndex((function(e){return e.id===t.payload.activeCard.id}));r>-1&&(e.cards.rows[r].isInactive=t.payload.activeCard.isInactive)})),Object(De.a)(yt,Dt.fulfilled,(function(e){e.isLoading=!1})),yt)}),At=Et.reducer,Pt=Et.actions,Ut=function(e){var t=e.booking,n=e.isMonth,c=void 0!==n&&n,r=e.bookings,s=e.isMyReservation,i=Object(a.useMemo)((function(){return null===r||void 0===r?void 0:r.filter((function(e){return e.user.id===t.user.id}))}),[r]),o=Object(a.useMemo)((function(){return!(null===i||void 0===i?void 0:i.some((function(e){return 0===e.type})))}),[i]);return Object(qe.jsxs)("div",{className:"user",children:[Object(qe.jsx)(qc,{schedule:t,isMySchedule:s}),Object(qe.jsx)("span",{className:"user__name",children:"".concat(t.user.firstName," ").concat(t.user.lastName)}),c&&Object(qe.jsx)("div",{className:"user__booking",children:c&&(null===i||void 0===i?void 0:i.map((function(e){return Object(qe.jsxs)("div",{className:Je()("user__booking__item",{"user__booking__item--inactive":o},{"item--border":s},{"item--border--inactive":o&&s}),children:[vt(Object(bt.default)(e.from),"HH:mm")," - ",vt(Object(bt.default)(e.to),"HH:mm")]})})))})]})},Ht=n(43),zt=n.n(Ht);n(114);var Bt=function(e){var t=e.items,n=e.monitorInfo,c=e.loadMonitorInfo,r=Object(b.d)(lt),s={keyboard:"keyboard-icon",monitor:"monitor-icon"},i=Object(a.useState)(!1),o=Object(it.a)(i,2),l=o[0],u=o[1],d=Object(a.useMemo)((function(){if(!(null===t||void 0===t?void 0:t.length)||!(null===r||void 0===r?void 0:r.length))return 0;var e=r.find((function(e){return"\u041c\u043e\u043d\u0438\u0442\u043e\u0440"===e.name}));return t.filter((function(t){return t.typeId===(null===e||void 0===e?void 0:e.id)})).length}),[t,r]),j={"178ccf46-8263-436e-9f3d-001b121dceda":"monitor","acef9858-8534-42dc-8b5c-36649f73736b":"keyboard","e35b94d1-25a9-4a4b-800e-4e2feb6f1840":"sysBlock","2e05f08c-79a4-45a1-859d-597c8ee3840a":"mouse","c313868b-aa2e-409d-bd0d-fd7933bee650":"usb"},f=Object(a.useMemo)((function(){var e=null===t||void 0===t?void 0:t.map((function(e){return e.typeId})),n=null===e||void 0===e?void 0:e.map((function(e){return j[e]}));return Array.from(new Set(n))}),[j,t]);return Object(qe.jsxs)("div",{className:"card-tool__wrapper card-group",onClick:pt,children:[d>0&&Object(qe.jsxs)("div",{className:"card-group__monitor","data-tip":!0,"data-for":"monitor",onMouseEnter:function(){u(!0),c()},onMouseLeave:function(){u(!1)},children:[Object(qe.jsx)("div",{"data-tip":!0,"data-for":"monitor",className:"monitor-icon"}),Object(qe.jsx)(Xe,{className:"icon card-tool__wrapper-icon monitor",name:"monitor",fill:!0})]}),null===f||void 0===f?void 0:f.filter((function(e){return"monitor"!==e})).map((function(e){return Object(qe.jsx)(Xe,{className:"icon card-tool__wrapper-icon ".concat(s[e]),name:e,fill:!0},e)})),(null===n||void 0===n?void 0:n.length)>0&&l&&Object(qe.jsx)("div",{className:"tooltip_container",children:n.map((function(e){return Object(qe.jsx)(Pc,{monitorInfo:e})}))}),d>0&&Object(qe.jsx)("span",{className:"card-tool__wrapper-value",children:d})]})},qt=n(18),Vt=n.n(qt),Wt=["className","icon"],Yt=s.a.forwardRef((function(e,t){var n=e.className,c=e.icon,r=Object(We.a)(e,Wt);return Object(qe.jsx)("button",Object(Be.a)(Object(Be.a)({className:n},r),{},{ref:t,children:c}))}));function Jt(e){var t=e.onDelete,n=e.onEdit,c=e.onLock,r=e.isInactive,a=e.isFullTimeInactive,s=Object(b.d)(ct),i=Ot(me,s);return Object(qe.jsxs)("div",{className:"card-tool__wrapper card-group no-border bottom_card card_edit",onClick:pt,children:[Object(qe.jsxs)("div",{className:"action-icon",children:[Object(qe.jsx)(Yt,{className:Je()("ctrl-button--icon tool_container delete-icon",{"ctrl-button--icon--inactive":a}),icon:Object(qe.jsx)(Xe,{name:"abort"}),onClick:function(){return t(!0)}}),Object(qe.jsx)(Yt,{className:Je()("ctrl-button--icon tool_container edit-icon",{"ctrl-button--icon--inactive":a}),icon:Object(qe.jsx)(Xe,{name:"pen"}),onClick:function(){return n(!0)}})]}),Object(qe.jsx)(Yt,{className:Je()("ctrl-button--icon tool_container",{"ctrl-button--icon--inactive":a},{"ctrl-button--icon--hide":i}),icon:Object(qe.jsx)(Xe,{name:r?"lock-closed":"lock-opened",className:r?"lock-closed-icon":"lock-opened-icon",size:36,onClick:c})})]})}Yt.propTypes={className:Vt.a.string,icon:Vt.a.node};var Gt=function(e){var t=e.isCardFullReserved,n=e.isFullTimeInactive,c=e.reservationInfo,r=c.length&&!n;return Object(qe.jsx)(qe.Fragment,{children:Object(qe.jsx)("span",{className:Je()({card__status:!c.length||n},{"card__status--busy":r},{"card__status--full-busy":t},{"card__status--inactive":n}),children:r?t?"\u041f\u043e\u043b\u043d\u044b\u0439 \u0440\u0435\u0437\u0435\u0440\u0432":"\u0427\u0430\u0441\u0442\u0438\u0447\u043d\u044b\u0439 \u0440\u0435\u0437\u0435\u0440\u0432":n?"\u041d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e":"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u043e"})})};var $t=function(e){var t,n=e.card,c=e.isFullTimeInactive,r=e.room,a=Object(tt.i)(r),s=n.reservationInfo,i=2===(null===(t=s[0])||void 0===t?void 0:t.availabilityStatus);return Object(qe.jsxs)("div",{className:"card__header card-group",children:[Object(qe.jsxs)("p",{className:"card__title",children:[Object(qe.jsx)("span",{className:"card__title-room",children:null===a||void 0===a?void 0:a.id}),"/\u041c","".concat(n.name)]}),Object(qe.jsx)(Gt,{isCardFullReserved:i,isFullTimeInactive:c,reservationInfo:s})]})};var Kt=function(e){var t=e.schedules,n=Object(a.useMemo)((function(){return t.filter((function(e){return 1===e.type}))||[]}),[t]),c=Object(a.useMemo)((function(){return t.filter((function(e){return 1!==e.type}))||[]}),[t]),r=Object(a.useMemo)((function(){return zt()(c,"user.id")}),[c]),s=Object(b.d)(rt);return Object(qe.jsxs)("div",{className:"tooltip-inactive__content",children:[Object(qe.jsxs)("div",{className:"tooltip-inactive__title",children:[Object(qe.jsx)("span",{className:"tooltip-inactive__icon",children:Object(qe.jsx)(Xe,{name:"warning"})}),Object(qe.jsx)("p",{children:"\u041c\u0435\u0441\u0442\u043e \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e \u043f\u043e \u043f\u0440\u0438\u0447\u0438\u043d\u0435 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0440\u0430\u0431\u043e\u0442."})]}),n.map((function(e){return Object(qe.jsxs)("div",{className:"tooltip-inactive__subtitle",children:[Object(qe.jsx)("p",{children:"\u0412 \u043f\u0435\u0440\u0438\u043e\u0434:"}),Object(qe.jsxs)("div",{className:"user__booking__item",children:[vt(Object(bt.default)(null===e||void 0===e?void 0:e.from),"HH:mm")," - ",vt(Object(bt.default)(null===e||void 0===e?void 0:e.to),"HH:mm")]})]},e.id)})),r.map((function(e){return Object(qe.jsxs)(qe.Fragment,{children:[Object(qe.jsx)("div",{className:"user__booking__line"}),Object(qe.jsx)("div",{className:"user__booking",children:Object(qe.jsx)("div",{className:"user__booking--month",children:Object(qe.jsx)(Ut,{booking:e,bookings:c,isMonth:!0,isMyReservation:e.user.id===s},e.id)})})]})}))]})},Qt=function(e){return e.schedule.isScheduleActive},Xt=function(e){return e.schedule.currentDate},Zt=function(e){var t;return null===(t=e.schedule.listOfAllReservations)||void 0===t?void 0:t.rows},en=function(e){var t;return null===(t=e.schedule.listOfReservations)||void 0===t?void 0:t.schedules},tn=function(e){return e.schedule.selectedDate},nn=function(e){return e.schedule.selectedTime},cn=function(e){return e.schedule.isScheduleSlotActive},rn=function(e){return e.schedule.selectedSchedule},an=function(e){return e.schedule.checkboxes},sn=n(56),on=function(e){var t=e.bookings,n=e.hideTooltip,c=Object(b.d)(rt),r=t.length>4,s=t.length-3,i=Object(a.useMemo)((function(){return zt()(t,"user.id")}),[t]),o=i.map((function(e){return e.user.id})),l=Object(a.useMemo)((function(){return(r?i.slice(0,3):i).map((function(e){return Object(qe.jsx)(qc,{schedule:e,isMySchedule:e.user.id===c,isFullDayReserved:(n=t,r=o,(Array.isArray(n)&&Array.isArray(r)?n.reduce((function(e,t){return r.some((function(e){return e===t.user.id}))?e+Object(jt.a)(Object(bt.default)(t.to),Object(bt.default)(t.from)):e}),0):0)>=7)},e.id);var n,r}))}),[t,i,r,o,c]);return Object(qe.jsx)(sn.a,{interactive:!0,placement:"bottom",offset:[0,4],popperOptions:{strategy:"absolute",modifiers:[{name:"flip",options:{fallbackPlacements:["top","left"]}}]},content:Object(qe.jsx)("div",{className:"users schedule-month__users",children:i.map((function(e){return Object(qe.jsx)(Ut,{booking:e,bookings:i,isMonth:!0,isMyReservation:e.user.id===c},e.id)}))}),children:Object(qe.jsxs)("div",{className:"schedule-month__booked",onMouseEnter:n,children:[l,r&&Object(qe.jsxs)("span",{className:"schedule-month__all-booked",children:["+",s]})]})})};n(186);function ln(e){var t=e.children,n=e.title,c=e.excludeRef,r=e.onClose,a=e.className,s=e.isDeleteForm,i=void 0!==s&&s;return Object(qe.jsx)("div",{className:Je()("modal-form__background",a),ref:c,children:Object(qe.jsx)("div",{className:Je()("modal-form",{"modal-form--delete":i}),children:Object(qe.jsxs)("div",{className:"modal-form__container",children:[Object(qe.jsx)("span",{className:"modal-form__icon-wrapper",onClick:r,children:Object(qe.jsx)(Xe,{className:"modal-form__icon-closed",size:24,name:"cross"})}),Object(qe.jsx)("div",{className:"modal-form__title",children:n}),Object(qe.jsxs)("div",{className:"form form-authtorisation",children:[" ",t," "]})]})})})}n(187),n(188);function un(e){var t,n,c,r,s,i=e.card,o=e.currentLocation,l=e.isCanManageLocations,u=e.sizePage,d=e.handleCardClick,j=Object(a.useState)(!1),m=Object(it.a)(j,2),O=m[0],h=m[1],x=Object(a.useState)(!1),_=Object(it.a)(x,2),g=_[0],N=_[1],k=Object(a.useState)(!1),y=Object(it.a)(k,2),w=y[0],C=y[1],I=Object(a.useState)(!1),R=Object(it.a)(I,2),T=R[0],D=R[1],L=Object(a.useState)([]),M=Object(it.a)(L,2),F=M[0],E=M[1],A=Object(a.useState)(!1),P=Object(it.a)(A,2),U=P[0],H=P[1],z=Object(a.useRef)(null),B=Object(a.useRef)(null),q=Object(b.c)(),V=Object(b.d)(Xt),W=i.name,Y=Object(tt.i)().id,J=i.reservationInfo,G=2===(null===(t=J[0])||void 0===t?void 0:t.availabilityStatus),$=1===(null===(n=J[0])||void 0===n?void 0:n.availabilityStatus),K=Object(a.useMemo)((function(){var e,t;return null===(e=J[0])||void 0===e||null===(t=e.reservations)||void 0===t?void 0:t.some((function(e){return 0===e.type}))}),[J]);Nt({ref:z,cb:function(){return h(!1)},exclude:B}),Nt({ref:z,cb:function(){return N(!1)},exclude:B});var Q=function(){return h(!1)},X=function(){return N(!1)},Z=(null===(c=i.reservationInfo[0])||void 0===c?void 0:c.reservations)||[],ee=function(){return H(!1)},te=Object(a.useCallback)((function(){var e;null===(e=i.items)||void 0===e||e.forEach((function(e){E(),e.inventoryCode&&wt.checkMonitor(e.inventoryCode).then((function(e){"ok"===e.status&&E((function(t){return[].concat(Object(f.a)(t||[]),[e.data])}))}))}))}),[i.items,E]),ne=function(){var e=Object(p.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=Object(a.useMemo)((function(){var e;return null===(e=i.reservationInfo[0])||void 0===e?void 0:e.reservations.some((function(e){return 1===e.type}))}),[i]),re=(null===(r=i.reservationInfo[0])||void 0===r?void 0:r.reservations.some((function(e){return Object(jt.a)(new Date(e.to),new Date(e.from))>7})))&&ce||!1,ae=function(){return C(!1)};return Object(qe.jsxs)(qe.Fragment,{children:[Object(qe.jsxs)(Ze.b,{to:Object(tt.f)(S,{id:Y,number:W,mode:he}),className:Je()("wrapper_card workspace__card ",{workspace__card_hover:l},{"workspace__card--inactive":re},{"workspace__card--part-time":!G&&($||K||ce&&!re)},{"workspace__card--full-time":G}),onClick:re?pt:d,children:[Object(qe.jsxs)("div",{className:"card__content",children:[Object(qe.jsx)($t,{card:i,date:V,schedules:Z,isFullTimeInactive:re}),Object(qe.jsx)("div",{className:"card-owner",onMouseEnter:function(){Z.some((function(e){return 1===e.type}))&&H(!0)},onMouseLeave:ee,children:Object(qe.jsx)(on,{bookings:Z,hideTooltip:ee})}),Object(qe.jsx)(Bt,{items:i.items,monitorInfo:F,loadMonitorInfo:te})]}),l&&Object(qe.jsx)(Jt,{isFullTimeInactive:re,isInactive:ce,onDelete:h,onEdit:N,onLock:ne}),U&&ce&&Object(qe.jsx)("div",{className:"tooltip-inactive__container",children:Object(qe.jsx)(Kt,{schedules:Z})})]}),w&&Object(qe.jsx)(ln,{title:Object(qe.jsx)("span",{children:"\u0411\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0430 \u0440\u0430\u0431\u043e\u0447\u0435\u0433\u043e \u043c\u0435\u0441\u0442\u0430"}),ref:z,excludeRef:B,onClose:ae,className:"block-card",children:Object(qe.jsx)(Qc,{title:"".concat(ce?"\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0440\u0430\u0431\u043e\u0447\u0435\u0435 \u043c\u0435\u0441\u0442\u043e ":"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0435\u0440\u0438\u043e\u0434 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438 \u0440\u0430\u0431\u043e\u0447\u0435\u0433\u043e \u043c\u0435\u0441\u0442\u0430 ").concat(i.name).concat(ce?"?":"."),onClose:ae,card:null===i||void 0===i||null===(s=i.reservationInfo[0])||void 0===s?void 0:s.reservations,isInactive:ce,cardId:null===i||void 0===i?void 0:i.id})}),O&&Object(qe.jsx)(ln,{title:Object(qe.jsx)("span",{children:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0447\u0435\u0433\u043e \u043c\u0435\u0441\u0442\u0430 "}),ref:z,excludeRef:B,onClose:Q,isDeleteForm:!0,children:Object(qe.jsx)("div",{className:"delete-card",children:Object(qe.jsx)(wn,{onClose:Q,action:function(){D(!0),q(St({ids:[i.id]})).unwrap().then((function(){q(Ct(kt(null===o||void 0===o?void 0:o.id))),Zc("\u0420\u0430\u0431\u043e\u0447\u0435\u0435 \u043c\u0435\u0441\u0442\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u043e","\u0420\u0430\u0431\u043e\u0447\u0435\u0435 \u043c\u0435\u0441\u0442\u043e \u041c".concat(i.name," \u0432 \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u0435  ").concat(null===o||void 0===o?void 0:o.name," \u0443\u0434\u0430\u043b\u0435\u043d\u043e."))})).catch((function(){Xc("\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f","\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437")})),D(!1)},isLoading:T,title:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0440\u0430\u0431\u043e\u0447\u0435\u0435 \u043c\u0435\u0441\u0442\u043e ".concat(i.name," \u0432 \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u0435 ").concat(null===o||void 0===o?void 0:o.name,"?")})})}),g&&Object(qe.jsx)(ln,{title:Object(qe.jsx)("span",{children:"\u0420\u0430\u0431\u043e\u0447\u0435\u0435 \u043c\u0435\u0441\u0442\u043e "}),ref:z,excludeRef:B,onClose:X,children:Object(qe.jsx)(Ac,{onClose:X,card:i,sizePage:u,location:o,monitorInfo:F})})]})}n(189),n(190);function dn(e){var t=e.currentLocation,n=e.sizePage,c=Object(a.useState)(!1),r=Object(it.a)(c,2),s=r[0],i=r[1],o=Object(a.useRef)(null),l=Object(a.useRef)(null),u=Object(b.d)(ct),d=Ot(de,u)||Ot(me,u),j=Object(b.c)();Nt({ref:o,cb:function(){return i(!1)},exclude:l});var f=Object(b.d)(ot),m=function(){return i(!1)},O=Object(a.useMemo)((function(){var e;return null===(e=f.rows)||void 0===e?void 0:e.filter((function(e){return d||!e.isInactive}))}),[f.rows,d]);return Object(qe.jsxs)("div",{className:"workspace__group",children:[d&&Object(qe.jsx)("button",{className:"ctrl-button add-button",onClick:function(){return i(!0)},children:Object(qe.jsx)("span",{className:"ctrl-button__container",children:Object(qe.jsx)(Xe,{className:"add",name:"add"})})}),s&&d&&Object(qe.jsx)(ln,{title:Object(qe.jsx)("span",{children:"\u0420\u0430\u0431\u043e\u0447\u0435\u0435 \u043c\u0435\u0441\u0442\u043e"}),excludeRef:l,onClose:m,action:"create",children:Object(qe.jsx)(Ac,{location:t,onClose:m,sizePage:n,getParamsForLoadCards:kt})}),null===O||void 0===O?void 0:O.map((function(e){return Object(qe.jsx)(un,{card:e,currentLocation:t,isCanManageLocations:d,sizePage:n,getParamsForLoadCards:kt,handleCardClick:function(){return j(Pt.setCurrentCard(e))}},e.id)}))]})}function jn(e){var t=e.location,n=e.onClick;return Object(qe.jsx)("li",{className:"nav__menu-item",children:Object(qe.jsx)(Ze.b,{to:"/locations/".concat(t.name),className:"nav__menu-link",activeClassName:"nav__menu-link--active",onClick:n,children:t.name})})}function bn(e){var t=e.className,n=e.isOpenSearch,c=e.isCanViewMyReservations,r=e.setProfileOpen,s=e.profile,i=Object(a.useState)(!1),o=Object(it.a)(i,2),l=o[0],u=o[1],d=Object(a.useRef)(null),j=Object(b.c)(),f=Object(tt.h)(),m=ht(null===s||void 0===s?void 0:s.pictureUrl),O=null===(null===s||void 0===s?void 0:s.pictureUrl);Nt({ref:d,cb:function(){return u(!1)}});var h=function(){var e=Object(p.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(Ce());case 2:f.push(k);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(qe.jsxs)("div",{className:Je()("user-bar",t,{"user-bar--none":n}),ref:d,children:[c&&Object(qe.jsxs)(Ze.a,{to:I,className:"booking-btn user-bar__booking booking-btn--desktop",children:["\u041c\u043e\u0438 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f",Object(qe.jsx)(Xe,{className:"booking-btn__icon",name:"my-booking",size:28})]}),Object(qe.jsxs)("div",{className:"user-bar__group",children:[O||m?Object(qe.jsx)("div",{className:"user-bar__avatar user-bar__avatar--pers",children:"".concat(null===s||void 0===s?void 0:s.firstName)[0]}):Object(qe.jsx)("img",{src:null===s||void 0===s?void 0:s.pictureUrl,className:"user-profile__image-header",alt:""}),Object(qe.jsxs)("div",{className:"user-bar__info",children:[Object(qe.jsx)("p",{className:"user-bar__name",children:"".concat(null===s||void 0===s?void 0:s.firstName," ").concat(null===s||void 0===s?void 0:s.lastName)}),Object(qe.jsx)(Ze.a,{to:"/",className:"user-bar__email",href:null===s||void 0===s?void 0:s.email,children:null===s||void 0===s?void 0:s.email})]}),Object(qe.jsx)(Yt,{className:"user-bar__action",icon:Object(qe.jsx)(Xe,{className:"user-bar__action-icon",name:"arrow-down",size:16}),onClick:function(){return u((function(e){return!e}))}})]}),Object(qe.jsxs)("div",{className:Je()("user-bar__dropdown",{"user-bar__dropdown--is-open":l}),children:[Object(qe.jsxs)("span",{className:"user-bar__dropdown-box",onClick:function(){u(!1),f.push(M)},children:[Object(qe.jsx)(Xe,{name:"version-history",className:"user-bar__dropdown-icon"}),"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0432\u0435\u0440\u0441\u0438\u0439"]}),Object(qe.jsxs)("span",{className:"user-bar__dropdown-box",onClick:function(){r(!0),u(!1)},children:[Object(qe.jsx)(Xe,{name:"userProfile",className:"user-bar__dropdown-icon"}),"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u0440\u043e\u0444\u0438\u043b\u044f"]}),Object(qe.jsxs)("span",{className:"user-bar__dropdown-box",onClick:h,children:[Object(qe.jsx)(Xe,{name:"exit",className:"user-bar__dropdown-icon"}),"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u0441\u0438\u0441\u0442\u0435\u043c\u044b"]})]})]})}var fn=["isOpen","className"],mn=s.a.forwardRef((function(e,t){var n=e.isOpen,c=e.className,r=Object(We.a)(e,fn);return Object(qe.jsx)("div",Object(Be.a)(Object(Be.a)({className:Je()("burger",c),role:"button",tabIndex:0},r),{},{ref:t,children:Object(qe.jsx)("span",{className:"burger__box",children:Object(qe.jsx)(Xe,{name:"".concat(n?"burger-close":"burger"),className:"burger__item"})})}))}));mn.propTypes={isOpen:Vt.a.bool,onClick:Vt.a.func,className:Vt.a.string};var On=s.a.forwardRef((function(e,t){var n=e.value,c=e.onClick;return Object(qe.jsxs)("div",{className:"calendar__date",onClick:c,ref:t,children:[Object(qe.jsx)(Xe,{name:"calendar",className:"icon calendar_icon"}),Object(qe.jsx)("div",{className:"react-datepicker-wrapper",children:Object(qe.jsx)("div",{className:"react-datepicker__input-container",children:Object(qe.jsxs)("p",{className:"react-datepicker-ignore-onclickoutside",children:[" ",n," "]})})})]})})),vn=On;On.propTypes={value:Vt.a.string,onClick:Vt.a.func};n(191);function pn(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=Object(a.useRef)();function r(){c.current&&(clearTimeout(c.current),c.current=void 0)}return Object(a.useEffect)((function(){return n?r:void 0}),[n]),function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];r(),c.current=setTimeout((function(){return e.apply(void 0,a)}),t)}}function hn(){var e,t;return null===(e=Object(tt.j)(y))||void 0===e||null===(t=e.params)||void 0===t?void 0:t.id}function xn(){var e=Object(a.useState)([]),t=Object(it.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),s=Object(it.a)(r,2);return{checkedRooms:n,setCheckedRooms:c,checkedPlaces:s[0],setCheckedPlaces:s[1],locations:Object(b.d)(Ee)}}var _n=function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return{pageRequest:{size:e,index:c,params:{query:n,sortAsc:!0,sortBy:1,options:t}}}},gn={getReservations:function(){var e=Object(p.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.post(ce,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getMyReservations:function(){var e=Object(p.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.post(ne,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getLoadTools:function(){var e=Object(p.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get("".concat($,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",{data:n.data,tableId:t});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Nn=Object(m.b)("loadReservations/getReservations",function(){var e=Object(p.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gn.getMyReservations(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),kn=n(390);n(192);function yn(e){var t=e.isOpen,n=e.setIsOpen,c=e.exclude,r=Object(a.useRef)(null);return Nt({ref:r,cb:function(){return n(!1)},exclude:c}),Object(qe.jsxs)("aside",{className:Je()("sidebar",{"sidebar--is-open":t}),ref:r,children:[Object(qe.jsx)("div",{className:"sidebar__header",children:Object(qe.jsx)(et,{})}),Object(qe.jsx)(Rn,{openSidebar:n}),Object(qe.jsx)(Ve,{})]})}n(193);function wn(e){var t=e.onClose,n=e.action,c=e.isLoading,r=e.title;return Object(qe.jsxs)("div",{className:"modal__wrapper",children:[Object(qe.jsx)("p",{children:r}),Object(qe.jsxs)("div",{className:"control_buttons buttons__confirm-modal",children:[Object(qe.jsx)($e,{onClick:t,className:" form__button form-cancel__button ",disabled:c,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(qe.jsx)($e,{className:" form__button form-edit-card__button",onClick:n,type:"submit",disabled:c,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})}n(194),n(195);var Cn=s.a.forwardRef((function(e,t){var n=e.isOpen,c=e.title,r=e.children;return Object(qe.jsx)("div",{className:Je()("modal",{"is-active":n}),ref:t,children:Object(qe.jsx)("div",{className:"modal__container",children:Object(qe.jsxs)("div",{className:"modal__group",children:[Object(qe.jsx)("span",{className:"modal__title",children:c}),r]})})})})),Sn=Cn;function In(e){var t=e.value,n=e.label,c=e.onChange,r=e.checked;return Object(qe.jsxs)("div",{className:"checkbox-element",onClick:function(){return c(!r)},children:[Object(qe.jsxs)("label",{className:"checkbox_label",htmlFor:"checkbox".concat(t),children:[Object(qe.jsx)("input",{type:"checkbox",name:t,className:"custom-checkbox",checked:r,id:"checkbox".concat(t),onClick:function(e){return e.stopPropagation()}}),Object(qe.jsx)("div",{className:"checkbox_checkbox"})]}),Object(qe.jsx)("span",{className:"checkbox-element__span",children:Object(qe.jsx)("span",{className:"checkbox-element__label",children:n})})]})}Cn.propTypes={children:Vt.a.object,isOpen:Vt.a.bool,title:Vt.a.string};n(196);function Rn(e){var t=e.openSidebar,n=Object(b.c)();Object(a.useEffect)((function(){n(Fe())}),[]);var c=Object(b.d)(Ee),r=Object(b.d)(ct),s=Ot(be,r)||Ot(fe,r),i=Ot(de,r),o=Ot(fe,r),l=function(){return t(!1)};return Object(qe.jsxs)("div",{className:"sidebar__content",children:[Object(qe.jsxs)("p",{className:"sidebar__title",children:[Object(qe.jsx)(Xe,{className:"sidebar__title-icon",name:"pin",fill:!0}),Object(qe.jsx)("span",{className:"nav__link-text",children:"\u0420\u0430\u0431\u043e\u0447\u0438\u0435 \u043c\u0435\u0441\u0442\u0430"})]}),Object(qe.jsx)("ul",{className:"nav__submenu",children:c.map((function(e){return Object(qe.jsx)(jn,{location:e,onClick:l},e.id)}))}),s&&Object(qe.jsx)(Dn,{icon:Object(qe.jsx)(Xe,{name:"users",fill:!0}),link:R,onClick:l,children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"}),o&&Object(qe.jsx)(Dn,{className:"compensation-sidebar",icon:Object(qe.jsx)(Xe,{name:"statistics",fill:!0}),link:D,onClick:l,children:"\u041a\u043e\u043c\u043f\u0435\u043d\u0441\u0430\u0446\u0438\u0438"}),i&&Object(qe.jsx)(Dn,{icon:Object(qe.jsx)(Xe,{name:"settings",fill:!0}),link:L,onClick:l,children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})]})}function Tn(e){var t=e.children,n=e.isOpen;return Object(qe.jsx)("form",{className:Je()("form-search","header__form-search",{"form-search--is-active":n}),children:Object(qe.jsx)("div",{className:"form-search__box",children:t})})}n(197);function Dn(e){var t=e.icon,n=e.children,c=e.link,r=e.className,a=e.onClick;return Object(qe.jsx)("li",{className:"nav__item",children:Object(qe.jsxs)(Ze.b,{to:c,activeClassName:"nav__link--active",className:Je()("nav__link",r),onClick:a,children:[s.a.isValidElement(t)?s.a.cloneElement(t,{className:Je()("nav__link-icon",t.props.className)}):null,n]})})}var Ln=n(21),Mn=n.n(Ln),Fn=n(391),En=n(392);function An(){var e=Object(a.useState)(null),t=Object(it.a)(e,2),n=t[0],c=t[1],r=Object(b.d)((function(e){return{startDate:Xt(e)}})).startDate,s=Object(b.c)(),i=Object(tt.i)().mode,o=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?1:-1,r=pe===i||ge===i,a=Object(Fn.a)(n,{days:r?t:0,weeks:he===i?t:0,months:xe===i?t:0,years:_e===i?t:0});sessionStorage.setItem(ve,Object(kn.a)(a)),s(yr(a)),c(a)};return Object(a.useEffect)((function(){var e=sessionStorage.getItem(ve);null===e?(sessionStorage.setItem(ve,Object(kn.a)(new Date)),c(Object(En.a)(sessionStorage.getItem(ve)))):(c(Object(En.a)(e)),s(yr(Object(En.a)(e))))}),[]),Object(a.useEffect)((function(){c(r)}),[r]),Object(qe.jsx)("div",{className:"calendar schedule-dashboard__calendar",children:Object(qe.jsxs)("div",{className:"calendar__group",children:[Object(qe.jsx)(Yt,{className:"calendar__button-prev",icon:Object(qe.jsx)(Xe,{className:"calendar__button-prev-icon",name:"arrow-prev",size:16}),onClick:function(){return o()}}),Object(qe.jsx)(Mn.a,{selected:r,onChange:function(e){return s(yr(e))},locale:"ru",showYearDropdown:!0,yearDropdownItemNumber:15,dateFormat:"d MMMM",dateFormatCalendar:"LLLL",scrollableYearDropdown:!0,customInput:Object(qe.jsx)(vn,{})}),Object(qe.jsx)(Yt,{className:"calendar__button-next",icon:Object(qe.jsx)(Xe,{className:"calendar__button-next-icon",name:"arrow-next",size:16}),onClick:function(){return o(true)}})]})})}var Pn=n(45);n(235);function Un(e){var t=e.title,n=e.description;return Object(qe.jsxs)("div",{children:[Object(qe.jsxs)("p",{children:[" ",t," "]}),Object(qe.jsxs)("p",{children:[" ",n," "]})]})}var Hn,zn=function(e){var t=e.title,n=e.description,c=e.iconName,r=e.type,a=e.toastPosition,s=void 0===a?Pn.b.POSITION.BOTTOM_RIGHT:a;Pn.b[r](Object(qe.jsx)(Un,{title:t,description:n}),{icon:function(){return Object(qe.jsx)(Xe,{name:c,size:20})},position:s})},Bn=["\u0412\u0441","\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431"],qn=["\u042f\u043d\u0432","\u0424\u0435\u0432\u0440","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433","\u0421\u0435\u043d\u0442","\u041e\u043a\u0442","\u041d\u043e\u044f\u0431","\u0414\u0435\u043a"],Vn={getScheduleYear:function(){var e=Object(p.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.post(W,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Wn=Object(m.b)("yearReservation/getYearReservation",function(){var e=Object(p.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vn.getScheduleYear(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Yn=function(e){return e.scheduleYear.isListOfAllBookings},Jn=function(e){return e.scheduleYear.isListOfErrorBookings},Gn=Object(m.c)({name:"scheduleYear",initialState:{isLoading:!1,isListOfAllBookings:null,isListOfErrorBookings:!1},reducers:{setListOfErrorBookings:function(e,t){e.isListOfErrorBookings=t.payload}},extraReducers:(Hn={},Object(De.a)(Hn,Wn.pending,(function(e){e.isLoading=!0})),Object(De.a)(Hn,Wn.fulfilled,(function(e,t){e.isListOfAllBookings=t.payload,e.isLoading=!1})),Object(De.a)(Hn,Wn.rejected,(function(e){e.isLoading=!1})),Hn)}),$n=Gn.reducer,Kn=Gn.actions,Qn=(n(236),1),Xn=2,Zn=4,ec=function(e){var t=null===e||void 0===e?void 0:e.filter((function(e){return e.statusCode===Qn})),n=null===e||void 0===e?void 0:e.filter((function(e){return e.statusCode===Xn})),c=null===e||void 0===e?void 0:e.filter((function(e){return e.statusCode===Zn}));return Object(qe.jsxs)("div",{className:"toast__content content",children:[t.map((function(e){var t=new Date(e.from);return Object(qe.jsxs)("div",{className:"content__item",children:[Object(qe.jsx)("div",{className:"content__item__icon"}),Object(qe.jsx)("p",{className:"content__item__subtitle",children:"\u041c\u0435\u0441\u0442\u043e \u0437\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043b \u0434\u0440\u0443\u0433\u043e\u0439 \u043f\u0430\u0440\u0442\u043d\u0451\u0440 (".concat(Bn[t.getDay()]," ").concat(t.getDate()," ").concat(qn[t.getMonth()],")")})]})})),!!t.length&&!!n.length&&Object(qe.jsx)("div",{className:"toast__spacer"}),n.map((function(e){var n,c,r=new Date(e.from);return Object(qe.jsxs)(qe.Fragment,{children:[Object(qe.jsxs)("div",{className:"content__item",children:[Object(qe.jsx)("div",{className:Je()("content__item__icon",{"content__item__icon--middle":!!t.length})}),Object(qe.jsx)("p",{className:"content__item__subtitle",children:"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (".concat(Bn[r.getDay()]," ").concat(r.getDate()," ").concat(qn[r.getMonth()],")")})]}),Object(qe.jsx)("p",{className:"content__item__desctiption",children:"\u0412\u044b \u0443\u0436\u0435 \u0437\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043b\u0438 \u043c\u0435\u0441\u0442\u043e ".concat(null===(n=e.table)||void 0===n?void 0:n.name," \u0432 ").concat(null===(c=e.room)||void 0===c?void 0:c.name," \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u0435")})]})})),(!!n.length||!!t.length)&&!!c.length&&Object(qe.jsx)("div",{className:"toast__spacer"}),c.map((function(e){var c=new Date(e.from);return Object(qe.jsxs)(qe.Fragment,{children:[Object(qe.jsxs)("div",{className:"content__item",children:[Object(qe.jsx)("div",{className:Je()("content__item__icon",{"content__item__icon--bottom":!!t.length&&!!n.length},{"content__item__icon--middle":!t.length&&!!n.length||!n.length&&!!t.length})}),Object(qe.jsx)("p",{className:"content__item__subtitle",children:"\u0422\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u0435 (".concat(Bn[c.getDay()]," ").concat(c.getDate()," ").concat(qn[c.getMonth()],")")})]}),Object(qe.jsxs)("p",{className:"content__item__desctiption",children:["\u0412 \u043f\u0435\u0440\u0438\u043e\u0434 \u0441 19 \u0410\u0432\u0433 \u043f\u043e 21 \u0410\u0432\u0433 \u043c\u0435\u0441\u0442\u043e \u041c5 ",Object(qe.jsx)("br",{})," \u0437\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0434\u043b\u044f \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u044f.",Object(qe.jsx)("br",{}),"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0440\u0443\u0433\u043e\u0439 \u043f\u0435\u0440\u0438\u043e\u0434 ",Object(qe.jsx)("br",{})," \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f."]})]})}))]})};function tc(e){var t=e.title,n=e.incorrectSchedules,c=e.locationNumber,r=e.roomId,a=Object(b.c)();return Object(qe.jsxs)("div",{className:"toast__wrapper",children:[Object(qe.jsxs)("div",{className:"toast__header header",children:[Object(qe.jsx)(Xe,{name:"error",size:20}),Object(qe.jsxs)("p",{className:"header__title",children:[" ",t]})]}),n.length<=7?ec(n):Object(qe.jsxs)(qe.Fragment,{children:[Object(qe.jsxs)("p",{className:"content__item",children:["\u041d\u0430\xa0\u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434 \u0443\u0436\u0435\xa0\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0442\xa0\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f, ",Object(qe.jsx)("br",{})," \u0441\u043e\u0432\u0435\u0440\u0448\u0451\u043d\u043d\u044b\u0435 \u0432\u0430\u043c\u0438 \u0438\u043b\u0438\xa0\u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u043f\u0430\u0440\u0442\u043d\u0451\u0440\u0430\u043c\u0438."]}),Object(qe.jsx)(Ze.b,{to:Object(tt.f)(S,{id:r,number:c,mode:_e}),exact:!0,children:Object(qe.jsx)($e,{onClick:function(){return a(Kn.setListOfErrorBookings(!0))},className:"form__button",children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c"})})]})]})}var nc=function(e){var t=e.length,n=e.incorrectSchedules,c=e.locationNumber,r=e.roomId,a=e.toastPosition,s=void 0===a?Pn.b.POSITION.BOTTOM_RIGHT:a;Pn.b.error(Object(qe.jsx)(tc,{title:"\u041c\u0435\u0441\u0442\u043e \u043d\u0435 \u0437\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043e (".concat(t,")"),incorrectSchedules:n,locationNumber:c,roomId:r}),{icon:"",position:s,autoClose:!1})};n(237);function cc(e){var t=e.item,n=e.deleteTag,c=e.setActiveTag,r=e.i,s=e.disabled;return Object(a.useEffect)((function(){"\u041c\u043e\u043d\u0438\u0442\u043e\u0440"===(null===t||void 0===t?void 0:t.name)&&c({name:null===t||void 0===t?void 0:t.name,index:r,typeId:t.typeId})}),[null===t||void 0===t?void 0:t.name]),Object(qe.jsxs)("div",{className:"tag__wrapper ".concat("\u041c\u043e\u043d\u0438\u0442\u043e\u0440"===(null===t||void 0===t?void 0:t.name)&&"tag__wrapper--active"),children:[Object(qe.jsx)("span",{children:null===t||void 0===t?void 0:t.name}),Object(qe.jsx)(Xe,{name:"\u041c\u043e\u043d\u0438\u0442\u043e\u0440"===(null===t||void 0===t?void 0:t.name)?"delete-active-tag":"delete-tag",className:"delete-tag_icon",size:16,onClick:function(){return!s&&n(t)}})]})}var rc={local:{name:"\u0412 \u043e\u0444\u0438\u0441\u0435",id:0},remote:{name:"\u0423\u0434\u0430\u043b\u0435\u043d\u0449\u0438\u043a",id:1},localRemote:{name:"\u041c\u0435\u0441\u0442\u043d\u044b\u0439 \u0443\u0434\u0430\u043b\u0435\u043d\u0449\u0438\u043a",id:2}},ac={getUsers:function(){var e=Object(p.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.post(Z,t);case 2:return n=e.sent,e.abrupt("return",n.data.rows||[]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getUsersForAdmin:function(){var e=Object(p.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.post(ae,t);case 2:return n=e.sent,e.abrupt("return",n.data.rows||[]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateUserType:function(){var e=Object(p.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.post(ee,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateUserEquipment:function(){var e=Object(p.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.post(ee,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateUserStatus:function(){var e=Object(p.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.post(ee,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getRole:function(){return u.get(se)},updateUserRole:function(){var e=Object(p.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.post(ie,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},sc=Object(m.b)("/api/User/page",function(){var e=Object(p.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ac.getUsers(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ic=Object(m.b)("/api/User/page",function(){var e=Object(p.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ac.getUsersForAdmin(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),oc=Object(m.b)("/api/User/type",function(){var e=Object(p.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ac.updateUserType(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),lc=Object(m.b)("/api/User/equipment",function(){var e=Object(p.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ac.updateUserEquipment(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),uc=Object(m.b)("/api/User/status",function(){var e=Object(p.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ac.updateUserStatus(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),dc=Object(m.b)("/api/role",function(){var e=Object(p.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ac.updateUserRole(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),jc=function(e){return e.roles};function bc(e){var t=e.children,n=e.className,c=e.label,r=e.error,a=e.name,i=e.register,o=e.id,l=void 0===o?a:o;return Object(qe.jsxs)("div",{className:Je()("form-item ".concat(n),{"is-invalid":r}),children:[Object(qe.jsx)("label",{className:"form-item__label",htmlFor:l,children:c}),s.a.isValidElement(t)&&i?s.a.cloneElement(t,Object(Be.a)({},i(a))):t,Object(qe.jsx)("div",{className:"form__error",children:r})]})}function fc(e){var t=e.refSelector,n=e.filteredType,c=e.setOpenOptions,r=e.isHaveCheckedType,a=e.actionInput,s=e.isOpenOptions,i=e.excludeRef,o=e.tableType,l=e.handleOptionClick,u=e.title,d=e.placeholder;return Object(qe.jsxs)(Oc,{title:u,ref:t,children:[Object(qe.jsxs)(bc,{className:"form__item",children:[Object(qe.jsx)("input",{form:"card-form",className:Je()("input select__input",{"select__input--selected":r}),type:"text",placeholder:r?n.filter((function(e){return e.checked})).map((function(e){return" ".concat(e.name)})):d,autoComplete:"on",readOnly:!0,onClick:function(){return c(!0)}}),Object(qe.jsx)(Xe,{name:r?"select-delete":"arrow-select",className:"icon__select",onClick:a})]}),s&&Object(qe.jsx)("div",{className:"checkbox-wrapper",ref:i,children:null===o||void 0===o?void 0:o.map((function(e){return Object(qe.jsx)("div",{children:Object(qe.jsx)(In,{form:"card-form",name:"attributes",label:e.name,checked:e.checked,value:e.id,onChange:function(t){return l(t,e)}})},null===e||void 0===e?void 0:e.id)}))})]})}n(238);function mc(e){var t,n=e.setIsFilteredUserList,c=e.fieldForSort,r=Object(b.c)(),s=Object.values(rc),i=Object(a.useState)(""),o=Object(it.a)(i,2),l=o[0],u=o[1],d=Object(a.useState)(!1),j=Object(it.a)(d,2),m=j[0],O=j[1],h=Object(a.useState)(!1),x=Object(it.a)(h,2),_=x[0],g=x[1],N=Object(b.d)(jc).roles,k=Object(b.d)(ct),y=Object(a.useState)(Object(f.a)(s)),w=Object(it.a)(y,2),C=w[0],S=w[1],I=Object(a.useState)(null===(t=N.data)||void 0===t?void 0:t.map((function(e){return{id:e.id,name:e.name}}))),R=Object(it.a)(I,2),T=R[0],D=R[1],L=Ot(de,k),M=Object(a.useState)(!1),F=Object(it.a)(M,2),E=F[0],A=F[1],P=Object(a.useRef)(null),U=Object(a.useRef)(null),H=Object(a.useRef)(null),z=Object(a.useRef)(null);Nt({ref:P,cb:function(){return O(!1)},exclude:U}),Nt({ref:H,cb:function(){return g(!1)},exclude:z});var B=Object(a.useMemo)((function(){return C.some((function(e){return e.checked}))}),[C]),q=Object(a.useMemo)((function(){return null===T||void 0===T?void 0:T.some((function(e){return e.checked}))}),[T]),V=Object(a.useMemo)((function(){return B||q||l}),[B,q,l]);Object(a.useEffect)((function(){n(!!V)}),[V]);var W=function(e,t){var n=Object(f.a)(C),a=C.findIndex((function(e){return e.id===t.id}));if(a>-1&&(n[a].checked=e),L){var s=Object(f.a)(T),i=T.findIndex((function(e){return e.id===t.id}));i>-1&&(s[i].checked=e),D(Object(f.a)(s))}if(S(Object(f.a)(n)),c){var o={pageRequest:{size:300,index:0,params:{query:l,sortAsc:!0,sortBy:c,options:{userTypes:n.filter((function(e){return e.checked})).map((function(e){return e.id})),roleIds:(null===T||void 0===T?void 0:T.filter((function(e){return e.checked})).map((function(e){return e.id})))||[]}}}};r(L?ic(o):sc(o))}else{var u={pageRequest:{size:300,index:0,params:{query:l,sortAsc:!0,options:{userTypes:n.filter((function(e){return e.checked})).map((function(e){return e.id})),roleIds:(null===T||void 0===T?void 0:T.filter((function(e){return e.checked})).map((function(e){return e.id})))||[]}}}};r(L?ic(u):sc(u))}},Y=pn(function(){var e=Object(p.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c?(n={pageRequest:{size:300,index:0,params:{query:t,sortAsc:!0,sortBy:c,options:{userTypes:C.filter((function(e){return e.checked})).map((function(e){return e.id})),roleIds:(null===T||void 0===T?void 0:T.filter((function(e){return e.checked})).map((function(e){return e.id})))||[]}}}},r(L?ic(n):sc(n))):(a={pageRequest:{size:300,index:0,params:{query:t,sortAsc:!0,options:{userTypes:C.filter((function(e){return e.checked})).map((function(e){return e.id})),roleIds:(null===T||void 0===T?void 0:T.filter((function(e){return e.checked})).map((function(e){return e.id})))||[]}}}},r(L?ic(a):sc(a)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),500);return Object(qe.jsxs)("div",{className:"filters_wrapper",children:[Object(qe.jsxs)("div",{className:"filters_header",children:[Object(qe.jsx)("h1",{className:"user-filter_title",children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"}),Object(qe.jsxs)("div",{className:"filters__button--wrapper",children:[V&&Object(qe.jsx)("div",{className:"abort-filters__button",onClick:function(){u(""),Y(""),null===C||void 0===C||C.map((function(e){return W(!1,e)})),null===T||void 0===T||T.map((function(e){return W(!1,e)}))},children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u044b"}),Object(qe.jsxs)($e,{className:"filter".concat(V?"":"s","__button"),children:["\u0424\u0438\u043b\u044c\u0442\u0440\u044b ",V&&Object(qe.jsx)("div",{className:"mark"})]})]})]}),Object(qe.jsxs)("div",{className:"filter_content",children:[Object(qe.jsx)(Oc,{title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",children:Object(qe.jsx)(Tn,{children:Object(qe.jsxs)("div",{className:"form-search__wrapper",children:[Object(qe.jsx)("input",{className:"input  ".concat(l?"filter-search__input":"form-search__input"),type:"text",autoComplete:"on",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u0438\u043c\u044f",value:l,onChange:function(e){u(e.target.value),Y(e.target.value)},onFocus:function(){return A(!0)},onBlur:function(){return A(!1)}}),Object(qe.jsx)(Xe,{name:"search",className:"filter-search__icon-search".concat(l&&"--none"),size:24}),l&&Object(qe.jsx)(Yt,{className:"form-search__remove-text",icon:Object(qe.jsx)(Xe,{className:Je()("form-search__remove-icon",{"form-search__remove-icon--blue":E}),name:"close",size:14}),onClick:function(e){e.preventDefault(),u(""),Y("")}})]})})}),Object(qe.jsx)(fc,{refSelector:P,filteredType:C,setOpenOptions:O,isHaveCheckedType:B,actionInput:function(){O(!1);var e=Object(f.a)(C),t=null===e||void 0===e?void 0:e.map((function(e){return!0===e.checked?Object(Be.a)(Object(Be.a)({},e),{},{checked:!1}):e}));t.map((function(e){return W(!1,e)})),S(Object(f.a)(t))},isOpenOptions:m,excludeRef:U,tableType:C,handleOptionClick:W,title:"\u0422\u0438\u043f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",placeholder:"\u0412\u044b\u0431\u043e\u0440 \u0442\u0438\u043f\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),L&&Object(qe.jsx)(fc,{refSelector:H,filteredType:T,setOpenOptions:g,isHaveCheckedType:q,actionInput:function(){g(!1);var e=Object(f.a)(T),t=null===e||void 0===e?void 0:e.map((function(e){return!0===e.checked?Object(Be.a)(Object(Be.a)({},e),{},{checked:!1}):e}));t.map((function(e){return W(!1,e)})),D(Object(f.a)(t))},isOpenOptions:_,excludeRef:z,tableType:T,handleOptionClick:W,title:"\u0420\u043e\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",placeholder:"\u0412\u044b\u0431\u043e\u0440 \u0440\u043e\u043b\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})]})]})}n(239);function Oc(e){var t=e.title,n=e.children;return Object(qe.jsxs)("div",{className:"filter_wrapper",children:[Object(qe.jsx)("h1",{className:"filter_title",children:t}),n]})}var vc,pc=n(85),hc=function(e){return e.users},xc=function(e){return e.users.isFilterActive},_c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=Object(a.useState)({width:xt?window.innerWidth:e,height:xt?window.innerHeight:t}),c=Object(it.a)(n,2),r=c[0],s=c[1];return Object(a.useEffect)((function(){if(xt){var e=function(){s({width:window.innerWidth,height:window.innerHeight})};return ft(window,"resize",e),function(){mt(window,"resize",e)}}}),[]),r};function gc(e){var t=e.setIsEditMode,n=e.refDropDown,c=e.list,r=e.user,a=e.attribute,s=Object(b.c)();return Object(qe.jsx)("div",{onClick:function(){return t((function(e){return!e}))},className:"dropdown",ref:n,children:c.map((function(e){var t=e.id===r[a]?"current-dropdown-element":"";return Object(qe.jsx)("span",{className:"dropdown-element ".concat(t),onClick:function(){return function(e){var t={dto:{id:r.id}};"userType"===a&&(t={dto:Object(Be.a)(Object(Be.a)({},t.dto),{},{userType:e.id})},s(oc(t))),"equipmentType"===a&&(t={dto:Object(Be.a)(Object(Be.a)({},t.dto),{},{equipmentType:e.id})},s(lc(t))),"roleId"===a&&(t={dto:Object(Be.a)(Object(Be.a)({},t.dto),{},{roleId:e.id})},s(dc(t)))}(e)},children:e.name},e.name)}))})}function Nc(e){var t,n=e.user,c=e.attributeList,r=e.field,s=Object(a.useRef)(null),i=Object(a.useRef)(null),o=Object(a.useState)(!1),l=Object(it.a)(o,2),u=l[0],d=l[1],j=Object(b.d)((function(e){return e.users.isLoading})),f={cursor:j?"not-allowed":"pointer"};Nt({ref:s,cb:function(){return d(!1)},exclude:i});var m=null===c||void 0===c||null===(t=c.find((function(e){return e.id===n[r]})))||void 0===t?void 0:t.name;return u?Object(qe.jsxs)(qe.Fragment,{children:[Object(qe.jsxs)("div",{className:"current-options current-options-dropdown",ref:s,children:[m," ",Object(qe.jsx)(Xe,{className:"btn-dropdown__icon ",name:"arrow-dropdown",size:16})]}),Object(qe.jsx)(gc,{setIsEditMode:d,refDropDown:i,list:c,user:n,attribute:r})]}):Object(qe.jsx)("div",{onClick:function(){j||d((function(e){return!e}))},children:Object(qe.jsxs)("div",{style:f,className:"current-options",children:[m," ",Object(qe.jsx)(Xe,{className:"btn-dropdown__icon ",name:"arrow-dropdown",size:16})]})})}var kc=Object(m.c)({name:"users",initialState:{users:[]},reducers:{setUsers:function(e,t){e.users=t.payload},setFilterUsersActive:function(e,t){e.isFilterActive=t.payload},updateUserType:function(e,t){var n=e.users.findIndex((function(e){return e.id===t.payload.id}));n>-1&&(e.users[n].userType=t.payload.userType)},updateUserStatus:function(e,t){var n=e.users.findIndex((function(e){return e.id===t.payload.id}));n>-1&&(e.users[n].isInactive=t.payload.isInactive)},updateUserEquipment:function(e,t){var n=e.users.findIndex((function(e){return e.id===t.payload.id}));n>-1&&(e.users[n].equipmentType=t.payload.equipmentType)}},extraReducers:(vc={},Object(De.a)(vc,sc.pending,(function(e){e.isLoading=!0})),Object(De.a)(vc,sc.fulfilled,(function(e,t){e.users=t.payload,e.isLoading=!1})),Object(De.a)(vc,sc.rejected,(function(e){e.isLoading=!1})),Object(De.a)(vc,ic.pending,(function(e){e.isLoading=!0})),Object(De.a)(vc,ic.fulfilled,(function(e,t){e.users=t.payload,e.isLoading=!1})),Object(De.a)(vc,ic.rejected,(function(e){e.isLoading=!1})),Object(De.a)(vc,oc.pending,(function(e){e.isLoading=!0})),Object(De.a)(vc,oc.fulfilled,(function(e,t){var n=e.users.findIndex((function(e){return e.id===t.payload.id}));n>-1&&(e.users[n].userType=t.payload.userType),e.isLoading=!1})),Object(De.a)(vc,uc.pending,(function(e){e.isLoading=!0})),Object(De.a)(vc,uc.fulfilled,(function(e,t){var n=e.users.findIndex((function(e){return e.id===t.payload.id}));n>-1&&(e.users[n].isInactive=t.payload.isInactive),e.isLoading=!1})),Object(De.a)(vc,lc.pending,(function(e){e.isLoading=!0})),Object(De.a)(vc,lc.fulfilled,(function(e,t){var n=e.users.findIndex((function(e){return e.id===t.payload.id}));n>-1&&(e.users[n].equipmentType=t.payload.equipmentType),e.isLoading=!1})),Object(De.a)(vc,dc.pending,(function(e){e.isLoading=!0})),Object(De.a)(vc,dc.fulfilled,(function(e,t){var n=e.users.findIndex((function(e){return e.id===t.payload.id}));n>-1&&(e.users[n].roleId=t.payload.roleId),e.isLoading=!1})),vc)}),yc=kc.reducer,wc=kc.actions;n(241);function Cc(e){var t=e.user,n=Object(b.c)(),c=Object(b.d)((function(e){return e.users.isLoading})),r={cursor:c?"not-allowed":"pointer"},a=function(){c||function(){if(t.isInactive)n(wc.updateUserStatus(Object(Be.a)(Object(Be.a)({},t),{},{isInactive:!1})));else{var e={dto:{id:t.id,userType:t.userType,equipmentType:t.equipmentType,isInactive:!t.isInactive}};n(uc(e))}}()};return Object(qe.jsxs)(qe.Fragment,{children:[Object(qe.jsx)($e,{className:t.isInactive?"table-button-block":"table-button-active",onClick:a,style:r,children:t.isInactive?"\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(qe.jsx)(Xe,{name:t.isInactive?"lock-closed":"lock-opened",className:t.isInactive?"lock-closed-icon":"lock-opened-icon",size:36,onClick:a,style:r})]})}n(242);function Sc(e){var t=e.user,n=Object(a.useState)(!1),c=Object(it.a)(n,2),r=c[0],s=c[1];return Object(qe.jsxs)("div",{onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)},children:[null===t||void 0===t?void 0:t.firstName," ",null===t||void 0===t?void 0:t.lastName,r&&Object(qe.jsxs)("div",{className:"user-info__tooltip",children:[" ",t.email," "]})]})}var Ic=Object.values({own:{name:"\u041b\u0438\u0447\u043d\u043e\u0435",id:0},company:{name:"\u041a\u043e\u0440\u043f\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u043e\u0435",id:1}}),Rc=Object.values(rc);function Tc(e){var t=e.isFilteredUserList,n=e.fieldForSort,c=e.setFieldForSort,r=Object(b.d)(xc),s=Object(b.d)(hc).users,i=Object(b.d)(ct),o=Ot(de,i),l=Object(b.d)(jc).roles,u=Object(a.useMemo)((function(){return function(e,t){return e.map((function(e){return{col1:Object(qe.jsx)(Sc,{user:e}),col2:Object(qe.jsx)(Nc,{user:e,attributeList:Rc,field:"userType"}),col3:Object(qe.jsx)(Nc,{user:e,attributeList:Ic,field:"equipmentType"}),col4:Object(qe.jsx)(Nc,{user:e,attributeList:t,field:"roleId"}),col5:Object(qe.jsx)(Cc,{user:e})}}))}(s,l.data)}),[s]),d=Object(b.c)(),j=_c().width;Object(a.useEffect)((function(){if(!t||j>427){var e={pageRequest:{size:300,index:0,params:{query:"",sortAsc:!0,sortBy:n,options:{}}}};d(o?ic(e):sc(e))}}),[d,n,r]);var f=Object(a.useMemo)((function(){return[{Header:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a",accessor:"col1",disableFilters:!0,disableSortBy:!0},{Header:"\u0422\u0438\u043f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",accessor:"col2",disableSortBy:!0},{Header:"\u041e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435",accessor:"col3",disableSortBy:!1,canSort:!0},{Header:"\u0420\u043e\u043b\u044c",accessor:"col4",disableFilters:!0,disableSortBy:!0},{Header:"\u0421\u0442\u0430\u0442\u0443\u0441",accessor:"col5",disableFilters:!0,disableSortBy:!1,canSort:!0}]}),[]),m=["col4"];o&&(m=[""]);var O={sortBy:[{id:"col4",desc:!0},{id:"col5",desc:!0}],pageSize:5,pageIndex:0,hiddenColumns:m},v=Object(pc.useTable)({columns:f,data:u,initialState:O,disableSortRemove:!0,disableMultiRemove:!1,manualSortBy:!1},pc.useSortBy,pc.usePagination),p=v.getTableProps,h=v.getTableBodyProps,x=v.headerGroups,_=v.page,g=v.prepareRow,N=v.nextPage,k=v.previousPage,y=v.setPageSize,w=v.state,C=w.pageSize,S=w.pageIndex,I=Object(a.useRef)(null),R=Object(a.useRef)(null),T=Object(a.useState)(!1),D=Object(it.a)(T,2),L=D[0],M=D[1];Nt({ref:I,cb:function(){return M(!1)},exclude:R});var F=Object(a.useRef)(1),E=Object(a.useRef)(2);Object(a.useEffect)((function(){2===F.current&&c(1)}),[d,F.current]),Object(a.useEffect)((function(){2===E.current&&c(1)}),[d,E.current]);return Object(qe.jsxs)("div",{className:"user-table_wrapper",children:[Object(qe.jsxs)("table",Object(Be.a)(Object(Be.a)({},p()),{},{className:"table",children:[Object(qe.jsx)("thead",{className:"header-table_wrapper",children:x.map((function(e){return Object(qe.jsx)("tr",Object(Be.a)(Object(Be.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(qe.jsx)("th",Object(Be.a)(Object(Be.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{className:"header-table-item",children:Object(qe.jsxs)("div",{className:"header-table-text",onClick:function(){!function(e){"\u041e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435"===e.Header?(c(0),1===F.current?F.current=0:0===F.current?F.current=2:F.current=1):(c(1),1===E.current?E.current=0:0===E.current?E.current=2:E.current=1)}(e)},children:[e.render("Header"),!e.disableSortBy&&Object(qe.jsx)("span",{className:"table-sort",children:"\u041e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435"===e.Header?Object(qe.jsx)(qe.Fragment,{children:Object(qe.jsxs)(qe.Fragment,{children:[Object(qe.jsx)(Xe,{className:"btn-pagination__icon".concat(1===F.current||2===F.current?"--disactive":"--active"," icon--down"),name:"arrow-down-filter"}),Object(qe.jsx)(Xe,{className:"btn-pagination__icon".concat(1===F.current?"--active":"--disactive"," icon--up"),name:"arrow-up-filter"})]})}):"\u0421\u0442\u0430\u0442\u0443\u0441"===e.Header&&Object(qe.jsxs)(qe.Fragment,{children:[Object(qe.jsx)(Xe,{className:"btn-pagination__icon".concat(1===E.current||2===E.current?"--disactive":"--active"," icon--down"),name:"arrow-down-filter"}),Object(qe.jsx)(Xe,{className:"btn-pagination__icon".concat(1===E.current?"--active":"--disactive"," icon--up"),name:"arrow-up-filter"})]})})]})}))}))}))}))}),Object(qe.jsx)("tbody",Object(Be.a)(Object(Be.a)({},h()),{},{className:"content-table_wrapper",children:_.map((function(e){return g(e),Object(qe.jsx)("tr",Object(Be.a)(Object(Be.a)({},e.getRowProps()),{},{className:"content-table-row",children:e.cells.map((function(e){return Object(qe.jsx)("td",Object(Be.a)(Object(Be.a)({},e.getCellProps()),{},{className:"content-table-item",children:e.render("Cell")}))}))}))}))}))]})),Object(qe.jsxs)("div",{className:"pagination",children:[Object(qe.jsxs)("span",{ref:I,children:[Object(qe.jsxs)("div",{ref:R,className:"pagination__page",onClick:function(){return M(!0)},children:["\u0421\u0442\u0440\u043e\u043a\u0438 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435: ",C," ",Object(qe.jsx)(Xe,{className:"btn-dropdown__icon",name:"arrow-dropdown",size:16})]}),L&&Object(qe.jsx)("div",{onClick:function(){return M(!1)},className:"dropdown",children:[5,10,25].map((function(e,t){return Object(qe.jsx)("span",{className:"".concat(e===C&&"current-dropdown-element"," dropdown-element"),onClick:function(){y(e),M(!1)},children:e},t)}))})]}),Object(qe.jsx)("span",{className:"pagination__info",children:function(){var e=(S+1)*C,t=S*C+1,n=s.length>e?e:s.length,c=s.length;return"".concat(t," - ").concat(n," \u0438\u0437 ").concat(c)}()}),Object(qe.jsxs)("div",{className:"btn-pagination__wrapper",children:[Object(qe.jsx)("span",{onClick:k,children:Object(qe.jsx)(Xe,{className:"btn-pagination__icon",name:"arrow-prev"})}),Object(qe.jsx)("span",{onClick:N,children:Object(qe.jsx)(Xe,{className:"btn-pagination__icon",name:"arrow-next"})})]})]})]})}var Dc=n(25);n(243);function Lc(e){var t,n,c,r,s,i,o,l,u,d,j,m,O,v,p,h,x,_,g,N,k,y=e.card,w=e.monitorTypeId,C=e.activeTagMonitor,S=e.setActiveTagMonitor,I=e.handleClickTag,R=e.tags,T=e.isHaveMonitor,D=e.setIsHaveMonitor,L=e.isRequired,M=e.setIsCodeRequestLoading,F=e.monitorTags,E=e.setMonitorTags,A=e.monitorsInfo,P=e.setMonitorsInfo,U=e.isCheckMonitorCode,H=Object(Dc.e)(),z=H.register,B=H.handleSubmit,q=H.setValue,V=Object(a.useState)([]),W=Object(it.a)(V,2),Y=W[0],J=W[1],G=Object(a.useRef)(null),$=Object(b.d)(ct),K=Ot(me,$);Object(a.useEffect)((function(){var e,t=null===y||void 0===y||null===(e=y.items)||void 0===e?void 0:e.filter((function(e){return e.typeId===w}));null===t||void 0===t||t.forEach((function(e,t){(null===e||void 0===e?void 0:e.inventoryCode)?wt.checkMonitor(e.inventoryCode).then((function(n){P((function(c){var r,a,s,i,o,l;return[].concat(Object(f.a)(c),[{id:e.id,name:t+1,inventoryCode:e.inventoryCode,diagonal:null===(r=n.data)||void 0===r||null===(a=r.additional_fields)||void 0===a?void 0:a.diagonal,model:null===(s=n.data)||void 0===s||null===(i=s.additional_fields)||void 0===i?void 0:i.model,manufacturer:null===(o=n.data)||void 0===o||null===(l=o.additional_fields)||void 0===l?void 0:l.manufacturer}])})),E((function(c){var r,a,s,i,o,l;return[].concat(Object(f.a)(c),[{name:t+1,inventoryCode:e.inventoryCode,id:e.id,diagonal:null===(r=n.data)||void 0===r||null===(a=r.additional_fields)||void 0===a?void 0:a.diagonal,model:null===(s=n.data)||void 0===s||null===(i=s.additional_fields)||void 0===i?void 0:i.model,manufacturer:null===(o=n.data)||void 0===o||null===(l=o.additional_fields)||void 0===l?void 0:l.manufacturer}])}))})):(P((function(n){return[].concat(Object(f.a)(n),[{id:e.id,name:t+1,inventoryCode:""}])})),E((function(n){return[].concat(Object(f.a)(n),[{name:t+1,inventoryCode:"",id:e.id}])})))})),(null===t||void 0===t?void 0:t.length)||E([{name:1,inventoryCode:""}])}),[null===y||void 0===y?void 0:y.id,null===y||void 0===y||null===(t=y.items)||void 0===t?void 0:t.length]),Object(a.useEffect)((function(){(null===F||void 0===F?void 0:F.length)&&F.forEach((function(e,t){q("".concat(t+1),e.inventoryCode)}))}),[F]);var Q=Object(a.useMemo)((function(){return(null===F||void 0===F?void 0:F.sort((function(e,t){return e.name-t.name})))||[]}),[F]),X=Object(a.useMemo)((function(){return(null===A||void 0===A?void 0:A.sort((function(e,t){return e.name-t.name})))||[]}),[A]),Z=Object(a.useMemo)((function(){return(null===F||void 0===F?void 0:F.find((function(e){return e.name===C.name})))||[]}),[C.name,F]);return Object(qe.jsxs)("div",{className:"active-content__wrapper",children:[Object(qe.jsx)("div",{className:"hr"}),Object(qe.jsx)("p",{className:"title_content title_content_form",children:"\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438"}),T&&Object(qe.jsxs)("div",{className:"tag",children:[null===Q||void 0===Q?void 0:Q.map((function(e){return Object(qe.jsxs)("div",{onClick:function(){S({name:null===e||void 0===e?void 0:e.name,inventoryCode:null===e||void 0===e?void 0:e.inventoryCode})},className:"tag-monitor__wrapper ".concat((null===C||void 0===C?void 0:C.name)===(null===e||void 0===e?void 0:e.name)&&"tag-monitor__wrapper--active"),children:["\u041c\u043e\u043d\u0438\u0442\u043e\u0440 \u2022 ",e.name,Object(qe.jsx)(Xe,{name:"delete-tag",className:"delete-tag_icon",size:16,onClick:function(t){t.stopPropagation(),function(e){var t,n,c=Object(f.a)(F),r=null===c||void 0===c?void 0:c.findIndex((function(t){return t.name===e}));r>-1&&c.splice(r,1);var a=c.map((function(e,t){return Object(Be.a)(Object(Be.a)({},e),{},{name:t+1})}));E(a),S({name:null===(t=F[0])||void 0===t?void 0:t.name,inventoryCode:null===(n=F[0])||void 0===n?void 0:n.inventoryCode}),(null===F||void 0===F?void 0:F.length)<=1&&(I(R.filter((function(e){return"\u041c\u043e\u043d\u0438\u0442\u043e\u0440"===e.name}))[0]),D(!1))}(e.name)}})]})})),K&&3!==(null===F||void 0===F?void 0:F.length)&&Object(qe.jsx)(Xe,{name:"add-monitor",className:"icon__add-monitor",onClick:function(){return E((function(e){return[].concat(Object(f.a)(e),[{name:(null===F||void 0===F?void 0:F.length)+1,inventoryCode:""}])}))}})]}),Object(qe.jsxs)("form",{onSubmit:B((function(e){if(M(!0),e[C.name])wt.checkMonitor(e[C.name]).then((function(t){J([t.data]);var n=Object(f.a)(A);if(n.length){var c,r=null===n||void 0===n?void 0:n.findIndex((function(e){return e.name===C.name}));r>=0&&(n[r].inventoryCode=null===(c=t.data)||void 0===c?void 0:c.code),P(n)}"ok"===t.status?G.current="ok":"error"===t.status&&(G.current="404"),function(e,t,n,c){var r=Object(f.a)(F),a=null===r||void 0===r?void 0:r.findIndex((function(t){return t.name===e}));a>-1&&(r[a]="ok"===n?Object(Be.a)({verify:"ok",name:e,inventoryCode:c,typeId:t},A[a]):{verify:"404",name:e,inventoryCode:c,typeId:t}),E(r)}(C.name,C.typeId,G.current,e[C.name])})).finally((function(){return M(!1)}));else{var t=Object(f.a)(F);t[C.name-1]={name:C.name,inventoryCode:"",typeId:C.typeId},E(t)}})),children:[K&&Object(qe.jsxs)("div",{className:"attribute-container",children:[Object(qe.jsx)(bc,{className:"form__item",label:"\u0418\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0430-".concat(C.name),name:null===(n=C.name)||void 0===n?void 0:n.toString(),id:C.name,register:z,type:"text",children:Object(qe.jsx)("input",{id:null===(c=C.name)||void 0===c?void 0:c.toString(),className:Je()("input select__input",{"input-focus":L},"".concat("ok"===Z.verify?"successful":("404"===Z.verify||""===(null===(r=F[Z.name-1])||void 0===r?void 0:r.inventoryCode)||1===U&&""===(null===Z||void 0===Z?void 0:Z.inventoryCode))&&"error","-status")),type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440",onChange:function(e){return function(e,t){var n=Object(f.a)(F),c=null===F||void 0===F?void 0:F.findIndex((function(e){return e.name===C.name}));t>-1&&(n[c].inventoryCode=e.target.value),E(n)}(e,Z)},defaultValue:null===Z||void 0===Z?void 0:Z.inventoryCode})}),Object(qe.jsx)($e,{className:"form__button check__button",type:"submit",children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"})]}),Object(qe.jsxs)("p",{className:Je()("".concat("ok"===Z.verify?"successful":("404"===Z.verify||""===(null===(s=F[Z.name-1])||void 0===s?void 0:s.inventoryCode)||1===U)&&"error","-status-title"),"status-title"),style:{paddingBottom:"20px"},children:["ok"===Z.verify?"\u0418\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d":"404"===Z.verify&&"\u0418\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u043d\u043e\u0433\u043e \u043d\u043e\u043c\u0435\u0440\u0430 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442",!(null===(i=F[Z.name-1])||void 0===i?void 0:i.inventoryCode)&&1===U&&"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0438 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0435\u0433\u043e, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c.",""===(null===(o=F[Z.name-1])||void 0===o?void 0:o.inventoryCode)&&!(null===(l=F[Z.name-1])||void 0===l?void 0:l.inventoryCode)&&1!==U&&"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440."]}),((null===(u=X[Z.name-1])||void 0===u?void 0:u.diagonal)||"ok"===Z.verify)&&""!==(null===(d=F[Z.name-1])||void 0===d?void 0:d.inventoryCode)&&"404"!==Z.verify&&Object(qe.jsxs)(qe.Fragment,{children:[Object(qe.jsxs)("label",{className:"form-item__label",children:[" \u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0430-",Z.name]}),Object(qe.jsx)("div",{className:"monitor-info",children:Object(qe.jsxs)("p",{children:[(null===(j=X[Z.name-1])||void 0===j?void 0:j.diagonal)?X[Z.name-1].diagonal:null===(m=Y[0])||void 0===m||null===(O=m.additional_fields)||void 0===O?void 0:O.diagonal," ",(null===(v=X[Z.name-1])||void 0===v?void 0:v.manufacturer)?null===(p=X[Z.name-1])||void 0===p?void 0:p.manufacturer:!!(null===Z||void 0===Z?void 0:Z.verify)&&(null===(h=Y[0])||void 0===h||null===(x=h.additional_fields)||void 0===x?void 0:x.manufacturer)," ",(null===(_=X[Z.name-1])||void 0===_?void 0:_.model)?null===(g=X[Z.name-1])||void 0===g?void 0:g.model:null===(N=Y[0])||void 0===N||null===(k=N.additional_fields)||void 0===k?void 0:k.model]})})]})]},Z.name)]})}var Mc=n(37),Fc=Mc.a().shape({name:Mc.b().required(Object(qe.jsxs)("div",{className:"form-error_wrapper",children:[Object(qe.jsx)(Xe,{name:"form-error",className:"form-error-icon",size:20})," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"]})).trim()}),Ec=n(55);n(342),n(343);function Ac(e){var t,n,c,r=e.onClose,s=e.location,i=e.card,o=Object(a.useState)(!1),l=Object(it.a)(o,2),u=l[0],d=l[1],j=Object(a.useState)(!1),m=Object(it.a)(j,2),O=m[0],h=m[1],x=Object(a.useState)({}),_=Object(it.a)(x,2),g=_[0],N=_[1],k=Object(a.useState)([]),y=Object(it.a)(k,2),w=y[0],C=y[1],S=Object(a.useState)([]),I=Object(it.a)(S,2),R=I[0],T=I[1],D=Object(a.useState)(!1),L=Object(it.a)(D,2),M=L[0],F=L[1],E=Object(b.d)(lt),A=Object(a.useState)({name:1,inventoryCode:""}),P=Object(it.a)(A,2),U=P[0],H=P[1],z="178ccf46-8263-436e-9f3d-001b121dceda",B=Object(Dc.e)({defaultValues:{options:E.map((function(e){return Object(Be.a)(Object(Be.a)({},e),{},{checked:!1,myId:e.id})})),tags:[]},resolver:Object(Ec.a)(Fc)}),q=B.register,V=B.handleSubmit,W=B.control,Y=B.formState.errors,J=B.setValue,G=Object(Dc.d)({control:W,name:"options"}),$=G.fields,K=G.update,Q=Object(Dc.d)({control:W,name:"tags"}),X=Q.fields,Z=Q.append,ee=Q.remove;Object(a.useEffect)((function(){var e;if(null===i||void 0===i||null===(e=i.items)||void 0===e?void 0:e.length){var t=Object(f.a)($);null===i||void 0===i||i.items.forEach((function(e){var n=t.findIndex((function(t){return t.myId===e.typeId}));n>-1&&(t[n].checked=!0)})),J("options",t),Z($.filter((function(e){return!0===e.checked&&!X.some((function(t){return t.myId===e.myId}))})).map((function(e){return{myId:e.myId,name:e.name,typeId:e.myId}})))}}),[null===i||void 0===i?void 0:i.items,null===i||void 0===i||null===(t=i.items)||void 0===t?void 0:t.length]),Object(a.useEffect)((function(){(null===X||void 0===X?void 0:X.some((function(e){return e.typeId===z})))?F("\u041c\u043e\u043d\u0438\u0442\u043e\u0440"===g.name):F(!1)}),[g.name,X,X.length]);var te=Object(a.useState)(!1),ne=Object(it.a)(te,2),ce=ne[0],re=ne[1],ae=Object(a.useState)(!1),se=Object(it.a)(ae,2),ie=se[0],oe=se[1],le=Object(a.useRef)(null),ue=Object(a.useRef)(0),de=[1,2,3];Object(a.useEffect)((function(){0===X.length?d(!1):d(!0)}),[d,X]),Nt({ref:le,cb:function(){return re(!1)}});var je=function(e){ee(X.findIndex((function(t){return t.myId===e.myId})));var t=$.findIndex((function(t){return t.myId===e.myId}));K(t,Object(Be.a)(Object(Be.a)({},$[t]),{},{checked:!1})),"\u041c\u043e\u043d\u0438\u0442\u043e\u0440"===e.name&&T([])},be=Object(b.c)(),fe=function(){var e=Object(p.a)(v.a.mark((function e(t){var n,c,a,o,l,u,d;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ie){e.next=2;break}return e.abrupt("return");case 2:if(t){e.next=5;break}return oe(!1),e.abrupt("return");case 5:if(R.every((function(e){return""!==e.inventoryCode}))){e.next=9;break}return ue.current=1,oe(!1),e.abrupt("return");case 9:return ue.current=2,oe(!0),c={dto:Object(Be.a)(Object(Be.a)({},t),{},{parentLocationId:s.id})},i&&(c.dto.id=i.id),null===(a=null===i||void 0===i||null===(n=i.items)||void 0===n?void 0:n.filter((function(e){return!X.some((function(t){return t.typeId===e.typeId}))})).concat(null===w||void 0===w?void 0:w.filter((function(e){return!R.some((function(t){return t.inventoryCode===e.inventoryCode}))&&(null===i||void 0===i?void 0:i.items.some((function(t){return t.id===e.id})))}))))||void 0===a||a.forEach((function(e){var t={ids:[e.id]};be(Mt(t))})),e.prev=15,be(Ct(kt(s.id))),e.next=19,be(It(c)).unwrap();case 19:o=e.sent,l=i||o,u=X.filter((function(e){var t;return!(null===(t=l.items)||void 0===t?void 0:t.some((function(t){return e.typeId===t.typeId})))&&e.typeId!==z})),d=R.concat(u),Promise.all(d.map(function(){var e=Object(p.a)(v.a.mark((function e(t){var n,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("\u041c\u043e\u043d\u0438\u0442\u043e\u0440"!==t.name&&!de.includes(t.name)){e.next=10;break}return n={dto:[{typeId:z,locationId:o.id}]},t.inventoryCode&&(n={dto:[Object(Be.a)(Object(Be.a)({},n.dto[0]),{},{inventoryCode:t.inventoryCode})]}),t.id&&(n={dto:[Object(Be.a)(Object(Be.a)({},n.dto[0]),{},{id:t.id})]}),e.next=6,be(Dt(n));case 6:return e.next=8,be(Ct(kt(s.id)));case 8:e.next=15;break;case 10:return c={dto:[{typeId:t.typeId,locationId:o.id}]},e.next=13,be(Dt(c));case 13:return e.next=15,be(Ct(kt(s.id)));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),zn({title:"\u0420\u0430\u0431\u043e\u0447\u0435\u0435 \u043c\u0435\u0441\u0442\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u043e",description:"\u0420\u0430\u0431\u043e\u0447\u0435\u0435 \u043c\u0435\u0441\u0442\u043e \u041c".concat(o.name," \u0432 \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u0435  ").concat(s.name," \u0441\u043e\u0437\u0434\u0430\u043d\u043e."),iconName:"success",type:"success"}),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(15),zn({title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430",description:"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430",iconName:"error",type:"error"});case 30:return e.prev=30,oe(!1),r(),e.finish(30);case 34:case"end":return e.stop()}}),e,null,[[15,27,30,34]])})));return function(t){return e.apply(this,arguments)}}(),me=Object(a.useRef)();return Object(qe.jsxs)("div",{className:"modal__wrapper",children:[Object(qe.jsxs)("form",{onSubmit:V(fe),id:"card-form",ref:me,children:[Object(qe.jsx)("label",{className:"form_input--label",children:"\u041c"}),Object(qe.jsx)(bc,{className:"form_place_input",name:"name",register:q,error:null===Y||void 0===Y||null===(n=Y.name)||void 0===n?void 0:n.message,children:Object(qe.jsx)("input",{form:"card-form",id:"name",className:"place_input".concat((null===Y||void 0===Y||null===(c=Y.name)||void 0===c?void 0:c.message)?"-error":""),type:"text",autoComplete:"on",defaultValue:i&&i.name,disabled:ie})}),Object(qe.jsx)("p",{className:"title_content",children:"\u0410\u0442\u0440\u0438\u0431\u0443\u0442\u044b \u0440\u0430\u0431\u043e\u0447\u0435\u0433\u043e \u043c\u0435\u0441\u0442\u0430"}),Object(qe.jsxs)(bc,{className:"form__item",label:"\u0412\u044b\u0431\u043e\u0440 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u043e\u0432 \u0440\u0430\u0431\u043e\u0447\u0435\u0433\u043e \u043c\u0435\u0441\u0442\u0430",name:"attributes",children:[Object(qe.jsx)("input",{disabled:ie,form:"card-form",className:Je()("input select__input",{"input-focus":u}),type:"text",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0430\u0442\u0440\u0438\u0431\u0443\u0442",autoComplete:"on",readOnly:!0,onClick:function(){return re(!0)}}),Object(qe.jsx)(Xe,{name:"arrow-select",className:"icon__select",onClick:function(){return re(!0)},disabled:ie})]}),ce&&Object(qe.jsx)("div",{className:"checkbox-wrapper",ref:le,disabled:ie,children:$.map((function(e){return Object(qe.jsx)("div",{children:Object(qe.jsx)(In,{form:"card-form",name:"attributes",label:e.name,checked:e.checked,value:e.myId,onChange:function(t){return function(e,t){e?(Z({myId:t.myId,name:t.name,typeId:t.myId}),"\u041c\u043e\u043d\u0438\u0442\u043e\u0440"===g.name&&F(!0),K($.findIndex((function(e){return e.myId===t.myId})),Object(Be.a)(Object(Be.a)({},t),{},{checked:!0}))):(t.myId===z&&T([]),ee(X.findIndex((function(e){return e.myId===t.myId}))),K($.findIndex((function(e){return e.myId===t.myId})),Object(Be.a)(Object(Be.a)({},t),{},{checked:!1})))}(t,e)}})},null===e||void 0===e?void 0:e.id)}))}),Object(qe.jsx)("div",{className:"tags-container",children:X.map((function(e,t){return Object(qe.jsx)(cc,{item:e,deleteTag:je,ref:q,setActiveTag:N,activeTag:g,i:t,setActiveTagMonitor:H,tagsMonitor:R,setIsHaveMonitor:F,isHaveMonitor:M,disabled:ie},e.typeId)}))})]},1),M&&g.typeId===z&&Object(qe.jsx)(qe.Fragment,{children:Object(qe.jsx)(Lc,{card:i,setIsCodeRequestLoading:h,isRequired:u,monitorTypeId:z,setActiveTagMonitor:H,activeTagMonitor:U,handleClickTag:je,tags:X,setIsHaveMonitor:F,isHaveMonitor:M,monitorTags:R,setMonitorTags:T,monitorsInfo:w,setMonitorsInfo:C,disabled:ie,isCheckMonitorCode:ue.current})}),Object(qe.jsx)("div",{className:"hr"}),Object(qe.jsxs)("div",{className:Je()("control__buttons",{"active-control__buttons":M}),children:[Object(qe.jsx)($e,{onClick:r,className:"form__button form-cancel__button",disable:ie||O,form:"card-form",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(qe.jsx)($e,{className:"form__button form-edit-card__button",type:"submit",disable:ie||O,form:"card-form",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})}n(344);var Pc=function(e){var t=e.monitorInfo;return Object(qe.jsxs)("div",{className:"tooltip_content",children:[Object(qe.jsxs)("p",{children:["\u041c\u043e\u043d\u0438\u0442\u043e\u0440 ",t.additional_fields.manufacturer," ",t.additional_fields.model]}),Object(qe.jsx)("div",{className:"hr"}),Object(qe.jsxs)("p",{children:[" ",Object(qe.jsx)("span",{style:{color:"#CFD2D3"},children:"\u042d\u043a\u0440\u0430\u043d  "})," ",t.additional_fields.diagonal," "]})]})},Uc=s.a.forwardRef((function(e,t){var n=e.text,c=e.iconName,r=e.activeIcon,s=e.onClick,i=e.clearDate,o=e.value,l=e.isError,u=e.isMobile,d=e.isTouch,j=e.setIsTouch,b=e.isReservationPage,f=Object(a.useRef)(null),m=null===f.current;return Object(a.useEffect)((function(){if(o.includes("-")){var e=o.indexOf("-");f.current=o.substring(0,e)}}),[o]),Object(qe.jsx)("div",{className:"calendar__time",onClick:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),c=1;c<t;c++)n[c-1]=arguments[c];return function(){var t=n[0];e(),t&&t((function(e){return!e}))}}(s,j),ref:t,children:Object(qe.jsx)("div",{className:Je()("calendar__time-group",{"time__container--active":o},{"time__container--empty":l&&!o},{"time__container--mobile":u},{"time__container--mobile-touched":d},{"time__container--searched":b&&o}),children:o?Object(qe.jsxs)(qe.Fragment,{children:[Object(qe.jsx)("p",{className:"calendar__text",children:m?o:f.current}),!b&&Object(qe.jsx)(Xe,{className:"reservation__data-icon",name:r,fill:!0,onClick:i})]}):Object(qe.jsxs)(qe.Fragment,{children:[Object(qe.jsx)("p",{className:"calendar__text",children:n}),Object(qe.jsx)(Xe,{className:"reservation__data-icon",name:c,fill:!0})]})})})})),Hc=Uc;n(345);function zc(e){var t=e.title,n=e.deleteCount,c=e.onClick,r=e.isActive;return Object(qe.jsx)("div",{className:Je()("delete-modal",{"delete-modal--active":r}),children:Object(qe.jsxs)("div",{className:"delete-modal__container",children:[Object(qe.jsxs)("div",{className:"delete-modal__places",children:[Object(qe.jsx)("span",{className:"delete-modal__title",children:t}),Object(qe.jsx)("span",{className:"delete-modal__count",children:n})]}),Object(qe.jsx)($e,{className:" form__button form-edit-card__button",type:"submit",onClick:c,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0431\u0440\u043e\u043d\u044c"})]})})}n(346);function Bc(e){var t=e.children,n=Object(b.c)();return Object(qe.jsx)("div",{className:"header header--primary",children:Object(qe.jsxs)("div",{className:"cancel",children:[Object(qe.jsx)(Xe,{className:"btn-round__icon",name:"arrow-back",size:32,onClick:function(){n(wr(!1)),n(wc.setFilterUsersActive(!1))}}),Object(qe.jsx)("p",{className:"cancel__group--title",children:t})]})})}n(347);function qc(e){var t=e.schedule,n=e.isMySchedule,c=e.isFullDayReserved,r=null!==t.user.pictureUrl,a=t.user.pictureUrl,s=t.user.firstName[0];return Object(qe.jsx)(qe.Fragment,{children:r?Object(qe.jsx)("img",{className:Je()("user__ava schedule-month__ava",{"user__ava__full-reserved":c},{"user-bar__avatar--inactive":1===t.type}),src:a,alt:"",loading:"lazy"}):Object(qe.jsx)("p",{className:Je()("user-bar__avatar",{"user-bar__avatar--pers":n&&0===t.type},{"user-bar__avatar--foreign":!n&&0===t.type},{"user-bar__avatar--inactive":1===t.type}),children:s})})}var Vc=function(e){return Object(b.d)(nt)?Object(qe.jsx)(tt.a,{to:I}):Object(qe.jsx)(tt.b,Object(Be.a)({},e))};n(348);function Wc(e){var t=e.title,n=void 0===t?"\u0417\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u043c\u0435\u0441\u0442 \u043d\u0430 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u043d\u0435\u0442":t,c=e.subtitle;return Object(qe.jsxs)(qe.Fragment,{children:[Object(qe.jsx)("div",{className:"main-title rooms__title",children:n}),c&&Object(qe.jsx)("div",{className:"subtitle rooms__subtitle",children:c})]})}var Yc=n(101);function Jc(e,t){var n;return null===(n=e.find((function(e){return e.name===t})))||void 0===n?void 0:n.id}function Gc(e){var t=e.date,n=e.setIsOpen,c=e.setDate,r=e.placeholder,a=e.isOpen,s=e.text;return Object(qe.jsxs)("div",{className:"box__element",children:[Object(qe.jsx)("div",{className:"filter-box__name",children:s}),Object(qe.jsx)("div",{className:"filter-box__period period",children:Object(qe.jsxs)("div",{className:Je()("filter filter-box__filter",{"filter--active":""!==t}),onClick:function(){return n(!a)},children:[Object(qe.jsxs)("div",{className:"filter__text",children:[" ",""===t?r:Object(dt.default)(new Date(t),"dd.MM.yyyy")]}),""===t?Object(qe.jsx)(Xe,{className:"filter__arrow",name:"range-arrow-down",size:8}):Object(qe.jsx)(Xe,{className:"filter__close",name:"time-close",size:16,onClick:function(){return c("")}})]})})]})}var $c=function(e){return e.userProfile.profile},Kc=n(393);n(349);function Qc(e){var t=e.title,n=e.onClose,c=e.cardId,r=e.isInactive,s=e.card,i=Object(a.useState)(""),o=Object(it.a)(i,2),l=o[0],u=o[1],d=Object(a.useState)(""),j=Object(it.a)(d,2),f=j[0],m=j[1],O=Object(a.useState)(null),h=Object(it.a)(O,2),x=h[0],_=h[1],g=Object(a.useState)(null),N=Object(it.a)(g,2),k=N[0],y=N[1],w=Object(a.useState)(!1),C=Object(it.a)(w,2),S=C[0],I=C[1],R=Object(a.useState)(!1),T=Object(it.a)(R,2),D=T[0],L=T[1],M=Object(b.d)((function(e){return{profile:$c(e)}})).profile,F=Object(b.c)(),E=Object(a.useRef)(),A=function(e){return mr.setAllowedTime(e)},P=Object(a.useMemo)((function(){return e=x,mr.setScheduledTime(e);var e}),[x]),U=Object(a.useRef)(A(6)),H=Object(a.useRef)(A(23));Nt({ref:E,cb:function(){return I(!1)}});var z=Object(b.d)((function(e){return{locations:Ee(e)}})).locations,B=Object(tt.i)().id,q=Object(b.d)((function(e){return{selectedDate:Xt(e)}})).selectedDate,V=Jc(z,B),W=function(){var e=Object(p.a)(v.a.mark((function e(){var t,a,i,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=4;break}if(l&&f&&x&&k){e.next=4;break}return L(!0),e.abrupt("return");case 4:if(!r){e.next=12;break}return t={ids:s.map((function(e){return e.id}))},e.next=8,F(xr(t));case 8:return e.next=10,F(Ct(kt(V,Object(kn.a)(Object(Kc.a)(q,{hours:0,minutes:0})))));case 10:return n(),e.abrupt("return");case 12:if(a={from:l,to:f,fromHours:x,toHours:k,locationId:c,userId:null===M||void 0===M?void 0:M.id},L(!1),i=mr.prepareSchedule(a),o={schedules:i.map((function(e){return{from:e.from,to:e.to,locationId:c}}))},!mr.checkScheduleData(x,k)){e.next=21;break}return e.next=19,F(hr(o));case 19:return e.next=21,F(Ct(kt(V,Object(kn.a)(Object(Kc.a)(q,{hours:0,minutes:0})))));case 21:n();case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=Object(b.d)(Xt);return Object(qe.jsxs)("div",{className:"block-modal",children:[t,!r&&Object(qe.jsxs)("div",{className:"block-modal__wrapper box",children:[Object(qe.jsxs)("div",{className:"box__content",children:[Object(qe.jsx)(Gc,{text:"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430",date:l,setDate:u,setIsOpen:I,isOpen:S,placeholder:"\u041e\u0442"}),S&&Object(qe.jsxs)("div",{ref:E,className:"period-date",children:[Object(qe.jsx)(Mn.a,{selected:l||Y,onChange:function(e,t){u(e),m(""),t.preventDefault()},dateFormatCalendar:"LLLL",showMonthYearPicker:!0,minDate:Object(Yc.default)(new Date,29),showYearDropdown:!0,inline:!0}),Object(qe.jsx)("div",{className:"period-date__month",children:Object(qe.jsx)(Mn.a,{selected:l||"",onChange:function(e){var t=Object(it.a)(e,2),n=t[0],c=t[1];u(n),m(""),c&&(I(!S),m(c))},startDate:l,endDate:f,showYearDropdown:!0,selectsRange:!0,dateFormatCalendar:"LLLL",shouldCloseOnSelect:!1,inline:!0,minDate:new Date})})]}),Object(qe.jsx)(Xe,{className:"filter-box__period-icon",name:"arrow-right"}),Object(qe.jsx)(Gc,{text:"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f",date:f,setDate:m,setIsOpen:I,isOpen:S,placeholder:"\u0414\u043e"})]}),Object(qe.jsxs)("div",{className:"box__content",children:[Object(qe.jsxs)("div",{className:"box__element",children:[Object(qe.jsx)("div",{className:"filter-box__name",children:"\u0412\u0440\u0435\u043c\u044f \u043d\u0430\u0447\u0430\u043b\u0430"}),Object(qe.jsx)("div",{className:"filter-box__period period time",children:Object(qe.jsx)(Mn.a,{selected:x,onChange:function(e){return _(e)},showTimeSelect:!0,showTimeSelectOnly:!0,minTime:U.current,maxTime:H.current,timeIntervals:60,locale:"ru",timeCaption:"\u0412\u0440\u0435\u043c\u044f",dateFormat:"H:mm",customInput:Object(qe.jsx)(Hc,{text:"\u0412\u0440\u0435\u043c\u044f \u043e\u0442",iconName:"time-arrow-down"})})})]}),Object(qe.jsx)(Xe,{className:"filter-box__period-icon",name:"arrow-right"}),Object(qe.jsxs)("div",{className:"box__element",children:[Object(qe.jsx)("div",{className:"filter-box__name",children:"\u0412\u0440\u0435\u043c\u044f \u043d\u0430\u0447\u0430\u043b\u0430"}),Object(qe.jsx)("div",{className:"filter-box__period period time",children:Object(qe.jsx)(Mn.a,{selected:k,onChange:function(e){return y(e)},showTimeSelect:!0,showTimeSelectOnly:!0,minTime:P||U.current,maxTime:H.current,timeIntervals:60,locale:"ru",timeCaption:"\u0412\u0440\u0435\u043c\u044f",dateFormat:"H:mm",customInput:Object(qe.jsx)(Hc,{text:"\u0412\u0440\u0435\u043c\u044f \u0434\u043e",iconName:"time-arrow-down"})})})]})]})]}),D&&Object(qe.jsx)("p",{className:"error-status-title status-title",children:" \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0432\u0441\u0435 \u043f\u043e\u043b\u044f "}),Object(qe.jsxs)("div",{className:"control__buttons--block",children:[Object(qe.jsx)($e,{className:"form__button form-cancel__button--block",onClick:n,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(qe.jsx)($e,{className:Je()("form__button form-edit-card__button--block",{"card__button--inactive":!r},{"card__button--active":r}),type:"submit",onClick:W,children:r?"\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]})}function Xc(e,t,n){zn({title:e,description:t,iconName:"error",type:"error",toastPosition:n})}function Zc(e,t,n){zn({title:e,description:t,iconName:"success",type:"success",toastPosition:n})}var er,tr,nr,cr,rr,ar=n(394),sr=n(395),ir=n(97),or=n(78),lr=n(396),ur=n(54),dr=n(224),jr=n(227),br=n(205),fr=n(62),mr={makeReservation:function(e,t){return Object(p.a)(v.a.mark((function n(){return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.post(t?V:q,{schedules:e});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},makeBlock:function(e){return Object(p.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.post(oe,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},removeBlock:function(e){return Object(p.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.delete(le,{data:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},prepareSchedule:function(e){var t=e.from,n=e.to,c=e.fromHours,r=e.toHours,a=e.roomId,s=e.scheduleId,i=e.userId;try{return Object(ar.a)({start:t,end:n}).map((function(e){return{id:s,from:Object(Fn.a)(e,{hours:c.getHours()}).toJSON(),to:Object(Fn.a)(e,{hours:r.getHours()}).toJSON(),locationId:a,userId:i}}))}catch(o){return Xc("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430","\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"),null}},checkScheduleData:function(e,t){try{if(Object(sr.a)(null===e||void 0===e?void 0:e.getHours())>Object(sr.a)(null===t||void 0===t?void 0:t.getHours()))return!0}catch(n){Xc("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430","\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443")}return!0},calculateSchedulePosition:function(e,t){var n=this;try{return null===e||void 0===e?void 0:e.reduce((function(e,c,r){var a=[];if(0===r){var s=n.findVerticalPosition(Object(bt.default)(c.from),Object(bt.default)(c.to),t,void 0,c.user.id);return a.push(s),Object(Be.a)(Object(Be.a)({},e),{},{from:c.to,arr:a})}var i=n.findVerticalPosition(Object(bt.default)(c.from),Object(bt.default)(c.to),t,Object(bt.default)(e.from),c.user.id);return(a=e.arr).push(i),Object(Be.a)(Object(Be.a)({},e),{},{from:c.to,arr:a})}),{})}catch(c){Xc("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430","\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443")}},findVerticalPosition:function(e,t,n,c,r){var a;return a=Object(ir.default)(c)?Object(jt.a)(e,c):Object(jt.a)(e,Object(or.default)(e,6)),{date:e,height:Object(jt.a)(t,e,{roundingMethod:"ceil"})*n,top:a*n,userID:r}},generateHours:function(){return Object(lr.a)({start:Object(or.default)(new Date,6),end:Object(or.default)(new Date,22)})},loadSchedules:function(e){return Object(p.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.post(W,e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))()},deleteSchedule:function(e,t){return Object(p.a)(v.a.mark((function n(){var c;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.delete(t?J:Y,{data:e});case 2:return c=n.sent,n.abrupt("return",c.data);case 4:case"end":return n.stop()}}),n)})))()},createParams:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return{pageRequest:{size:n,index:0,params:{query:"",sortAsc:!0,sortBy:0,options:{locationIds:[e],dateFrom:Object(ur.default)(t,{weekStartsOn:1}).toJSON(),dateTo:Object(dr.default)(t,{weekStartsOn:1}).toJSON()}}}}},splitHours:function(e,t){return Object(lr.a)({start:Object(bt.default)(e),end:Object(bt.default)(t)})},checkDates:function(e,t){return Object(jr.default)(e,Object(bt.default)(t))},checkTimes:function(e,t){return Object(br.default)(e)===Object(br.default)(t)},setAllowedTime:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(Kc.a)(new Date,{hours:e,minutes:t,seconds:n})},setScheduledTime:function(e){return Object(ir.default)(e)?Object(fr.default)(e,1):null},setScheduledIndex:function(e){return e.reduce((function(e,t,n){return t&&e.push(n),e}),[])},deleteScheduleEnd:function(e,t){e.splice(t[0]+1,t.length)},deleteScheduleStart:function(e,t){e.splice(t[0],t.length)},deleteEndCheckboxes:function(e,t){var n=Object(f.a)(e);return n.splice(t[0],t.length),n},deleteStartCheckboxes:function(e,t){var n=Object(f.a)(e);return n.splice(t[0],t.length),n},splitIntoTwoSchedule:function(e,t,n,c,r,a,s){var i=Object(bt.default)(e),o=Object(bt.default)(t),l={from:i,to:o,fromHours:n[0],toHours:c,roomId:null===a||void 0===a?void 0:a.id,userId:s},u={from:i,to:o,fromHours:r,toHours:n[n.length-1],roomId:null===a||void 0===a?void 0:a.id,userId:s};return[].concat(Object(f.a)(this.prepareSchedule(l)),Object(f.a)(this.prepareSchedule(u)))}},Or=Object(m.b)("reservation/set-schedule",(function(e,t){var n=e.scheduleDays,c=e.hasPermissions,r=t.rejectWithValue;return mr.makeReservation(n,c).then((function(e){return e.data})).catch((function(e){return r(e.response.data)}))})),vr=Object(m.b)("reservation/page",(function(e){return mr.loadSchedules(e)})),pr=Object(m.b)("reservation/delete",(function(e,t){return mr.deleteSchedule(e,t)})),hr=Object(m.b)("reservation/set-schedule",(function(e){return mr.makeBlock(e)})),xr=Object(m.b)("reservation/remove-schedule",(function(e){return mr.removeBlock(e)})),_r={currentDate:new Date,isScheduleActive:!1,listOfReservations:null,scheduleWeeks:null,listOfMadeBookings:null,listOfAllReservations:null,selectedDate:null,selectedTime:null,selectedSchedule:null,isScheduleSlotActive:!1,isShowAvatar:!0,deleteCheckboxes:null},gr=Object(m.c)({name:"schedule",initialState:_r,reducers:{setCurrentDate:function(e,t){e.currentDate=t.payload},setSelectedDate:function(e,t){e.selectedDate=t.payload},setSelectedTime:function(e,t){e.selectedTime=t.payload},setScheduleActive:function(e,t){e.isScheduleActive=t.payload},setScheduleWeeks:function(e,t){e.scheduleWeeks=t.payload},setListOfMadeBookings:function(e,t){e.listOfMadeBookings=t.payload},setScheduleSlotActive:function(e,t){e.isScheduleSlotActive=t.payload},setShowAvatar:function(e,t){e.isShowAvatar=t.payload},setSelectedSchedule:function(e,t){e.selectedSchedule=t.payload},setDeleteCheckboxes:function(e,t){e.deleteCheckboxes=t.payload},setCheckboxesItem:function(e,t){e.checkboxes=t.payload}},extraReducers:(er={},Object(De.a)(er,Or.fulfilled,(function(e,t){e.listOfReservations=t.payload})),Object(De.a)(er,Or.rejected,(function(e,t){e.listOfReservations=t.payload})),Object(De.a)(er,vr.fulfilled,(function(e,t){e.listOfAllReservations=t.payload})),Object(De.a)(er,pr.fulfilled,(function(e,t){e.listOfReservations={schedules:t.meta.requestId}})),Object(De.a)(er,hr.fulfilled,(function(e,t){e.listOfReservations=t.payload})),er)}),Nr=gr.reducer,kr=gr.actions,yr=kr.setCurrentDate,wr=kr.setScheduleActive,Cr=kr.setScheduleWeeks,Sr=(kr.setListOfMadeBookings,kr.setSelectedDate),Ir=kr.setSelectedTime,Rr=kr.setScheduleSlotActive,Tr=kr.setShowAvatar,Dr=kr.setSelectedSchedule,Lr=kr.setDeleteCheckboxes,Mr=kr.setCheckboxesItem,Fr={addRandomHashToPictureUrl:function(e){return Object.assign(e,{pictureUrl:"".concat(e.pictureUrl,"?random=").concat(Math.random())})},getProfile:function(){var e=this;return Object(p.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.get(P);case 2:return n=t.sent,t.abrupt("return",e.addRandomHashToPictureUrl(n.data));case 4:case"end":return t.stop()}}),t)})))()},changeProfile:function(e){var t=this;return Object(p.a)(v.a.mark((function n(){var c;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.post(P,e);case 2:return c=n.sent,n.abrupt("return",t.addRandomHashToPictureUrl(c.data));case 4:case"end":return n.stop()}}),n)})))()}},Er=Object(m.b)("getProfile/requestStatus",(function(){return Fr.getProfile()})),Ar=Object(m.b)("changeProfile/requestStatus",(function(e){return Fr.changeProfile(e)})),Pr=Object(m.c)({name:"userProfile",initialState:{profile:null},reducers:{},extraReducers:function(e){e.addCase(Er.fulfilled,(function(e,t){e.profile=t.payload})),e.addCase(Ar.fulfilled,(function(e,t){e.profile=t.payload}))}}),Ur=Pr.reducer,Hr=(Pr.actions,{getScheduleMonth:function(){var e=Object(p.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.post(W,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),zr=Object(m.b)("monthReservation/getMonthReservation",function(){var e=Object(p.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hr.getScheduleMonth(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Br=function(e){return e.scheduleMonth.isListOfAllBookings},qr=Object(m.c)({name:"scheduleMonth",initialState:{isLoading:!1,isListOfAllBookings:null},reducers:{},extraReducers:(tr={},Object(De.a)(tr,zr.pending,(function(e){e.isLoading=!0})),Object(De.a)(tr,zr.fulfilled,(function(e,t){e.isListOfAllBookings=t.payload,e.isLoading=!1})),Object(De.a)(tr,zr.rejected,(function(e){e.isLoading=!1})),tr)}).reducer,Vr={getRole:function(){var e=Object(p.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.get(se),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Wr=Object(m.b)("/api/Role",Object(p.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vr.getRole());case 1:case"end":return e.stop()}}),e)})))),Yr=Object(m.c)({name:"roles",initialState:{roles:[]},reducers:{setRoles:function(e,t){e.roles=t.payload}},extraReducers:(nr={},Object(De.a)(nr,Wr.pending,(function(e){e.isLoading=!0})),Object(De.a)(nr,Wr.fulfilled,(function(e,t){e.roles=t.payload,e.isLoading=!1})),Object(De.a)(nr,Wr.rejected,(function(e){e.isLoading=!1})),nr)}),Jr=Yr.reducer,Gr=(Yr.actions,{getDetailedSchedule:function(){var e=Object(p.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.post(W,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),$r=Object(m.b)("detailedReservation/getDetailedReservation",function(){var e=Object(p.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gr.getDetailedSchedule(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Kr=Object(m.c)({name:"detailedSchedule",initialState:{isLoading:!1,isListOfAllBookings:null,selectedDate:null},reducers:{setSelectedDate:function(e,t){e.selectedDate=t.payload}},extraReducers:(cr={},Object(De.a)(cr,$r.pending,(function(e){e.isLoading=!0})),Object(De.a)(cr,$r.fulfilled,(function(e,t){e.isListOfAllBookings=t.payload,e.isLoading=!1})),Object(De.a)(cr,$r.rejected,(function(e){e.isLoading=!1})),cr)}),Qr=Kr.reducer,Xr=Kr.actions.setSelectedDate,Zr=Object(m.c)({name:"myReservations",initialState:{isLoading:!1,allReservations:{},selectedDateFrom:null,selectedDateTo:null,selectedTimeFrom:null,selectedTimeTo:null},reducers:{setDateFrom:function(e,t){e.selectedDateFrom=t.payload},setDateTo:function(e,t){e.selectedDateTo=t.payload},setTimeFrom:function(e,t){e.selectedTimeFrom=t.payload},setTimeTo:function(e,t){e.selectedTimeTo=t.payload}},extraReducers:(rr={},Object(De.a)(rr,Nn.pending,(function(e){e.isLoading=!0})),Object(De.a)(rr,Nn.fulfilled,(function(e,t){e.allReservations=t.payload,e.isLoading=!1})),Object(De.a)(rr,Nn.rejected,(function(e){e.isLoading=!1})),rr)}),ea=Zr.reducer,ta=Zr.actions,na=ta.setDateFrom,ca=ta.setDateTo,ra=ta.setTimeFrom,aa=ta.setTimeTo,sa=Object(m.c)({name:"search",initialState:{isUserSearched:!1},reducers:{setIsUserSearched:function(e,t){e.isUserSearched=t.payload}}}),ia=sa.reducer,oa=(sa.actions.setIsUserSearched,Object(m.a)({reducer:{locations:He,auth:Re,userProfile:Ur,cards:At,schedule:Nr,scheduleMonth:qr,scheduleYear:$n,users:yc,detailedSchedule:Qr,reservations:ea,search:ia,roles:Jr},middleware:function(e){return e()}})),la=oa,ua=n(26),da=Object(ua.a)();var ja,ba=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,402)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},fa="domainName",ma="password",Oa=Mc.a().shape((ja={},Object(De.a)(ja,fa,Mc.b().required("\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f").max(30,"\u041f\u043e\u043b\u0435 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0442\u044c 30 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").trim()),Object(De.a)(ja,ma,Mc.b().required("\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f").max(30,"\u041f\u043e\u043b\u0435 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0442\u044c 30 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").trim()),ja)),va=(n(350),"remember-me");var pa=function(){var e,t,n=Object(Dc.e)({resolver:Object(Ec.a)(Oa)}),c=n.register,r=n.handleSubmit,s=n.formState.errors,i=n.setValue,o=Object(b.c)(),l=Object(tt.h)(),u=Object(a.useState)(!1),d=Object(it.a)(u,2),j=d[0],f=d[1],m=Object(a.useState)(localStorage.getItem(va)),O=Object(it.a)(m,2),h=O[0],x=O[1],_=function(){x((function(e){return!e})),localStorage.setItem(va,!h)},N=function(){var e=Object(p.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,o(we({username:t.domainName,password:t.password}));case 3:n=e.sent,we.fulfilled.match(n)&&l.push(I),we.rejected.match(n)&&setTimeout((function(){i(ma,"")}),300),f(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=g.getAccessToken();return Object(a.useEffect)((function(){g.isAccessTokenValid()&&ye()}),[k]),Object(qe.jsx)("div",{className:"authtorisation",children:Object(qe.jsx)("div",{className:"authtorisation__box",children:Object(qe.jsxs)("div",{className:"authtorisation__group",children:[Object(qe.jsx)("div",{className:"authtorisation__logo-block",children:Object(qe.jsxs)("p",{className:"logo",children:[Object(qe.jsx)("span",{className:"logo__decor",children:"ino"}),Object(qe.jsx)("span",{className:"logo__text",children:"reserv"})]})}),Object(qe.jsxs)("div",{className:"authtorisation__description",children:[Object(qe.jsx)("h1",{className:"authtorisation__title",children:"\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043e\u0444\u0438\u0441\u043d\u044b\u0445 \u043c\u0435\u0441\u0442 "}),Object(qe.jsx)("p",{className:"authtorisation__text",children:"C\u0435\u0440\u0432\u0438\u0441 INOSTUDIO, \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0449\u0438\u0439 \u0437\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0440\u0430\u0431\u043e\u0447\u0435\u0435 \u043c\u0435\u0441\u0442\u043e \u0432 \u043e\u0444\u0438\u0441\u0435."})]}),Object(qe.jsxs)("form",{className:"form-authtorisation",onSubmit:r(N),children:[Object(qe.jsx)(bc,{className:"form-authtorisation__login",label:"\u0412\u0430\u0448 \u043b\u043e\u0433\u0438\u043d",name:fa,error:null===(e=s[fa])||void 0===e?void 0:e.message,register:c,children:Object(qe.jsx)("input",{id:fa,className:"input form-item__input",type:"text",placeholder:"\u0412\u0430\u0448 \u043b\u043e\u0433\u0438\u043d",autoComplete:"on"})}),Object(qe.jsx)(bc,{className:"form-authtorisation__password",label:"\u0412\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c",name:ma,error:null===(t=s[ma])||void 0===t?void 0:t.message,register:c,children:Object(qe.jsx)("input",{id:ma,className:"input form-item__input",type:"password",placeholder:"\u0412\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c",autoComplete:"on"})}),Object(qe.jsxs)("div",{className:"time-line",children:[Object(qe.jsx)("input",{className:"time-line-checkbox__custom",id:"remember-me",type:"checkbox",value:h,checked:h}),Object(qe.jsx)("label",{className:Je()("time-line-checkbox--active"),htmlFor:"remember-me",onClick:_,children:Object(qe.jsx)(Xe,{className:Je()("icon__select-checkbox"),name:"check-arrow",size:10,fill:!0})}),Object(qe.jsx)("label",{className:Je()("time-line-title"),htmlFor:"remember-me",onClick:_,children:"\u0417\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c \u043c\u0435\u043d\u044f"})]}),Object(qe.jsx)($e,{className:"ctrl-button--color-blue form__button",isLoading:j,type:"submit",icon:Object(qe.jsx)(Xe,{name:"triangle",size:24,fill:!0}),children:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"})]})]})})})};n(351);function ha(e){var t=e.month,n=e.fetchReport,c=e.year,r=e.reportMonth,s=Object(a.useState)(null),i=Object(it.a)(s,2),o=i[0],l=i[1];return Object(a.useEffect)((function(){t&&n(Object(Kc.a)(r,{hours:0,minutes:0,seconds:0}),l)}),[t]),console.log(o),Object(qe.jsx)("div",{className:"report",children:Object(qe.jsxs)("div",{className:"report__group",children:[Object(qe.jsx)("div",{className:"report__date",children:Object(qe.jsxs)("span",{className:"report__date-group",children:[Object(qe.jsxs)("p",{className:"report__date-year",children:[c," "]})," / ",Object(qe.jsx)("p",{className:"report__date-month",children:t})]})}),Object(qe.jsx)("a",{href:"http://172.20.10.2:8887/\u0410\u043a\u0442-\u043a\u043e\u043c\u043f\u0435\u043d\u0441\u0430\u0446\u0438\u0438-17.06.2022.xlsx",download:!0,children:Object(qe.jsx)(Xe,{className:"report__icon",name:"download",size:35})})]})})}var xa=n(210),_a=n(222);n(352);function ga(e){var t=e.fetchReport,n=Object(a.useState)(new Date),c=Object(it.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(null),o=Object(it.a)(i,2),l=o[0],u=o[1],d=Object(a.useState)(!1),j=Object(it.a)(d,2),b=j[0],f=j[1],m=Object(a.useState)(null),O=Object(it.a)(m,2),v=O[0],p=O[1];console.log(v,p,t);var h=Object(a.useRef)(Object(Kc.a)(r,{month:1,date:0})),x=Object(a.useRef)(new Date);return Object(a.useEffect)((function(){l&&f(!1)}),[l]),Object(a.useEffect)((function(){2022!==Object(xa.default)(r)&&(h.current=Object(_a.default)(r))}),[r]),Object(qe.jsxs)(qe.Fragment,{children:[Object(qe.jsxs)("div",{className:"report-search",children:[Object(qe.jsxs)("div",{className:"report-search__date",children:[Object(qe.jsxs)("div",{className:"report-search__date-container",children:[Object(qe.jsx)("p",{className:"report-search__date-title",children:"\u0413\u043e\u0434"}),Object(qe.jsx)(Mn.a,{selected:r,onChange:function(e){s(e),u(null)},showYearPicker:!0,dateFormat:"yyyy",yearItemNumber:1,customInput:Object(qe.jsx)(Hc,{text:"\u0412\u0440\u0435\u043c\u044f \u043e\u0442",iconName:"time-arrow-down",isError:b})})]}),Object(qe.jsxs)("div",{className:"report-search__date-container",children:[Object(qe.jsx)("p",{className:"report-search__date-title",children:"\u041c\u0435\u0441\u044f\u0446"}),Object(qe.jsx)(Mn.a,{selected:l,onChange:function(e){return u(e)},minDate:h.current,maxDate:x.current,locale:"ru",dateFormat:"LLLL",showMonthYearPicker:!0,customInput:Object(qe.jsx)(Hc,{text:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043c\u0435\u0441\u044f\u0446",iconName:"time-arrow-down",isError:b})})]})]}),Object(qe.jsx)("a",{className:Je()("report-search__button",{"report-search__button--active":l}),onClick:function(e){l||(e.preventDefault(),f(!0))},download:!b,href:"http://172.20.10.2:8887/\u0410\u043a\u0442-\u043a\u043e\u043c\u043f\u0435\u043d\u0441\u0430\u0446\u0438\u0438-31.05.2022.xlsx",children:Object(qe.jsx)(Xe,{className:"report__icon",name:"download",size:35})})]}),Object(qe.jsx)("div",{className:Je()("validation",{"validation--active":b}),children:Object(qe.jsxs)("p",{className:"time__container-text time__container-text--empty",children:["\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c ",!l&&"\u043c\u0435\u0441\u044f\u0446"]})})]})}var Na=n(201),ka=n(401),ya=n(221),wa=n(208);n(353);function Ca(){var e=Object(a.useRef)(vt(new Date,"LLLL")),t=Object(a.useRef)(vt(Object(Na.default)(new Date,1),"LLLL")),n=Object(a.useRef)(vt(new Date,"yyyy")),c=Object(a.useRef)(new Date),r=Object(a.useRef)(null);Object(a.useEffect)((function(){var e;r.current=(e=c.current,Object(ka.a)(e,Object(ya.default)(e))<2)}),[]);var s=Object(a.useCallback)((function(){return!(2022===Object(xa.default)(c.current)&&1===Object(wa.default)(c.current))}),[]),i=function(){var e=Object(p.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(qe.jsxs)("div",{className:"compensation",children:[Object(qe.jsx)("div",{className:"compensation__header compensation__header--primary",children:Object(qe.jsx)("span",{children:"\u041a\u043e\u043c\u043f\u0435\u043d\u0441\u0430\u0446\u0438\u044f"})}),Object(qe.jsxs)("div",{className:"compensation__actual-report",children:[Object(qe.jsx)("div",{className:"compensation__actual-report-title",children:"\u0410\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0447\u0435\u0442"}),Object(qe.jsxs)("div",{className:"compensation__actual-report-container",children:[Object(qe.jsx)(ha,{year:n.current,month:e.current,reportMonth:c.current,fetchReport:i}),r.current&&s()&&Object(qe.jsx)(ha,{year:n.current,month:t.current,reportMonth:Object(Na.default)(c.current,1),fetchReport:i})]})]}),Object(qe.jsxs)("div",{className:"compensation__find-report",children:[Object(qe.jsx)("div",{className:"compensation__find-report-title",children:"\u041d\u0430\u0439\u0442\u0438 \u043e\u0442\u0447\u0451\u0442"}),Object(qe.jsx)(ga,{fetchReport:i})]})]})}n(354);function Sa(e){var t,n=e.setIsOpenFilters,c=e.setIsFilteredUserList,r=e.fieldForSort,s=Object(a.useState)(""),i=Object(it.a)(s,2),o=i[0],l=i[1],u=Object(a.useState)(!1),d=Object(it.a)(u,2),j=d[0],m=d[1],O=Object(a.useState)(!1),v=Object(it.a)(O,2),p=v[0],h=v[1],x=Object(b.d)(jc).roles,_=Object(b.d)(xc),g=Object.values(rc),N=Object(b.d)(ct),k=Object(a.useState)(Object(f.a)(g)),y=Object(it.a)(k,2),w=y[0],C=y[1],S=Object(a.useState)(null===(t=x.data)||void 0===t?void 0:t.map((function(e){return{id:e.id,name:e.name}}))),I=Object(it.a)(S,2),R=I[0],T=I[1],D=Ot(de,N),L=Object(a.useState)(!1),M=Object(it.a)(L,2),F=M[0],E=M[1],A=Object(a.useRef)(null),P=Object(a.useRef)(null),U=Object(a.useRef)(null),H=Object(a.useRef)(null),z=Object(b.c)();Nt({ref:A,cb:function(){return m(!1)},exclude:P}),Nt({ref:U,cb:function(){return h(!1)},exclude:H});var B=Object(a.useMemo)((function(){return w.some((function(e){return e.checked}))}),[w]),q=Object(a.useMemo)((function(){return R.some((function(e){return e.checked}))}),[R]),V=function(e,t){var n=Object(f.a)(w),c=w.findIndex((function(e){return e.id===t.id}));c>-1&&(n[c].checked=e);var r=Object(f.a)(R),a=R.findIndex((function(e){return e.id===t.id}));a>-1&&(r[a].checked=e),T(Object(f.a)(r)),C(Object(f.a)(n))},W=Object(a.useMemo)((function(){return B||q||o}),[B,q,o]);return Object(a.useEffect)((function(){c(!!W)}),[W]),Object(qe.jsxs)("div",{className:"filters_wrapper ".concat(!_&&"filters_wrapper--mobile"),children:[!_&&Object(qe.jsxs)("div",{className:"filters_header ".concat(_&&"filters_header--mobile"),children:[Object(qe.jsx)("h1",{className:"user-filter_title",children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"}),Object(qe.jsx)("div",{className:"filter_button-wrapper",children:Object(qe.jsx)($e,{className:"filters__button",onClick:function(){n(!0),z(wc.setFilterUsersActive(!0))},children:"\u0424\u0438\u043b\u044c\u0442\u0440\u044b"})})]}),_&&Object(qe.jsxs)(qe.Fragment,{children:[Object(qe.jsxs)("div",{className:"filter_content",children:[Object(qe.jsx)(Oc,{title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",children:Object(qe.jsx)(Tn,{children:Object(qe.jsxs)("div",{className:"form-search__wrapper",children:[Object(qe.jsx)("input",{className:"input  ".concat(o?"filter-search__input":"form-search__input"," "),type:"text",autoComplete:"on",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u0438\u043c\u044f",value:o,onChange:function(e){l(e.target.value)},onFocus:function(){return E(!0)},onBlur:function(){return E(!1)}}),Object(qe.jsx)(Xe,{name:"search",className:"filter-search__icon-search".concat(o&&"--none"),size:24}),o&&Object(qe.jsx)(Yt,{className:"form-search__remove-text",icon:Object(qe.jsx)(Xe,{className:Je()("form-search__remove-icon",{"form-search__remove-icon--blue":F}),name:"close",size:14}),onClick:function(e){e.preventDefault(),l("")}})]})})}),Object(qe.jsx)(fc,{refSelector:A,filteredType:w,setOpenOptions:m,isHaveCheckedType:B,actionInput:function(){m(!1);var e=Object(f.a)(w),t=null===e||void 0===e?void 0:e.map((function(e){return!0===e.checked?Object(Be.a)(Object(Be.a)({},e),{},{checked:!1}):e}));t.map((function(e){return V(!1,e)})),C(Object(f.a)(t))},isOpenOptions:j,excludeRef:P,tableType:g,handleOptionClick:V,title:"\u0422\u0438\u043f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",placeholder:"\u0412\u044b\u0431\u043e\u0440 \u0442\u0438\u043f\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),Object(qe.jsx)(fc,{refSelector:U,filteredType:R,setOpenOptions:h,isHaveCheckedType:q,actionInput:function(){h(!1);var e=Object(f.a)(R),t=null===e||void 0===e?void 0:e.map((function(e){return!0===e.checked?Object(Be.a)(Object(Be.a)({},e),{},{checked:!1}):e}));t.map((function(e){return V(!1,e)})),T(Object(f.a)(t))},isOpenOptions:p,excludeRef:H,tableType:R,handleOptionClick:V,title:"\u0420\u043e\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",placeholder:"\u0412\u044b\u0431\u043e\u0440 \u0440\u043e\u043b\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})]}),Object(qe.jsx)($e,{className:"filters__button",onClick:function(){n(!1),function(){if(0===r||1===r){var e={pageRequest:{size:300,index:0,params:{query:o,sortAsc:!0,sortBy:r,options:{userTypes:w.filter((function(e){return e.checked})).map((function(e){return e.id})),roleIds:(null===R||void 0===R?void 0:R.filter((function(e){return e.checked})).map((function(e){return e.id})))||[]}}}};z(D?ic(e):sc(e))}else{var t={pageRequest:{size:300,index:0,params:{query:o,sortAsc:!0,options:{userTypes:w.filter((function(e){return e.checked})).map((function(e){return e.id})),roleIds:(null===R||void 0===R?void 0:R.filter((function(e){return e.checked})).map((function(e){return e.id})))||[]}}}};z(D?ic(t):sc(t))}}(),z(wc.setFilterUsersActive(!1))},children:"\u041e\u0442\u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c"})]})]})}function Ia(){var e=Object(b.c)(),t=Object(a.useState)(!1),n=Object(it.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(!1),i=Object(it.a)(s,2),o=i[0],l=i[1],u=Object(b.d)(ct),d=Ot(de,u),j=Object(a.useState)(!1),f=Object(it.a)(j,2),m=f[0],O=f[1],v=427,p=_c().width,h=Object(a.useState)(),x=Object(it.a)(h,2),_=x[0],g=x[1];Object(a.useEffect)((function(){O(!(p<v))}),[p]),Object(a.useEffect)((function(){d?e(Wr()).then((function(){return r(!0)})):r(!0)}),[e,d]);var N=Object(b.d)(xc);return Object(qe.jsx)("div",{children:c&&Object(qe.jsxs)(qe.Fragment,{children:[p<v&&Object(qe.jsx)(Sa,{setIsOpenFilters:O,isOpenFilters:m,windowWidth:p,mobileView:v,setIsFilteredUserList:l}),p>v&&Object(qe.jsx)(mc,{setIsFilteredUserList:l}),(!m||p>v||!N)&&Object(qe.jsx)(Tc,{isFilteredUserList:o,fieldForSort:_,setFieldForSort:g})]})})}function Ra(){return Object(qe.jsx)("div",{className:"plug_wrapper",children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0440\u043e\u043b\u0435\u0439"})}function Ta(e){var t,n,c,r,a=e.version;return Object(qe.jsxs)("div",{className:"history-list__item version",children:[Object(qe.jsxs)("p",{className:"version__date",children:["\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043e\u0442 ",null===a||void 0===a?void 0:a.date," \u0433."]}),Object(qe.jsxs)("div",{className:"version__wrapper",children:[((null===a||void 0===a?void 0:a.web.important)||(null===a||void 0===a?void 0:a.web.text))&&Object(qe.jsx)("h1",{className:"version__category",children:"WEB \u0447\u0430\u0441\u0442\u044c"}),(null===a||void 0===a||null===(t=a.web)||void 0===t?void 0:t.text)&&Object(qe.jsxs)("p",{className:"version__info",children:["\u0423\u043b\u0443\u0447\u0448\u0435\u043d\u0438\u044f: ",Object(qe.jsx)("br",{})," ",a.web.text]}),(null===a||void 0===a||null===(n=a.web)||void 0===n?void 0:n.important)&&Object(qe.jsxs)("p",{className:"version__info",children:["\u0412\u0430\u0436\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f: ",Object(qe.jsx)("br",{}),a.web.important]}),((null===a||void 0===a?void 0:a.app.important)||(null===a||void 0===a?void 0:a.app.text))&&Object(qe.jsxs)("h1",{className:"version__category",children:["\u041a\u043b\u0438\u0435\u043d\u0442\u0441\u043a\u0430\u044f \u0447\u0430\u0441\u0442\u044c ",a.app.os]}),(null===a||void 0===a||null===(c=a.app)||void 0===c?void 0:c.text)&&Object(qe.jsxs)("p",{className:"version__info",children:["\u0423\u043b\u0443\u0447\u0448\u0435\u043d\u0438\u044f: ",Object(qe.jsx)("br",{})," ",a.app.text]}),(null===a||void 0===a||null===(r=a.app)||void 0===r?void 0:r.important)&&Object(qe.jsxs)("p",{className:"version__info",children:["\u0412\u0430\u0436\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f: ",Object(qe.jsx)("br",{}),a.app.important]})]})]})}var Da=[{date:"31.03.2022",web:{text:Object(qe.jsxs)("ol",{className:"history__menu menu",children:[Object(qe.jsx)("li",{className:"menu__item",children:"\u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u043e\u0448\u0438\u0431\u043a\u0438 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0430"}),Object(qe.jsx)("li",{className:"menu__item",children:"\u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u043e\u0448\u0438\u0431\u043a\u0438 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438"}),Object(qe.jsx)("li",{className:"menu__item",children:"\u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u0430, \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0433\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u043c \u0440\u043e\u043b\u044f\u043c"})]}),important:""},app:{text:"",important:"",os:""}},{date:"28.03.2022",web:{text:Object(qe.jsxs)("ol",{className:"history__menu menu",children:[Object(qe.jsx)("li",{className:"menu__item",children:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u043a\u043e\u043c\u043f\u0435\u043d\u0441\u0430\u0446\u0438\u044e \u0437\u0430 \u043b\u0438\u0447\u043d\u043e\u0435 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u0442\u044c \u043e\u0442\u0447\u0435\u0442\u0430 \u0434\u043b\u044f \u0440\u043e\u043b\u0438 \u0441\u0442\u0430\u0442\u0438\u0441\u0442"}),Object(qe.jsx)("li",{className:"menu__item",children:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u043f\u043e\u0438\u0441\u043a \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0439 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432"}),Object(qe.jsx)("li",{className:"menu__item",children:"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u0430 \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438 \u0438 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0440\u043e\u043b\u044f\u043c\u0438"}),Object(qe.jsx)("li",{className:"menu__item",children:"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u0430 \u043f\u043e \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044e \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430\u043c\u0438 \u0440\u0430\u0431\u043e\u0447\u0438\u0445 \u043c\u0435\u0441\u0442"})]}),important:""},app:{text:"",important:"",os:""}},{date:"16.06.2022",web:{text:Object(qe.jsxs)("ol",{className:"history__menu menu",children:[Object(qe.jsx)("li",{className:"menu__item",children:"\u041f\u0435\u0440\u0435\u0440\u0430\u0431\u043e\u0442\u0430\u043d \u0432\u0438\u0434 \u043a\u0430\u0440\u0442\u043e\u0447\u0435\u043a \u0440\u0430\u0431\u043e\u0447\u0438\u0445 \u043c\u0435\u0441\u0442. \u0411\u044b\u043b\u0438 \u0443\u0431\u0440\u0430\u043d\u044b \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438, \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430 \u0446\u0432\u0435\u0442\u043e\u0432\u0430\u044f \u0441\u0445\u0435\u043c\u0430"}),Object(qe.jsx)("li",{className:"menu__item",children:"\u041d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u043c\u043e\u0438\u0445 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0439 \u0438 \u043f\u043e\u0438\u0441\u043a\u0430 \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u044b \u0444\u0438\u043b\u044c\u0442\u0440\u044b \u043f\u043e: \u0432\u0440\u0435\u043c\u0435\u043d\u0438, \u0434\u0430\u0442\u0435, \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u0443, \u043c\u0435\u0441\u0442\u0443"}),Object(qe.jsx)("li",{className:"menu__item",children:"\u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u0432\u0435\u0440\u0441\u0442\u043a\u0430"}),Object(qe.jsx)("li",{className:"menu__item",children:"\u041f\u0435\u0440\u0435\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043e \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u0440\u0430\u0431\u043e\u0442\u0430\u043c\u0438"}),Object(qe.jsx)("li",{className:"menu__item",children:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0430\u0446\u0438\u044f \u0443\u0447\u0435\u0442\u043d\u044b\u0445 \u0437\u0430\u043f\u0438\u0441\u0435\u0439 \u0441 AD"}),Object(qe.jsx)("li",{className:"menu__item",children:"\u0423\u043b\u0443\u0447\u0448\u0435\u043d \u0432\u044b\u0445\u043e\u0434\u043d\u043e\u0439 \u0432\u0438\u0434 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430 \u043f\u043e \u043a\u043e\u043c\u043f\u0435\u043d\u0441\u0430\u0446\u0438\u044f\u043c"}),Object(qe.jsx)("li",{className:"menu__item",children:"\u041f\u0435\u0440\u0435\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u0430 \u043b\u043e\u0433\u0438\u043a\u0430 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0439 \u043f\u0440\u0438 \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u043c \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438. \u0422\u0435\u043f\u0435\u0440\u044c \u0435\u0441\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043d\u0430 \u0433\u043e\u0434\u043e\u0432\u043e\u043c \u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u0435 \u0443\u0437\u043d\u0430\u0442\u044c \u043f\u0440\u0438\u0447\u0438\u043d\u0443 \u043d\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e\u0441\u0442\u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0439"})]}),important:""},app:{text:"",important:"",os:""}}];n(355);function La(){return Object(qe.jsx)("div",{className:"history",children:Object(qe.jsxs)("div",{className:"history__wrapper",children:[Object(qe.jsx)("div",{className:"history__header",children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0432\u0435\u0440\u0441\u0438\u0439"}),Object(qe.jsx)("div",{className:"history-list",children:null===Da||void 0===Da?void 0:Da.map((function(e,t){return Object(qe.jsx)(Ta,{version:e},t)}))})]})})}function Ma(){return Object(qe.jsx)("div",{className:"plug_wrapper",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})}var Fa=/^[\u0400-\u04FF]+$/,Ea=Mc.a().shape({profileName:Mc.b().required("\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f").matches(Fa,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435").max(30,"\u0418\u043c\u044f \u0431\u043e\u043b\u044c\u0448\u0435 30 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").trim(),profileSurname:Mc.b().required("\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f").matches(Fa,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043c\u0438\u043b\u0438\u044e \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435").max(30,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f \u0431\u043e\u043b\u044c\u0448\u0435 30 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").trim()});function Aa(e,t){return{dto:{firstName:e.profileName,lastname:e.profileSurname,pictureString:t}}}function Pa(e){var t=e.selectedImage,n=e.isImageSelected,c=e.profile,r=e.disableClick,s=e.imageChangeHandler,i=Object(a.useRef)(null),o="string"===typeof t,l=ht(t),u=Object(a.useMemo)((function(){return o?null===c||void 0===c?void 0:c.pictureUrl:(i.current=URL.createObjectURL(new Blob([t])),i.current)}),[o,l,null===c||void 0===c?void 0:c.pictureUrl,t]);return Object(a.useEffect)((function(){return function(){return i.current&&URL.revokeObjectURL(i.current)}}),[]),Object(qe.jsxs)("div",{className:"user-profile__file-upload",children:[n&&!l?Object(qe.jsx)("div",{className:"user-bar__avatar--pers user-profile__avatar",children:Object(qe.jsx)("img",{src:u,className:"user-profile__image",alt:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f \u043f\u0440\u043e\u0444\u0438\u043b\u044f"})}):Object(qe.jsx)("div",{className:"user-bar__avata--pers user-profile__avatar",children:Object(qe.jsx)(Xe,{name:"userWithoutAvatar",className:"user-profile__icon",size:120})}),Object(qe.jsx)("input",{type:"file",id:"user-profile",className:"user-profile__input-file--hidden",onClick:r,onChange:s,accept:"image/jpeg,image/png"}),Object(qe.jsx)("label",{htmlFor:"user-profile",className:"user-profile__input-file",onClick:r,children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u043e\u0442\u043e"})]})}function Ua(e){var t=e.isLoading,n=e.onClose,c=e.disableClick;return Object(qe.jsxs)("div",{className:"user-profile__buttons",children:[Object(qe.jsx)($e,{onClick:n,className:"form__button form-cancel__button user-profile__button",disable:t,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(qe.jsx)($e,{onClick:c,className:"form__button form-edit-card__button user-profile__button",type:"submit",isLoading:t,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})}n(356);var Ha="profileName",za="profileSurname";function Ba(e){var t,n,c=e.onClose,r=e.closeProfile,s=Object(b.d)($c),i=Object(a.useState)(!1),o=Object(it.a)(i,2),l=o[0],u=o[1],d=Object(a.useState)(null),j=Object(it.a)(d,2),f=j[0],m=j[1],O=Object(a.useState)(s.firstName),h=Object(it.a)(O,2),x=h[0],_=h[1],g=Object(a.useState)(s.lastName),N=Object(it.a)(g,2),k=N[0],y=N[1],w=Object(a.useState)(null===s||void 0===s?void 0:s.pictureUrl),C=Object(it.a)(w,2),S=C[0],I=C[1],R=Object(b.c)(),T=Object(Dc.e)({resolver:Object(Ec.a)(Ea)}),D=T.register,L=T.handleSubmit,M=T.formState.errors,F=null!==S,E=function(){var e=Object(p.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,R(Ar(Aa(t,f)));case 4:r(),zn({title:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d",description:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u0438 \u043f\u0440\u043e\u0444\u0438\u043b\u044c",iconName:"success",type:"success"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),zn({title:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f",description:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",iconName:"error",type:"error"});case 11:u(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),A=function(e){return e.stopPropagation()};return Object(qe.jsxs)("form",{className:"user-profile",onSubmit:L(E),children:[Object(qe.jsx)("p",{className:"user-profile__title",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043f\u0440\u043e\u0444\u0438\u043b\u044f"}),Object(qe.jsx)(Pa,{selectedImage:S,isImageSelected:F,profile:s,disableClick:A,imageChangeHandler:function(e){if(e.target.files&&e.target.files.length>0){I(e.target.files[0]);var t=new FileReader;t.onloadend=function(){var e=t.result.replace(/^.+,/,"");m(e)},t.readAsDataURL(e.target.files[0])}}}),Object(qe.jsx)(bc,{className:"user-profile__field",label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",name:za,register:D,error:null===(t=M.profileSurname)||void 0===t?void 0:t.message,children:Object(qe.jsx)("input",{id:za,className:Je()("input form-item__input",{"form-item__input--invalid":M.profileSurname}),type:"text",placeholder:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",autoComplete:"on",defaultValue:k,onChange:function(e){return y(e.target.value)}})}),Object(qe.jsx)(bc,{className:"user-profile__field",label:"\u0418\u043c\u044f",name:Ha,register:D,error:null===(n=M.profileName)||void 0===n?void 0:n.message,children:Object(qe.jsx)("input",{id:Ha,className:Je()("input form-item__input",{"form-item__input--invalid":M.profileName}),type:"text",placeholder:"\u0418\u043c\u044f",autoComplete:"on",defaultValue:x,onChange:function(e){return _(e.target.value)}})}),Object(qe.jsx)(Ua,{isLoading:l,onClose:c,disableClick:A})]})}var qa=function(e){return{query:e}},Va=function(e,t){return Object(p.a)(v.a.mark((function n(){var c;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.post(t,e);case 2:return c=n.sent,n.abrupt("return",c.data);case 4:case"end":return n.stop()}}),n)})))()},Wa=(n(357),["className","placeholder","iconName","setUsers","isGlobalSearch","children"]),Ya=s.a.forwardRef((function(e,t){var n=e.className,c=e.placeholder,r=e.iconName,s=e.setUsers,i=e.isGlobalSearch,o=e.children,l=Object(We.a)(e,Wa),u=Object(a.useState)(!1),d=Object(it.a)(u,2),j=d[0],b=d[1],f=l.value,m=l.setValue,O=l.setModalActive,h=l.searchUser,x=l.isUserSearched,_=function(){return m("")},g=function(){s(null),O(!1)},N=""===f,k=pn(function(){var e=Object(p.a)(v.a.mark((function e(t){var n,c,r,a,i,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e,t){return{isUserFound:0!==e.length,isEmptySearch:""===t.query}},c=qa(t),r=re,e.prev=3,e.next=6,Va(c,r);case 6:if(a=e.sent,i=n(a,c),o=i.isUserFound,!i.isEmptySearch&&o){e.next=11;break}return g(),e.abrupt("return");case 11:O(!0),s(a),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),O(!1);case 18:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}(),500),y=function(){h(C,f),O(!1)};return Object(a.useEffect)((function(){N&&g()}),[N]),Object(qe.jsx)("div",{className:"dropdown-search",ref:t,children:Object(qe.jsxs)("div",{className:"dropdown-search__container",children:[Object(qe.jsxs)("div",{className:"dropdown-search__input-block",children:[Object(qe.jsx)("input",{className:n,type:"text",placeholder:c,value:f,onChange:function(e){m(e.target.value),k(e.target.value)},onFocus:function(){return b(!0)},onBlur:function(){return b(!1)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),y(),x.current=!0)}}),Object(qe.jsx)(Xe,{className:Je()("dropdown-search__icon",{"dropdown-search__icon--searching":!N},{"dropdown-search__icon--focus":j}),name:r,onClick:i?y:_}),i&&Object(qe.jsx)(Xe,{className:Je()("dropdown-search__icon dropdown-search__icon-global",{"form-search__remove-icon--blue":!N},{"form-search__remove-icon--idle":x}),name:"close",size:14,onClick:_})]}),o]})})})),Ja=Ya;n(358);function Ga(e){var t=e.pictureUrl,n=e.firstName,c=e.lastName,r=e.onCLick,a=e.id,s=e.currentUserId,i={user:{pictureUrl:t,firstName:n}},o=s===a;return Object(qe.jsxs)("div",{className:"user",onClick:function(){return r({firstName:n,lastName:c,id:a})},children:[Object(qe.jsx)(qc,{schedule:i,isMySchedule:o}),Object(qe.jsxs)("span",{className:"user__name",children:[n," ",c]})]})}n(359);function $a(e){var t=e.users,n=e.close,c=e.setValue,r=e.selectUser,a=e.currentUserId,s=e.modalWidth,i=function(e){var t=e.firstName,a=e.lastName,s={firstName:t,lastName:a,id:e.id};n(!1),c("".concat(t," ").concat(a)),r(s)};return Object(qe.jsx)("div",{className:"search-modal",style:{width:s},children:Object(qe.jsx)("div",{className:"search-modal__group",children:null===t||void 0===t?void 0:t.map((function(e){return Object(qe.jsx)(Ga,{firstName:null===e||void 0===e?void 0:e.firstName,lastName:null===e||void 0===e?void 0:e.lastName,pictureUrl:null===e||void 0===e?void 0:e.pictureUrl,onCLick:i,id:null===e||void 0===e?void 0:e.id,currentUserId:a},null===e||void 0===e?void 0:e.id)}))})})}var Ka=function(e){var t,n,c=e.checkBoxNumber,r=e.checkboxes,s=e.setCheckboxes,i=e.allCheckbox,o=e.isScheduleActive,l=e.isShowAvatar,u=e.isRecruiter,d=e.schedule,j=e.setIsShowUser,m=e.columnId,O=e.dayId,v=Object(b.c)(),p=Object(b.d)((function(e){return{userId:rt(e)}})).userId,h=function(e){var t=mr.splitHours(null===d||void 0===d?void 0:d.from,null===d||void 0===d?void 0:d.to);t.splice(t.length-1,1);var n=r.reduce((function(n,c,r){var a=c;return e!==r&&void 0!==e||(a=!c),a?(n.push(t[r]),n):n}),[]);v(Ir(n)),v(Sr(null===d||void 0===d?void 0:d.from))};return Object(a.useEffect)((function(){o||!1!==i.current.checked||s((function(e){return Object(f.a)(e.map((function(){return!1})))}))}),[o]),Object(a.useEffect)((function(){var e=r.some((function(e){return!1===e})),t=r.every((function(e){return!0===e}));e&&(i.current.checked=!1),t&&(i.current.checked=!0)}),[r]),Object(qe.jsxs)("span",{className:"time-line__inner",children:[Object(qe.jsx)("input",{type:"checkbox",className:Je()("time-line-checkbox__custom-select-all"),onClick:function(e){!function(e){s((function(t){return Object(f.a)(t.map((function(){return e.target.checked})))}))}(e),h(),e.stopPropagation()},id:"select-all-".concat(m,"-").concat(O),ref:i}),((null===d||void 0===d?void 0:d.user.id)===p||u)&&Object(qe.jsx)("label",{className:Je()("time-line__checkbox-all",{"time-line-checkbox--active":o}),htmlFor:"select-all-".concat(m,"-").concat(O),onClick:function(e){return e.stopPropagation()},children:Object(qe.jsx)(Xe,{className:Je()("icon__select-all-checkbox",{"time-line-checkbox--active":null===i||void 0===i||null===(t=i.current)||void 0===t?void 0:t.checked}),name:"check-arrow",size:9,fill:!0})}),null===(n=Object(f.a)(Array(c).keys()))||void 0===n?void 0:n.map((function(e,t){return Object(qe.jsxs)("div",{className:Je()("time-line__ceil"),children:[0===t&&l&&Object(qe.jsx)("div",{className:Je()("time-line__avatar"),onMouseEnter:function(){return j(!0)},onMouseLeave:function(){return j(!1)},children:Object(qe.jsx)(qc,{schedule:d,isMySchedule:(null===d||void 0===d?void 0:d.user.id)===p})}),Object(qe.jsx)("input",{className:"time-line-checkbox__custom",checked:r[t],onChange:function(e){return function(e,t){s((function(n){return Object(f.a)(n.map((function(n,c){return c===t?e.target.checked:n})))}))}(e,t)},onClick:function(e){e.stopPropagation(),h(t)},type:"checkbox",id:"checkbox-".concat(m,"-").concat(t,"-").concat(O)},"checkbox-".concat(t+1)),((null===d||void 0===d?void 0:d.user.id)===p||u)&&Object(qe.jsx)("label",{className:Je()("time-line-checkbox--active",{disable:!o},{"time-line-checkbox-avatar":0===t}),htmlFor:"checkbox-".concat(m,"-").concat(t,"-").concat(O),onClick:function(e){return e.stopPropagation()},children:Object(qe.jsx)(Xe,{className:Je()("icon__select-checkbox"),name:"check-arrow",size:9,fill:!0})})]})}))]})},Qa=["checkBoxNumber","style","schedule","columnId","dayId"],Xa={strategy:"absolute",modifiers:[{name:"flip",options:{fallbackPlacements:["top"]}}]};function Za(e){var t=e.checkBoxNumber,n=e.style,c=e.schedule,r=e.columnId,s=e.dayId,i=Object(We.a)(e,Qa),o=Object(a.useState)(!1),l=Object(it.a)(o,2),u=l[0],d=l[1],j=Object(a.useState)(new Array(t).fill(!1)),f=Object(it.a)(j,2),m=f[0],O=f[1],v=Object(a.useState)(!1),p=Object(it.a)(v,2),h=p[0],x=p[1],_=Object(a.useState)(!0),g=Object(it.a)(_,2),N=g[0],k=g[1],y=Object(a.useRef)(null),w=Object(a.useRef)(null),C=Object(b.c)(),S=Object(b.d)((function(e){return{isScheduleSlotActive:cn(e),selectedSchedule:rn(e),reservation:en(e),userId:rt(e),personPermissions:ct(e)}})),I=S.isScheduleSlotActive,R=S.selectedSchedule,T=S.reservation,D=S.userId,L=S.personPermissions,M=null!==c.user.pictureUrl,F=c.user.id===D,E=Ot(be,L),A=_c().width,P=Object(Be.a)({},n);P.height="inherit";var U=function(){w.current.checked=!1,d(!1)};return Object(a.useEffect)((function(){I||(U(),k(!0))}),[I]),Object(a.useEffect)((function(){C(Mr(m))}),[m]),Object(a.useEffect)((function(){(null===R||void 0===R?void 0:R.id)!==(null===c||void 0===c?void 0:c.id)&&(U(),k(!0))}),[null===c||void 0===c?void 0:c.id,R]),Object(a.useEffect)((function(){if(void 0!==T&&!("string"===typeof T)){var e=null===T||void 0===T?void 0:T.filter((function(e){return e.id===(null===R||void 0===R?void 0:R.id)}));if((null===e||void 0===e?void 0:e.length)>0){var t,n,c=mr.splitHours(null===(t=e[(null===e||void 0===e?void 0:e.length)-1])||void 0===t?void 0:t.from,null===(n=e[(null===e||void 0===e?void 0:e.length)-1])||void 0===n?void 0:n.to);O(new Array(c.length-1).fill(!1))}}}),[T]),Object(qe.jsx)(qe.Fragment,{children:Object(qe.jsx)(sn.a,{interactive:!0,maxWidth:"none",placement:"top",offset:[0,4],popperOptions:Xa,content:h&&Object(qe.jsx)("div",{className:Je()("schedule-week__users",{"time-line-checkbox--active":h}),children:Object(qe.jsx)(Ut,{booking:c,isImageSelected:M,isMyReservation:F})}),children:Object(qe.jsx)("button",Object(Be.a)(Object(Be.a)({className:Je()("time-line",{"time-line--active":u},{"time-line--foreign":!F&&!c.type},{"time-line--inactive":c.type}),onClick:function(){A<420&&(null===c||void 0===c?void 0:c.user.id)===D&&k(!1),(F||E)&&(d((function(e){return C(Rr(!u)),!e})),Object(b.b)((function(){C(Dr(c)),C(Lr(t)),C(Sr(null===c||void 0===c?void 0:c.from)),C(Ir(null))})))}},i),{},{style:P,ref:y,children:Object(qe.jsx)(Ka,{schedule:c,checkBoxNumber:t,checkboxes:m,setCheckboxes:O,allCheckbox:w,isScheduleActive:u,isShowAvatar:N,isRecruiter:E,columnId:r,dayId:s,setIsShowUser:x})}))})})}n(360);function es(e){var t=e.date,n=e.hours,c=e.isError;return Object(qe.jsxs)("div",{className:Je()("validation",{"validation--active":c}),children:[Object(qe.jsx)(Xe,{name:"error"}),Object(qe.jsxs)("p",{className:"time__container-text time__container-text--empty",children:["\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c ",t&&"\u0434\u0430\u0442\u0443"," ",t&&n&&"\u0438"," ",n&&"\u0432\u0440\u0435\u043c\u044f"," \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"]})]})}function ts(e){var t=e.from,n=e.to,c=e.setFrom,r=e.setTo,s=e.isError,i=Object(a.useCallback)((function(){c(null),r(null)}),[c,r]);return Object(qe.jsxs)(qe.Fragment,{children:[Object(qe.jsxs)("div",{className:"time__duration",children:[Object(qe.jsx)("p",{className:"time__title",children:"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430"}),Object(qe.jsxs)("div",{className:Je()("time__container",{"time__container--active":t},{"time__container--empty":s&&!t}),children:[t?Object(qe.jsx)("p",{className:"time--active",children:Object(dt.default)(t,"dd.MM.yyyy")}):Object(qe.jsx)("p",{className:Je()({"time__container-text--empty":t||s}),children:"\u0414\u0430\u0442\u0430 \u043e\u0442"}),t?Object(qe.jsx)(Xe,{className:"reservation__date-icon",name:"time-close",fill:!0,onClick:i}):Object(qe.jsx)(Xe,{className:"reservation__date-icon",name:"time-arrow-down",size:10})]})]}),Object(qe.jsx)(Xe,{className:"time__arrow-right",name:"arrow-right"}),Object(qe.jsxs)("div",{className:"time__duration",children:[Object(qe.jsx)("p",{className:"time__title",children:"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f"}),Object(qe.jsxs)("div",{className:Je()("time__container",{"time__container--active":n},{"time__container--empty":s&&!n}),children:[n?Object(qe.jsx)("p",{className:"time--active",children:Object(dt.default)(n,"dd.MM.yyyy")}):Object(qe.jsx)("p",{className:Je()({"time__container-text--empty":s}),children:"\u0414\u0430\u0442\u0430 \u0434\u043e"}),n?Object(qe.jsx)(Xe,{className:"reservation__date-icon",name:"time-close",fill:!0,onClick:function(){return r(null)}}):Object(qe.jsx)(Xe,{className:"reservation__date-icon",name:"time-arrow-down",size:10})]})]})]})}function ns(e){var t=e.isFooterVisible,n=e.startDate,c=e.startHours,r=e.setStartDate,s=e.setStartHours,i=e.endDate,o=e.endHours,l=e.setEndDate,u=e.setEndHours,d=e.isError,j=function(e){return mr.setAllowedTime(e)},b=Object(a.useRef)(j(6)),f=Object(a.useRef)(j(23)),m=Object(a.useMemo)((function(){return e=c,mr.setScheduledTime(e);var e}),[c]);return Object(qe.jsxs)("div",{className:Je()("reservation__data-picker-footer",{"res-active":t}),children:[Object(qe.jsx)("div",{className:"time",children:Object(qe.jsx)(ts,{from:n,to:i,setFrom:r,setTo:l,isError:d})}),Object(qe.jsx)("div",{className:"line"}),Object(qe.jsxs)("div",{className:"time",children:[Object(qe.jsxs)("div",{className:"time__duration",children:[Object(qe.jsx)("p",{className:"time__title",children:"\u0412\u0440\u0435\u043c\u044f \u043d\u0430\u0447\u0430\u043b\u0430"}),Object(qe.jsx)(Mn.a,{selected:c,onChange:function(e){return s(e)},showTimeSelect:!0,showTimeSelectOnly:!0,minTime:b.current,maxTime:f.current,timeIntervals:60,locale:"ru",timeCaption:"\u0412\u0440\u0435\u043c\u044f",dateFormat:"H:mm",customInput:Object(qe.jsx)(Hc,{text:"\u0412\u0440\u0435\u043c\u044f \u043e\u0442",iconName:"time-arrow-down",isError:d})})]}),Object(qe.jsx)(Xe,{className:"time__arrow-right",name:"arrow-right"}),Object(qe.jsxs)("div",{className:"time__duration",children:[Object(qe.jsx)("p",{className:"time__title",children:"\u0412\u0440\u0435\u043c\u044f \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f"}),Object(qe.jsx)(Mn.a,{selected:o,onChange:function(e){return u(e)},showTimeSelect:!0,showTimeSelectOnly:!0,minTime:m||b.current,maxTime:f.current,timeIntervals:60,locale:"ru",timeCaption:"\u0412\u0440\u0435\u043c\u044f",dateFormat:"H:mm",customInput:Object(qe.jsx)(Hc,{text:"\u0412\u0440\u0435\u043c\u044f \u0434\u043e",iconName:"time-arrow-down",isError:d})})]})]})]})}function cs(e){var t;return{isResponseError:void 0!==(null===e||void 0===e?void 0:e.error),isAccessForbidden:401===e.payload.status,isDataIncorrect:400===e.payload.status,isSchedulesIncorrect:void 0!==(null===(t=e.payload)||void 0===t?void 0:t.schedules)}}function rs(e,t,n){return e.find((function(e){return e.name===n&&t===e.parentLocationId}))}var as=function(e,t,n){var c=e.filter((function(e){return 0!==e.statusCode}));nc({length:null===c||void 0===c?void 0:c.length,incorrectSchedules:c,locationNumber:t,roomId:n})},ss=(n(361),n(362),new Date);function is(e){var t=e.showReservationData,n=Object(a.useState)(null),c=Object(it.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(null),o=Object(it.a)(i,2),l=o[0],u=o[1],d=Object(a.useState)(null),j=Object(it.a)(d,2),f=j[0],m=j[1],O=Object(a.useState)(null),h=Object(it.a)(O,2),x=h[0],_=h[1],g=Object(a.useState)(!0),N=Object(it.a)(g,2),k=N[0],y=N[1],w=Object(a.useState)(!1),C=Object(it.a)(w,2),S=C[0],I=C[1],R=Object(a.useState)(null),T=Object(it.a)(R,2),D=T[0],L=T[1],M=Object(a.useState)(""),F=Object(it.a)(M,2),E=F[0],A=F[1],P=Object(a.useState)(null),U=Object(it.a)(P,2),H=U[0],z=U[1],B=Object(a.useState)(null),q=Object(it.a)(B,2),V=q[0],W=q[1],Y=Object(a.useState)(!1),J=Object(it.a)(Y,2),G=J[0],$=J[1],K=Object(b.c)(),Q=_c().width,X=!r||!f,Z=!l||!x,ee=Object(tt.i)(),te=ee.number,ne=ee.id,ce=Object(b.d)((function(e){return{locations:Ee(e),cards:ot(e),profile:$c(e),personPermissions:ct(e),currentUserId:rt(e)}})),re=ce.locations,ae=ce.cards,se=ce.profile,ie=ce.personPermissions,oe=ce.currentUserId,le=Jc(re,ne),ue=rs(null===ae||void 0===ae?void 0:ae.rows,le,te),je=""===E,fe=Ot(be,ie),ve=Ot(de,ie),pe=Ot(me,ie),he=fe||ve||pe,xe=he?null===H||void 0===H?void 0:H.id:null===se||void 0===se?void 0:se.id,_e=function(){s(null),m(null),A(""),z(""),u(null),_(null)},ge=function(){var e=Object(p.a)(v.a.mark((function e(){var t,n,c,a,s,i,o,u,d;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!f||!r||!x||!l,K(Kn.setListOfErrorBookings(!1)),!t){e.next=5;break}return I(!0),e.abrupt("return",null);case 5:if(n={from:r,to:f,fromHours:l,toHours:x,roomId:null===ue||void 0===ue?void 0:ue.id,userId:xe},c=mr.prepareSchedule(n),!mr.checkScheduleData(l,x)){e.next=20;break}return e.next=10,K(Or({scheduleDays:c,hasPermissions:fe}));case 10:if(a=e.sent,s=cs(a),i=s.isSchedulesIncorrect,o=s.isDataIncorrect,u=s.isAccessForbidden,d=s.isResponseError,_e(),!o){e.next=16;break}return Xc("\u041e\u0448\u0438\u0431\u043a\u0430 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f","\u041f\u043e\u043f\u044b\u0442\u043a\u0430 \u0437\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u0430\u0442\u0443 \u0432 \u043f\u0440\u043e\u0448\u043b\u043e\u043c"),e.abrupt("return",null);case 16:if(!u){e.next=18;break}return e.abrupt("return",null);case 18:return!o&&i&&d?as(a.payload.schedules,te,ne):zn({title:"\u0421\u0442\u043e\u043b \u0437\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d",description:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043b\u0438 \u043c\u0435\u0441\u0442\u043e ",iconName:"success",type:"success"}),e.abrupt("return",a);case 20:return e.abrupt("return",null);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){f&&r&&x&&l&&I(!1)}),[f,r,x,l]),Object(a.useEffect)((function(){Q<Oe&&y(!1)}),[Q]),Object(a.useEffect)((function(){L(Q<=Oe||Q>1200?1:2)}),[Q]),Object(qe.jsx)("div",{className:Je()("reservation__data-picker",{"reservation__data-picker--active":t}),children:Object(qe.jsxs)("div",{className:"reservation__data-picker-group",children:[Object(qe.jsx)("div",{className:"reservation__data-picker-title",children:Object(qe.jsx)("p",{children:"\u0417\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043c\u0435\u0441\u0442\u043e"})}),Object(qe.jsx)(Mn.a,{selected:r,onChange:function(e){var t=Object(it.a)(e,2),n=t[0],c=t[1];s(n),m(c)},startDate:r,endDate:f,minDate:ss,locale:"ru",monthsShown:D,selectsRange:!0,showYearDropdown:!0,yearDropdownItemNumber:15,dateFormat:"d MMMM",dateFormatCalendar:"LLLL",scrollableYearDropdown:!0,onYearChange:_e,inline:!0}),Object(qe.jsx)("div",{className:Je()("line-tablet",{"res-active":k})}),Object(qe.jsx)(ns,{endDate:f,setEndDate:m,endHours:x,setEndHours:_,setStartDate:s,startDate:r,startHours:l,setStartHours:u,isFooterVisible:k,isError:S}),he&&Object(qe.jsx)("div",{className:"line"}),he&&Object(qe.jsxs)(qe.Fragment,{children:[Object(qe.jsx)("p",{className:"time__title",children:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a"}),Object(qe.jsx)(Ja,{className:Je()("calendar__time-group",{"calendar__time-group--searching":!je}),iconName:je?"loupe":"close",placeholder:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430",value:E,setValue:A,setModalActive:$,setUsers:W,children:G&&Object(qe.jsx)($a,{users:V,close:$,setValue:A,selectUser:z,currentUserId:oe})})]}),Object(qe.jsx)(es,{date:X,hours:Z,isError:S}),Object(qe.jsx)($e,{className:"ctrl-button--color-blue reservation__btn",type:"submit",onClick:ge,children:"\u0417\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})})}var os=function(e,t){for(var n=e.user.id===t,c=new Date(e.from).getHours()-1,r=new Date(e.to).getHours(),a=[],s=5,i=0;i<18;i++)(s+=1)>c&&s<=r?a.push({name:e.user.firstName,surname:e.user.lastName,hour:s,img:e.user.pictureUrl,backgroundColor:n?"":"#e27d60"}):a.push("");return a},ls=function(e,t){return t?{position:"absolute",top:39*e,width:"100%",backgroundColor:t}:{position:"absolute",top:39*e,width:"100%"}},us=(n(363),n(364),function(){var e=Object(a.useState)([]),t=Object(it.a)(e,2),n=t[0],c=t[1],r=Object(b.d)((function(e){return{locations:Ee(e),cards:ot(e),currentDate:Xt(e),userId:rt(e)}})),s=r.locations,i=r.cards,o=r.currentDate,l=r.userId,u=Object(b.c)(),d=Object(tt.i)(),j=d.number,f=d.id,m=mr.generateHours(),O=Jc(s,f),h=rs(null===i||void 0===i?void 0:i.rows,O,j),x=Object(a.useMemo)((function(){var e;return null===n||void 0===n||null===(e=n.rows)||void 0===e?void 0:e.map((function(e){return os(e,l)}))}),[null===n||void 0===n?void 0:n.rows]),_=function(){var e=Object(p.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!h){e.next=7;break}return t=_n(24,{locationIds:[null===h||void 0===h?void 0:h.id],dateFrom:Object(kn.a)(Object(or.default)(o,6)),dateTo:Object(kn.a)(Object(or.default)(o,23))},""),e.next=5,Gr.getDetailedSchedule(t);case 5:n=e.sent,c(n);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Xc("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438","\u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){_()}),[null===h||void 0===h?void 0:h.id,u,o]),Object(qe.jsxs)("div",{className:"detailed-schedule",children:[Object(qe.jsx)("div",{className:"detailed-schedule__time",children:m.map((function(e,t){return Object(qe.jsx)("div",{className:"detailed-schedule__hour",children:Object(dt.default)(e,"HH:mm")},t)}))}),Object(qe.jsx)("div",{className:"detailed-schedule__bookings",children:null===x||void 0===x?void 0:x.map((function(e){return e.map((function(e,t){return""!==e?Object(qe.jsxs)("div",{className:"detailed-schedule__user",style:ls(t,e.backgroundColor),children:[Object(qe.jsx)("img",{className:"detailed-schedule__user-icon",src:e.img,alt:"user"}),Object(qe.jsxs)("div",{className:"detailed-schedule__user-name",children:[e.surname," ",e.name]})]},t):null}))}))})]})}),ds=s.a.forwardRef((function(e,t){var n=e.arrWeek,c=Object(b.d)(tn),r=Object(a.useState)(null),s=Object(it.a)(r,2),i=s[0],o=s[1];return Object(a.useEffect)((function(){var e=n.find((function(e){return mr.checkDates(e,c)})),t=n.indexOf(e);return o(t),-1===t&&o(null),function(){o(null)}}),[c]),n.map((function(e,n){return Object(qe.jsx)("div",{className:Je()("schedule-weeks__header-day",{"schedule-weeks__header-day--active":n===i}),ref:t,children:Object(qe.jsxs)("div",{className:"schedule-weeks__header-day-wrapper",children:[Object(qe.jsx)("div",{className:"schedule-weeks__header-day-name",children:vt(e,"EEEEEE")}),Object(qe.jsx)("span",{className:"schedule-weeks__header-day-data",children:vt(e,"dd")}),Object(qe.jsx)("span",{className:"schedule-weeks__header-day-month",children:vt(e,"LLL")})]})},vt(e,"dd"))}))})),js=Array.from(Array(17).keys()),bs=function(){return Object(qe.jsx)(qe.Fragment,{children:js.map((function(e){return Object(qe.jsx)("div",{className:"schedule-weeks__booking-line"},e)}))})};function fs(e){var t=e.day,n=e.dayId,c=e.showCardTime,r=e.bookings,s=(Object(b.d)(rt),Object(a.useRef)([])),i=Object(a.useMemo)((function(){var e,n,c=null===r||void 0===r?void 0:r.filter((function(e){return Object(jr.default)(t,Object(bt.default)(e.from))})),a=mr.calculateSchedulePosition(c,40);(null===a||void 0===a||null===(e=a.arr)||void 0===e?void 0:e.length)>0&&(s.current=null===a||void 0===a||null===(n=a.arr)||void 0===n?void 0:n.reduce((function(e,t,n){return t.userID,Object.assign(e,Object(De.a)({},n,{marginTop:null===t||void 0===t?void 0:t.top,height:null===t||void 0===t?void 0:t.height}))}),{}));return c}),[r]);return Object(qe.jsx)("div",{className:"schedule-weeks__booking-column",children:(null===i||void 0===i?void 0:i.length)>0&&i.map((function(e,t){var r;return Object(qe.jsx)(Za,{checkBoxNumber:(null===(r=s.current[t])||void 0===r?void 0:r.height)/40,style:s.current[t],showCardTime:c,schedule:e,columnId:t,dayId:n},"".concat(t,"-").concat(n))}))})}var ms=function(){var e=mr.generateHours(),t=Object(b.d)(nn),n=Object(a.useState)([]),c=Object(it.a)(n,2),r=c[0],s=c[1];return Object(a.useEffect)((function(){if(null!==t){var n=t.reduce((function(t,n){var c=null===e||void 0===e?void 0:e.findIndex((function(e){return mr.checkTimes(e,n)}));return-1!==c&&t.push(c),t}),[]);s(n)}else s(null);return function(){s(null)}}),[t]),Object(qe.jsx)("div",{className:"schedule-weeks__place-time",children:null===e||void 0===e?void 0:e.map((function(e,t){return Object(qe.jsx)("div",{className:Je()("schedule-weeks__place-hour",{"schedule-weeks__header-day--active":null===r||void 0===r?void 0:r.includes(t)}),children:Object(dt.default)(e,"H:mm")},e.id)}))})},Os=function(e){var t=e.showReservationData,n=e.arrWeek,c=Object(b.d)((function(e){return{currentDate:Xt(e),allReservationsList:Zt(e),listOfReservations:en(e),cards:ot(e),locations:Ee(e),profile:$c(e)}})),r=c.currentDate,s=c.allReservationsList,i=c.listOfReservations,o=c.cards,l=c.locations,u=c.profile,d=Object(tt.i)(),j=d.number,f=Jc(l,d.id),m=rs(null===o||void 0===o?void 0:o.rows,f,j),O=Object(b.c)(),h=r&&m,x=Object(a.useCallback)(Object(p.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(vr(mr.createParams(null===m||void 0===m?void 0:m.id,r)));case 2:case"end":return e.stop()}}),e)}))),[r,null===m||void 0===m?void 0:m.id,O,i,u]);return Object(a.useEffect)((function(){h&&x()}),[x,h]),Object(qe.jsxs)("div",{className:Je()("schedule-weeks",{"schedule-weeks--none":t}),children:[Object(qe.jsxs)("div",{className:"schedule-weeks__place",children:[Object(qe.jsxs)("div",{className:"schedule-weeks__place-name",children:["\u041c",j]}),Object(qe.jsx)(ms,{})]}),Object(qe.jsxs)("div",{className:"schedule-weeks__content",children:[Object(qe.jsx)("div",{className:"schedule-weeks__header",children:Object(qe.jsx)(ds,{arrWeek:n})}),Object(qe.jsxs)("div",{className:"schedule-weeks__booking",children:[Object(qe.jsx)("div",{className:"schedule-weeks__booking-wrapper-line",children:Object(qe.jsx)(bs,{})}),Object(qe.jsx)("div",{className:"schedule-weeks__booking-wrapper-column",children:n.map((function(e,t){return Object(qe.jsx)(qe.Fragment,{children:Object(qe.jsx)(fs,{day:n[t],bookings:s,dayId:t},e.id)})}))})]})]})]})},vs=n(232),ps=n(231),hs=n(225),xs=function(e,t){return Object(vs.default)(e,Object(ya.default)(t))||Object(ps.default)(e,Object(hs.default)(t),{weekStartsOn:1})?{color:"#CFD2D3"}:{color:"#3C3C3B"}};function _s(e){var t=e.ind,n=e.day,c=e.scheduleMonth,r=Object(b.c)(),s=Object(tt.h)(),i=hn(),o=Object(tt.j)(),l=Object(b.d)(Xt),u=Object(a.useMemo)((function(){return n&&(null===c||void 0===c?void 0:c.rows.length)?null===c||void 0===c?void 0:c.rows.filter((function(e){return Object(jr.default)(n,Object(bt.default)(e.from))})):[]}),[n,c]);return Object(qe.jsxs)("div",{className:"schedule-month__day",onTouchStart:function(){u.length&&(r(yr(Object(bt.default)(u[0].from))),sessionStorage.setItem(ve,u[0].from),s.push(Object(tt.f)(S,{id:i,number:o.params.number,mode:ge})))},children:[t<7?Object(qe.jsx)("div",{className:"schedule-month__day-week",children:vt(n,"EEEEEE")}):null,Object(qe.jsx)("span",{className:"schedule-month__data",style:xs(n,l),children:vt(n,"d")}),Object(qe.jsx)("span",{className:"schedule-month__current-month",style:xs(n,l),children:vt(n,"LLL")}),Object(qe.jsx)(on,{bookings:u})]})}var gs=n(36),Ns=(n(365),n(366),function(){var e=Object(b.c)(),t=Object(b.d)((function(e){return{cards:ot(e),locations:Ee(e),userId:rt(e),currentDate:Xt(e),scheduleMonth:Br(e)}})),n=t.cards,c=t.locations,r=t.userId,s=t.currentDate,i=t.scheduleMonth,o=Object(tt.i)(),l=o.number,u=Jc(c,o.id),d=rs(null===n||void 0===n?void 0:n.rows,u,l),j=Object(a.useMemo)((function(){return{start:Object(ur.default)(Object(ya.default)(s),{weekStartsOn:1}),end:Object(gs.default)(Object(ur.default)(Object(ya.default)(s),{weekStartsOn:1}),41)}}),[s]),f=Object(a.useMemo)((function(){return Object(ar.a)({start:j.start,end:j.end})}),[j]);return Object(a.useEffect)((function(){(null===d||void 0===d?void 0:d.id)&&e(zr(_n(100,{locationIds:[null===d||void 0===d?void 0:d.id],dateFrom:Object(kn.a)(j.start),dateTo:Object(kn.a)(j.end)})))}),[null===d||void 0===d?void 0:d.id,e,r,j]),Object(qe.jsx)("div",{className:"schedule-month",children:f.map((function(e,t){return Object(qe.jsx)(_s,{ind:t,day:e,scheduleMonth:i},e)}))})}),ks=(n(367),function(e){var t,n,c,r,s=e.isScheduleActive,i=Object(tt.j)(),o=Object(b.d)(Xt),l=Object(b.c)(),u=Object(ar.a)({start:Object(ur.default)(o,{weekStartsOn:1}),end:Object(dr.default)(o,{weekStartsOn:1})});Object(a.useEffect)((function(){l(Cr(u))}),[u,l]);var d=Object(tt.j)(i.path),j=(null===d||void 0===d?void 0:d.params.mode)===he,f=(null===d||void 0===d?void 0:d.params.mode)===xe,m=(null===d||void 0===d?void 0:d.params.mode)===_e,O=(null===d||void 0===d?void 0:d.params.mode)===ge,v=Object(tt.i)(),p=v.number,h=v.id,x=Object(b.d)(Jn),_=Object(b.d)(en)||[],g=new Date(null===(t=_[0])||void 0===t?void 0:t.from).getDate()||"",N=new Date(null===(n=_[_.length-1])||void 0===n?void 0:n.from).getDate()||"",k=qn[new Date(null===(c=_[0])||void 0===c?void 0:c.from).getMonth()]||"",y=qn[new Date(null===(r=_[_.length-1])||void 0===r?void 0:r.from).getMonth()]||"";return Object(qe.jsx)("div",{className:"schedule",children:Object(qe.jsxs)("div",{className:Je()("schedule__reservation",{"schedule__reservation--desktop":s}),children:[Object(qe.jsx)(qs,{}),x&&Object(qe.jsxs)("div",{className:"schedule__reservation__info info-schedule",children:[Object(qe.jsxs)("p",{children:["\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0441\u0442\u0430\u0442\u0443\u0441\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u043c\u0435\u0441\u0442\u0430 \u041c".concat(p," \u0432 \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u0435 ").concat(h,":"),"\xa0"]}),Object(qe.jsx)("p",{className:"info-schedule--addition",children:"\u043f\u0435\u0440\u0438\u043e\u0434 \u0441 ".concat(g," ").concat(k," \u043f\u043e ").concat(N," ").concat(y)}),Object(qe.jsx)($e,{className:"info-schedule__btn",onClick:function(){l(Kn.setListOfErrorBookings(!1))},children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u0438\u0435"})]}),Object(qe.jsx)(tt.d,{children:Object(qe.jsxs)(tt.b,{children:[j&&Object(qe.jsx)(Os,{arrWeek:u,showReservationData:s}),f&&Object(qe.jsx)(Ns,{}),m&&Object(qe.jsx)($s,{}),O&&Object(qe.jsx)(us,{})]})})]})})});function ys(){var e=Object(b.d)(Qt);return Object(qe.jsxs)("div",{className:"reservation",children:[Object(qe.jsx)(is,{showReservationData:e}),Object(qe.jsx)(ks,{isScheduleActive:e})]})}var ws=function(e){var t=e.locations,n=e.id,c=e.setDropdownActive,r=Object(b.c)(),a=Object(tt.h)(),s=Object(tt.i)().mode;return Object(qe.jsx)("div",{className:"search-filter__content",children:null===t||void 0===t?void 0:t.map((function(e){return Object(qe.jsxs)("button",{className:"search-filter__content-btn",onClick:function(){r(Pt.setCurrentCard(e)),a.push(Object(tt.f)(S,{id:n,number:e.name,mode:s})),c(!1)},children:[Object(qe.jsx)("span",{className:"search-filter__room",children:n}),Object(qe.jsxs)("span",{className:"search-filter__place",children:["/ \u041c",e.name]})]},e.id)}))})},Cs=function(e){var t=e.text,n=e.url;return Object(qe.jsx)(Ze.b,{to:n,exact:!0,className:"schedule-dashboard-date-btn schedule-dashboard__select-time-btn",activeClassName:"schedule-dashboard-date-btn--blue",children:t})};function Ss(){var e=Object(b.c)(),t=Object(tt.i)(),n=t.id,c=t.number;return Object(qe.jsx)(qe.Fragment,{children:Object(qe.jsxs)("div",{className:"schedule-dashboard__box",children:[Object(qe.jsxs)("div",{className:"schedule-dashboard__date",children:[Object(qe.jsx)("button",{className:"schedule-dashboard-date-btn schedule-dashboard__date-btn schedule-dashboard__date-btn-margin",onClick:function(){sessionStorage.setItem(ve,Object(kn.a)(new Date)),e(yr(new Date))},children:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f"}),Object(qe.jsx)(An,{})]}),Object(qe.jsxs)("div",{className:"schedule-dashboard__select-time",children:[Object(qe.jsx)(Cs,{text:"\u041d\u0435\u0434\u0435\u043b\u044f",url:Object(tt.f)(S,{id:n,number:c,mode:he})}),Object(qe.jsx)(Cs,{text:"\u041c\u0435\u0441\u044f\u0446",url:Object(tt.f)(S,{id:n,number:c,mode:xe})}),Object(qe.jsx)(Cs,{text:"\u0413\u043e\u0434",url:Object(tt.f)(S,{id:n,number:c,mode:_e})})]})]})})}function Is(){var e=Object(b.d)(cn),t=_c().width<1200;return Object(qe.jsx)(qe.Fragment,{children:e?Object(qe.jsxs)(qe.Fragment,{children:[t&&Object(qe.jsx)(Bs,{}),Object(qe.jsx)(Fs,{})]}):Object(qe.jsxs)(qe.Fragment,{children:[Object(qe.jsx)(Bs,{}),Object(qe.jsx)(Ss,{})]})})}function Rs(e,t,n){return Ts.apply(this,arguments)}function Ts(){return(Ts=Object(p.a)(v.a.mark((function e(t,n,c){var r,a,s,i,o,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={ids:[null===n||void 0===n?void 0:n.id]},e.next=3,c(pr(r));case 3:if(a=e.sent,s=2===t,i=cs(a),o=i.isAccessForbidden,l=i.isDataIncorrect,!(s||o||l)){e.next=8;break}return e.abrupt("return",null);case 8:return zn({title:"\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u043e",description:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0438\u043b\u0438 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435",iconName:"success",type:"success"}),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ds(e,t,n){return Ls.apply(this,arguments)}function Ls(){return(Ls=Object(p.a)(v.a.mark((function e(t,n,c){var r,a,s,i,o,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(Or({scheduleDays:t,hasPermissions:c}));case 2:if(r=e.sent,a=cs(r),s=a.isSchedulesIncorrect,i=a.isDataIncorrect,o=a.isAccessForbidden,l=a.isResponseError,!i&&!o){e.next=6;break}return e.abrupt("return",null);case 6:return!i&&s&&l?as(r.payload.schedules):zn({title:"\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u043e",description:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u0438 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435",iconName:"success",type:"success"}),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ms(){return Ms=Object(p.a)(v.a.mark((function e(t,n,c){var r,a,s,i,o,l,u,d,j,b,f=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>3&&void 0!==f[3]&&f[3],a=mr.splitHours(t.from,t.to),s=mr.setScheduledIndex(n),a.length-1!==s.length){e.next=5;break}return e.abrupt("return",Rs(void 0,t,c));case 5:if(i=s[s.length-1]===a.length-2,o=s[0]>0&&s[s.length-1]<a.length-2,l=a[s[0]],u=Object(fr.default)(a[s[s.length-1]],1),i?(mr.deleteScheduleEnd(a,s),mr.deleteEndCheckboxes(n,s)):(mr.deleteScheduleStart(a,s),mr.deleteStartCheckboxes(n,s)),!o){e.next=16;break}return d=mr.splitIntoTwoSchedule(t.from,t.to,a,l,u,null===t||void 0===t?void 0:t.table,null===t||void 0===t?void 0:t.user.id),e.next=14,Rs(d.length,t,c);case 14:return c(Tr(!0)),e.abrupt("return",Ds(d,c,r));case 16:return j={from:a[0],to:a[a.length-1],fromHours:a[0],toHours:a[a.length-1],roomId:null===t||void 0===t?void 0:t.table.id,scheduleId:null===t||void 0===t?void 0:t.id,userId:null===t||void 0===t?void 0:t.user.id},b=mr.prepareSchedule(j),c(Tr(!0)),e.abrupt("return",Ds(b,c,r));case 20:case"end":return e.stop()}}),e)}))),Ms.apply(this,arguments)}n(368);function Fs(){var e=Object(a.useState)(!1),t=Object(it.a)(e,2),n=t[0],c=t[1],r=Object(b.c)(),s=Object(b.d)((function(e){return{schedule:rn(e),checkboxes:an(e),personPermissions:ct(e)}})),i=s.schedule,o=s.checkboxes,l=s.personPermissions,u=_c().width,d=Object(a.useMemo)((function(){return o.includes(!0)}),[o]),j=Ot(be,l),f=d?"1 \u0441\u043b\u043e\u0442":"0 \u0441\u043b\u043e\u0442\u043e\u0432",m=u<427?"\u0423\u0434\u0430\u043b\u0438\u0442\u044c":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0431\u0440\u043e\u043d\u044c",O=u<427?"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c":"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u0438\u0435",v=function(){r(Ir(null)),r(Sr(null)),r(Rr(!1))},p=function(){return c(!1)};return Object(qe.jsxs)(qe.Fragment,{children:[Object(qe.jsxs)("div",{className:"delete-schedule",children:[Object(qe.jsx)("div",{className:"delete-schedule__text-group",children:Object(qe.jsxs)("p",{className:"delete-schedule__title",children:["\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u043e \u0441\u043b\u043e\u0442\u043e\u0432 \u0432\u0440\u0435\u043c\u0435\u043d\u0438: ",Object(qe.jsxs)("p",{className:"delete-schedule__count",children:[" ",f]})]})}),Object(qe.jsxs)("div",{className:"delete-schedule__button-group",children:[Object(qe.jsx)("button",{className:"delete-schedule__button delete-schedule__button--primary",onClick:v,children:O}),Object(qe.jsx)("button",{className:"delete-schedule__button delete-schedule__button--danger",onClick:function(){return d?(c(!0),null):(Xc("\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0441\u043b\u043e\u0442\u0430","\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043b\u043e\u0442\u044b \u0432\u0440\u0435\u043c\u0435\u043d\u0438, \u0447\u0442\u043e\u0431\u044b \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0431\u0440\u043e\u043d\u044c"),null)},children:m})]})]}),n&&Object(qe.jsx)(ln,{title:Object(qe.jsx)("span",{children:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0431\u0440\u043e\u043d\u0438 "}),onClose:p,isDeleteForm:!0,children:Object(qe.jsx)("div",{className:"delete-card",children:Object(qe.jsx)(wn,{onClose:p,action:function(){1===o.length?Rs(void 0,i,r):function(e,t,n){Ms.apply(this,arguments)}(i,o,r,j),v()},title:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0431\u0440\u043e\u043d\u044c \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0445 \u0441\u043b\u043e\u0442\u043e\u0432?"})})})]})}var Es=Object(a.createContext)({checkedRooms:[],checkedPlaces:[],locations:[],setCheckedRooms:function(){return null},setCheckedPlaces:function(){return null}}),As=function(){return Object(a.useContext)(Es)},Ps=function(e){var t=e.checkedRooms,n=e.checkedPlaces,c=e.setCheckedPlaces,r=e.searchText,s=Object(b.c)(),i=Object(b.d)((function(e){return{locations:Ee(e)}})).locations;Object(a.useEffect)((function(){s(Ct(kt())).finally((function(){return s(Rt())}))}),[s,i]);var o=Object(b.d)(ot),l=Object(a.useMemo)((function(){if(i&&0!==o.rows.length){var e,t=[],n=Object(_t.a)(i);try{var c=function(){var n=e.value;t.push.apply(t,Object(f.a)(o.rows.filter((function(e){return e.parentLocationId===n.id})).map((function(e){return{location:n.name,place:e.name}}))))};for(n.s();!(e=n.n()).done;)c()}catch(r){n.e(r)}finally{n.f()}return t}return[]}),[o,i]);return Object(qe.jsx)("div",{className:"search-filter__content",children:l.filter((function(e){return e.place.includes(r)})).filter((function(e){return t.length<=0?l:t.includes(e.location)})).map((function(e,t){return Object(qe.jsxs)("label",{className:"checkbox-inner",children:[Object(qe.jsx)("input",{className:"checkbox-inner__field",type:"checkbox",onChange:function(){return t=e,void(n.some((function(e){return t.location===e.location&&t.place===e.place}))?c(n.filter((function(e){return e.location!==t.location||e.place!==t.place}))):c([].concat(Object(f.a)(n),[t])));var t},checked:n.some((function(t){return t.location===e.location&&t.place===e.place}))}),Object(qe.jsxs)("span",{className:"custom-checkbox checkbox-inner__custom-checkbox",children:[e.location," / ",e.place]})]},t)}))})},Us=(n(369),function(e){var t=e.text,n=e.className,c=e.openFilters;return Object(qe.jsx)("div",{className:Je()("back",n),children:Object(qe.jsxs)("button",{className:"back__btn",onClick:c,children:[Object(qe.jsx)(Xe,{className:"back__btn-icon",name:"back",size:12}),t]})})}),Hs=(n(370),s.a.forwardRef((function(e,t){var n,c=e.customClass,r=e.isDropdownActive,s=e.setDropdownActive,i=e.openFilters,o=e.showSearchFilter,l=Object(a.useState)(""),u=Object(it.a)(l,2),d=u[0],j=u[1],f=null===(n=Object(tt.i)())||void 0===n?void 0:n.id,m=Object(b.d)(ot),O=Object(b.c)(),v=hn(),p=Object(b.d)(Ae(v)),h=As(),x=h.checkedPlaces,_=h.checkedRooms,g=h.setCheckedPlaces;Object(a.useEffect)((function(){f&&O(Ct(kt(null===p||void 0===p?void 0:p.id)))}),[null===p||void 0===p?void 0:p.id,O,p,f]);var N=Object(a.useMemo)((function(){return m.rows.filter((function(e){return e.name.includes(d)}))}),[m.rows,d]);return Object(qe.jsxs)("div",{className:Je()("search-filter",c,{"search-filter--active":r}),ref:t,children:[Object(qe.jsx)(Us,{text:"\u0420\u0430\u0431\u043e\u0447\u0435\u0435 \u043c\u0435\u0441\u0442\u043e",openFilters:o}),Object(qe.jsxs)("div",{className:"search-filter__wrapper",children:[Object(qe.jsx)("div",{className:"search-filter__field-box",children:Object(qe.jsx)("input",{className:"search-filter__field",type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043c\u0435\u0441\u0442\u0430",value:d,onChange:function(e){return j(e.target.value)}})}),Object(qe.jsx)("div",{className:"search-filter__location",children:f?Object(qe.jsx)(ws,{locations:N,id:f,setDropdownActive:s,searchText:d}):Object(qe.jsx)(Ps,{checkedRooms:_,checkedPlaces:x,setCheckedPlaces:g,searchText:d})})]}),Object(qe.jsx)("button",{className:"action-btn location-filter__action-btn",onClick:i,children:"\u0423\u043a\u0430\u0437\u0430\u0442\u044c"})]})}))),zs=s.a.forwardRef((function(){var e=Object(a.useState)(!1),t=Object(it.a)(e,2),n=t[0],c=t[1],r=Object(a.useRef)(null),s=Object(a.useRef)(null),i=Object(tt.i)(),o=i.number,l=i.id;return Nt({ref:r,cb:function(){return c(!1)},exclude:s}),Object(qe.jsxs)("div",{className:"schedule-dashboard__place",children:[Object(qe.jsxs)("button",{className:"schedule-dashboard__place-btn",onClick:function(){c((function(e){return!e}))},ref:s,children:[Object(qe.jsx)(Xe,{className:"schedule-dashboard__place-btn-icon",name:"pin"}),Object(qe.jsxs)("span",{className:"schedule-dashboard__current-location",children:[Object(qe.jsx)("span",{className:"schedule-dashboard__current-room",children:l}),Object(qe.jsxs)("span",{className:"schedule-dashboard__current-place",children:["/ M",o]})]}),Object(qe.jsx)(Xe,{className:"schedule-dashboard__place-btn-arrow",name:"arrow-down",size:16})]}),Object(qe.jsx)(Hs,{isDropdownActive:n,setDropdownActive:c,ref:r,customClass:"schedule-dashboard__filter"})]})}));function Bs(){var e=Object(b.c)();return Object(qe.jsxs)(qe.Fragment,{children:[Object(qe.jsx)(zs,{}),Object(qe.jsx)(Yt,{className:"schedule-dashboard__plus",onClick:function(){return e(wr(!0))},icon:Object(qe.jsx)(Xe,{className:"schedule-dashboard__plus-icon",name:"plus",size:36})})]})}var qs=function(){var e=Object(tt.h)(),t=Object(tt.i)().id;return Object(qe.jsx)("div",{className:"schedule-dashboard",children:Object(qe.jsxs)("div",{className:"schedule-dashboard__wrapper",children:[Object(qe.jsx)("button",{className:Je()("schedule-dashboard-date-btn schedule-dashboard__date-btn schedule-dashboard__date-btn-margin schedule-dashboard__back-btn"),onClick:function(){e.push("/locations/".concat(t))},children:"\u041d\u0430\u0437\u0430\u0434"}),Object(qe.jsx)(Is,{})]})})},Vs=n(228),Ws=function(e){var t=e.day,n=e.month,c=e.listOfReservations,r=Object(b.d)(Yn),s=Object(b.d)(Jn),i=Object(b.d)(rt),o=Object(b.c)(),l=Object(tt.h)(),u=hn(),d=Object(tt.j)(),j=t&&n?Object(Vs.default)(t,new Date(n)):[],f=0,m=3,O=5,v=Object(a.useMemo)((function(){return t&&(null===r||void 0===r?void 0:r.rows.length)?j&&(null===r||void 0===r?void 0:r.rows.filter((function(e){return Object(jr.default)(t,Object(bt.default)(e.from))}))):[]}),[t,j,null===r||void 0===r?void 0:r.rows]),p=Object(a.useMemo)((function(){return!(!t||!(null===r||void 0===r?void 0:r.rows.length))&&(j&&(null===r||void 0===r?void 0:r.rows.filter((function(e){return Object(jr.default)(t,new Date(e.from))&&1===e.type})).length)>0)}),[t,j,null===r||void 0===r?void 0:r.rows]),h=v.length>0,x=Object(a.useMemo)((function(){return t&&(null===c||void 0===c?void 0:c.length)?null===c||void 0===c?void 0:c.filter((function(e){return Object(jr.default)(t,new Date(e.from))&&e.statusCode===f})):[]}),[t,c]).length>0,_=Object(a.useMemo)((function(){return t&&(null===c||void 0===c?void 0:c.length)?null===c||void 0===c?void 0:c.filter((function(e){return Object(jr.default)(t,new Date(e.from))&&e.statusCode>f&&e.statusCode!==m})):[]}),[t,c]).length>0,g=Object(a.useMemo)((function(){return t&&(null===c||void 0===c?void 0:c.length)?null===c||void 0===c?void 0:c.filter((function(e){return Object(jr.default)(t,new Date(e.from))&&e.statusCode===O&&e.statusCode!==m})):[]}),[t,c]).length>0,N=Object(a.useMemo)((function(){return zt()(v,"user.id")}),[v]),k=Object(a.useMemo)((function(){return t&&(null===c||void 0===c?void 0:c.length)?Object(jr.default)(t,new Date(c.find((function(e){return e.statusCode!==m})).from)):null}),[t,c]),y=Object(a.useMemo)((function(){var e;return t&&(null===c||void 0===c?void 0:c.length)?Object(jr.default)(t,new Date(null===(e=c[c.length-1])||void 0===e?void 0:e.from)):null}),[t,c]);return Object(qe.jsx)(sn.a,{interactive:!0,placement:"bottom-start",offset:[0,1],interactiveDebounce:10,popperOptions:{strategy:"absolute",modifiers:[{name:"flip",options:{fallbackPlacements:["top","left"]}}]},content:v.length&&Object(qe.jsx)("div",{className:"users schedule-month__users",children:N.map((function(e){return Object(qe.jsx)(Ut,{booking:e,bookings:v,isMonth:!0,isMyReservation:e.user.id===i},e.id)}))}),children:Object(qe.jsx)("div",{className:"month__day",style:h?{color:"#00A1DF"}:xs(t,n),onTouchStart:function(){v.length&&(o(Xr(Object(bt.default)(v[0].from))),l.push("/locations/".concat(u,"/").concat(d.params.number,"/calendar/details")))},children:Object(qe.jsx)("div",{className:Je()("month__day-wrapper",{"month__day-wrapper--first":k},{"month__day-wrapper--last":y},{"month__day-wrapper--active":h},{"month__day-wrapper--inact":p},{"month__day-wrapper--error":_&&s&&j},{"month__day-wrapper--success":x&&s&&j},{"month__day-wrapper--inactive":g&&s&&j}),children:vt(t,"d")})})})},Ys=function(e){var t=e.month,n=Object(ur.default)(Object(ya.default)(t),{weekStartsOn:1}),c=Object(b.d)(en),r=Object(a.useMemo)((function(){return Object(ar.a)({start:n,end:Object(gs.default)(n,41)})}),[n]);return Object(qe.jsxs)("div",{className:"month schedule-year__month",children:[r.map((function(e,t){return Object(qe.jsx)(a.Fragment,{children:t<7?Object(qe.jsx)("div",{className:"month__day-week",children:vt(e,"EEEEEE")}):null},t)})),r.map((function(e,n){return Object(qe.jsx)(Ws,{day:e,month:t,listOfReservations:c},n)}))]})},Js=n(397),Gs=n(398),$s=(n(371),n(372),function(){var e=Object(b.c)(),t=Object(b.d)((function(e){return{cards:ot(e),locations:Ee(e),currentDate:Xt(e)}})),n=t.cards,c=t.locations,r=t.currentDate,s=Object(tt.i)(),i=s.number,o=s.id;Object(a.useEffect)((function(){return function(){e(Kn.setListOfErrorBookings(!1))}}),[e]);var l=Jc(c,o),u=rs(null===n||void 0===n?void 0:n.rows,l,i),d=Object(a.useMemo)((function(){return{start:Object(_a.default)(r),end:Object(Js.a)(r)}}),[r]),j=Object(a.useMemo)((function(){return Object(Gs.a)({start:d.start,end:d.end})}),[d]);return Object(a.useEffect)((function(){(null===u||void 0===u?void 0:u.id)&&e(Wn(_n(500,{locationIds:[null===u||void 0===u?void 0:u.id],dateFrom:Object(kn.a)(d.start),dateTo:Object(kn.a)(d.end)})))}),[null===u||void 0===u?void 0:u.id,e,d]),Object(qe.jsx)("div",{className:"schedule-year",children:Object(qe.jsx)("div",{className:"schedule-year__wrapper",children:j.map((function(e,t){return Object(qe.jsxs)("div",{className:"schedule-year__box",children:[Object(qe.jsxs)("p",{className:"schedule-year__name",children:[vt(e,"LLLL"),Object(qe.jsx)("span",{className:"schedule-year__date",children:vt(e,"y")})]}),Object(qe.jsx)(Ys,{month:e})]},t)}))})})}),Ks=(n(373),s.a.forwardRef((function(e,t){var n=e.isBurgerOpen,c=e.setIsBurgerOpen,r=Object(a.useState)(!1),s=Object(it.a)(r,2),i=s[0],o=s[1],l=Object(a.useState)(!1),u=Object(it.a)(l,2),d=u[0],j=u[1],f=Object(a.useState)(""),m=Object(it.a)(f,2),O=m[0],v=m[1],p=Object(a.useState)(!1),h=Object(it.a)(p,2),x=h[0],_=h[1],g=Object(a.useState)(null),N=Object(it.a)(g,2),k=N[0],y=N[1],w=Object(a.useState)(null),S=Object(it.a)(w,2),I=S[0],R=S[1],T=Object(a.useRef)(null),D=Object(a.useRef)(null),L=Object(a.useRef)(null),M=Object(tt.h)(),F=Object(tt.g)(M.location.pathname,{path:C}),E=""===O,A=Object(b.d)((function(e){return{profile:$c(e),personPermissions:ct(e),isOpenSearch:Pe(e)}})),P=A.profile,U=A.personPermissions,H=A.isOpenSearch,z=Object(b.c)(),B=Ot(je,U),q=!0===(null===P||void 0===P?void 0:P.hasUpdatedProfile),V=Object(qe.jsxs)("div",{className:"modal-tooltip",children:[Object(qe.jsx)("p",{children:"!"})," ",Object(qe.jsx)("span",{children:"\u0412\u0430\u0436\u043d\u043e"})]}),W=Object(a.useCallback)((function(){(null===P||void 0===P?void 0:P.hasUpdatedProfile)?o(!1):Xc("\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043c\u0438\u043b\u0438\u044e \u0438 \u0438\u043c\u044f \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c")}),[null===P||void 0===P?void 0:P.hasUpdatedProfile]),Y=Object(a.useCallback)((function(){j(!1),o(!0)}),[]),J=function(e,t){return M.push(Object(tt.f)(e,{fullName:t}))};return Object(a.useEffect)((function(){!q&&P&&j(!0)}),[q,null===P||void 0===P?void 0:P.hasUpdatedProfile]),Object(a.useEffect)((function(){k&&(J(C,O),L.current=!0)}),[k]),Object(a.useEffect)((function(){F||(v(""),L.current=null)}),[F]),Object(a.useEffect)((function(){O||(L.current=null)}),[O]),Object(qe.jsxs)(qe.Fragment,{children:[Object(qe.jsx)("header",{className:"header",ref:D,children:Object(qe.jsxs)("div",{className:Je()("header__container",{"header__container--center":H}),children:[Object(qe.jsx)("div",{className:Je()("header__tools",{"header__tools--none":H}),children:Object(qe.jsxs)("div",{className:"header__tools-wrapper",children:[Object(qe.jsx)(Yt,{className:"btn-round header__burger",icon:Object(qe.jsx)(Xe,{className:"btn-round__icon",name:n?"burger-close":"burger",size:32}),onClick:function(){return c((function(e){return!e}))},ref:t}),Object(qe.jsx)(Yt,{className:"btn-round header__search",icon:Object(qe.jsx)(Xe,{className:"btn-round__icon",name:"loupe",size:32}),onClick:function(){return z(ze(!0))}})]})}),Object(qe.jsxs)(Tn,{isOpen:H,className:"header__search",children:[Object(qe.jsx)(Yt,{className:Je()("btn-round form-search__btn",{"form-search__btn--is-active":H}),icon:Object(qe.jsx)(Xe,{className:"btn-round__icon",name:"arrow-back",size:32}),onClick:function(){return z(ze(!1))},type:"button"}),Object(qe.jsx)("div",{className:"form-search__wrapper",children:Object(qe.jsx)(Ja,{className:Je()("header-search calendar__time-group",{"calendar__time-group--searching":!E},{"calendar__time-group--searched":L.current}),iconName:"loupe",placeholder:"\u041d\u0430\u0439\u0442\u0438 \u0431\u0440\u043e\u043d\u044c \u0438\u043b\u0438 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430",ref:T,value:O,setValue:v,setModalActive:_,setUsers:R,searchUser:J,isUserSearched:L,isGlobalSearch:!0,isHeaderContains:!0,children:x&&Object(qe.jsx)($a,{users:I,close:_,setValue:v,selectUser:y,modalWidth:T.current.clientWidth})})})]}),Object(qe.jsx)("div",{className:Je()("header__logo",{"header__logo--none":H}),children:Object(qe.jsx)(et,{})}),Object(qe.jsx)(bn,{profile:P,className:"header__user-bar",isOpenSearch:H,isCanViewMyReservations:B,setProfileOpen:o})]})}),d&&Object(qe.jsx)(ln,{onClose:Y,className:"form-modal__tooltip",children:Object(qe.jsxs)(qe.Fragment,{children:[Object(qe.jsx)(wn,{title:V}),Object(qe.jsx)("span",{className:"modal-text",children:"\u0414\u043b\u044f \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b \u0441\u0438\u0441\u0442\u0435\u043c\u044b \u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0432\u0430\u0448\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a."})]})}),i&&Object(qe.jsx)(ln,{onClose:W,className:"form-modal__profile",children:Object(qe.jsx)(Ba,{onClose:W,closeProfile:function(){return o(!1)}})})]})})));function Qs(e){var t=e.children,n=Object(a.useState)(!1),c=Object(it.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(!1),o=Object(it.a)(i,2),l=o[0],u=o[1],d=Object(a.useState)(!1),j=Object(it.a)(d,2),f=j[0],m=j[1],O=Object(b.d)(Qt),v=Object(b.d)(xc),p=Object(a.useRef)(null),h=Object(b.c)(),x=_c().width;return Object(a.useEffect)((function(){h(Er())}),[]),Object(a.useEffect)((function(){h(Rt())}),[h]),Object(a.useEffect)((function(){u(r)}),[r]),Object(a.useEffect)((function(){s(l)}),[l]),Object(qe.jsxs)("div",{className:"page",children:[Object(qe.jsx)(yn,{isOpen:r,setIsOpen:s,exclude:p}),Object(qe.jsxs)("div",{className:"content",children:[(O||v)&&x<992?Object(qe.jsx)(Bc,{children:O?"\u0414\u0430\u0442\u0430 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f":"\u0424\u0438\u043b\u044c\u0442\u0440\u044b"}):Object(qe.jsx)(Ks,{setIsSidebarOpen:s,isBurgerOpen:l,setIsBurgerOpen:u,isSidebarOpen:r,ref:p,isOpenSearch:f,setIsOpenSearch:m}),t]})]})}var Xs=function(e){var t=e.reservation,n=Object(a.useState)(null),c=Object(it.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)([]),o=Object(it.a)(i,2),l=o[0],u=o[1],d=Object(a.useCallback)(Object(p.a)(v.a.mark((function e(){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gn.getLoadTools(null===t||void 0===t?void 0:t.tableId);case 3:n=e.sent,s(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Xc("\u0414\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[null===t||void 0===t?void 0:t.tableId]),j=Object(a.useCallback)((function(){null===r||void 0===r||r.data.forEach((function(e){e.inventoryCode&&wt.checkMonitor(e.inventoryCode).then((function(t){var n=l.findIndex((function(t){return t.code===e.inventoryCode}));"ok"===t.status&&n<0&&u([].concat(Object(f.a)(l),[t.data]))}))}))}),[l,null===r||void 0===r?void 0:r.data]);return Object(a.useEffect)((function(){(null===t||void 0===t?void 0:t.id)&&d()}),[d,null===t||void 0===t?void 0:t.id]),Object(qe.jsx)(Bt,{items:null===r||void 0===r?void 0:r.data,monitorInfo:l,loadMonitorInfo:j})};n(374);function Zs(e){var t=e.reservation,n=e.isEditMode,c=e.pickReservation,r=e.selectedRooms,s=Object(a.useState)(!1),i=Object(it.a)(s,2),o=i[0],l=i[1],u=Object(tt.h)(),d=Object(b.c)(),j=function(e){d(yr(Object(bt.default)(t.dateFrom))),sessionStorage.setItem(ve,t.dateFrom),u.push(Object(tt.f)(S,{id:t.room,number:t.place,mode:e}))};return Object(a.useEffect)((function(){!1===n&&l(!1)}),[n]),Object(a.useEffect)((function(){var e=r.find((function(e){return e.bookingId===t.bookingId}));l(!!e)}),[t.bookingId,r]),Object(qe.jsxs)("div",{className:"reservation-card",onClick:function(e){return n?pt(e):j(he)},onTouchStart:function(e){return n?pt(e):j(ge)},children:[Object(qe.jsx)("div",{className:"reservation-card__preview",children:n&&Object(qe.jsxs)("label",{className:"round-checkbox reservation-card-checkbox__inner",onClick:function(e){pt(e),l((function(e){return!e})),c((function(e){var n=e.findIndex((function(e){return e.bookingId===t.bookingId}));return-1!==n?(e.splice(n,1),Object(f.a)(e)):[].concat(Object(f.a)(e),[t])}))},children:[Object(qe.jsx)("input",{className:"round-checkbox__field",type:"checkbox"}),Object(qe.jsx)("span",{className:Je()("reservation-checkbox",{"reservation-checkbox--active":o}),children:Object(qe.jsx)(Xe,{className:"reservation-checkbox__icon",name:"checked",size:10})})]})}),Object(qe.jsxs)("div",{className:"reservation-card__content",children:[Object(qe.jsxs)("div",{className:"info reservation-card__info",children:[Object(qe.jsxs)("div",{className:"info__location",children:[Object(qe.jsx)("span",{className:"info__room",children:t.room}),Object(qe.jsxs)("span",{className:"info__place",children:["/ \u041c",t.place]})]}),Object(qe.jsx)("div",{className:"info__date",children:vt(Object(bt.default)(t.dateFrom),"d LLL y")})]}),Object(qe.jsx)("div",{className:"info reservation-card__reservations",children:Object(qe.jsxs)("div",{className:"info__time",children:[vt(Object(bt.default)(t.dateFrom),"HH:mm")," - ",vt(Object(bt.default)(t.dateTo),"HH:mm")]})}),Object(qe.jsx)(Xs,{reservation:t})]})]},t.room)}var ei=function(e){return e.reservations.allReservations.rows},ti=function(e){return e.reservations.selectedDateFrom},ni=function(e){return e.reservations.selectedDateTo},ci=function(e){return e.reservations.selectedTimeFrom},ri=function(e){return e.reservations.selectedTimeTo},ai=(n(375),function(e){var t=e.isEditMode,n=e.pickReservation,c=e.selectedReservations,r=void 0===c?[]:c,s=e.myBookings,i=e.checkedRooms,o=void 0===i?[]:i,l=e.checkedPlaces,u=void 0===l?[]:l,d=Object(b.d)(ti),j=Object(b.d)(ni),m=Object(b.d)(ci),O=Object(b.d)(ri),v=Object(a.useMemo)((function(){var e=[];if(0===u.length)return s;var t,n=Object(_t.a)(s);try{for(n.s();!(t=n.n()).done;){var c,r=t.value,a=Object(_t.a)(u);try{var i=function(){var t=c.value;t.location===r.room.name&&r.tables.some((function(e){return t.place===e.place}))?e.push({room:{name:r.room.name,id:r.room.id},tables:r.tables.filter((function(e){return t.place===e.place}))}):e.push({room:{name:"",id:""},tables:[]})};for(a.s();!(c=a.n()).done;)i()}catch(o){a.e(o)}finally{a.f()}}}catch(o){n.e(o)}finally{n.f()}return e.filter((function(e){return""!==e.room.name}))}),[u,s]),p=Object(a.useMemo)((function(){var e=[];if(v){var t,n=Object(_t.a)(v);try{for(n.s();!(t=n.n()).done;){var c=t.value;if(null!==d&&null===j)e.push({room:{name:c.room.name,id:c.room.id},tables:c.tables.filter((function(e){return Object(vs.default)(d,new Date(e.dateFrom))}))});else{if(null===d||null===j)return v;e.push({room:{name:c.room.name,id:c.room.id},tables:c.tables.filter((function(e){return Object(vs.default)(d,new Date(e.dateFrom))&&Object(ps.default)(Object(gs.default)(j,1),new Date(e.dateTo))}))})}}}catch(r){n.e(r)}finally{n.f()}}return e.filter((function(e){return 0!==e.tables.length}))}),[v,d,j]),h=Object(a.useMemo)((function(){var e=[];if(p){var t,n=Object(_t.a)(p);try{for(n.s();!(t=n.n()).done;){var c=t.value;if(null!==m&&null===O)e.push({room:{name:c.room.name,id:c.room.id},tables:c.tables.filter((function(e){return m.getHours()<new Date(e.dateTo).getHours()}))});else{if(null===m||null===O)return p;e.push({room:{name:c.room.name,id:c.room.id},tables:c.tables.filter((function(e){return m.getHours()<new Date(e.dateTo).getHours()&&O.getHours()>new Date(e.dateFrom).getHours()}))})}}}catch(r){n.e(r)}finally{n.f()}}return e.filter((function(e){return 0!==e.tables.length}))}),[p,m,O]);return Object(qe.jsx)(qe.Fragment,{children:h.filter((function(e){return o.length<=0?s:o.includes(e.room.name)})).map((function(e){return Object(qe.jsxs)("div",{className:"reservation-room rooms__box",children:[Object(qe.jsxs)("div",{className:"reservation-room__title",children:[Object(qe.jsxs)("div",{className:"main-title",children:["\u041a\u043e\u043c\u043d\u0430\u0442\u0430 ",e.room.name]}),Object(qe.jsx)("button",{className:Je()("reservation-room__select-all",{"reservation-room__select-all--active":t}),onClick:function(){!function(e,t){var c=Array.from(new Set(r)),a=function(e,t){return t.filter((function(t){return e===t.room.name}))}(e,t),s=Object(it.a)(a,1)[0],i=Array.from(new Set(s.tables)).filter((function(e){return!c.includes(e)}));n((function(e){return[].concat(Object(f.a)(e),Object(f.a)(i))}))}(e.room.name,s)},children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435"})]}),Object(qe.jsx)("div",{className:"reservation-cards",children:e.tables.map((function(e){return Object(qe.jsx)(Zs,{reservation:e,isEditMode:t,pickReservation:n,selectedRooms:r},e.bookingId)}))})]},e.room.id)}))})});function si(e){var t=e.showSearchFilter,n=e.excludeRef,c=As(),r=c.checkedPlaces,a=c.setCheckedPlaces,s=r.length;return Object(qe.jsxs)(qe.Fragment,{children:[Object(qe.jsx)("div",{className:"filter-box__name",children:"\u0420\u0430\u0431\u043e\u0447\u0435\u0435 \u043c\u0435\u0441\u0442\u043e"}),Object(qe.jsxs)("div",{className:Je()("filter",{"filter--active":s>0}),onClick:t,ref:n,children:[Object(qe.jsx)("div",{className:"filter__text",children:1===s?"\u0412\u044b\u0431\u0440\u0430\u043d\u043e ".concat(s," \u0440\u0430\u0431\u043e\u0447ee \u043c\u0435\u0441\u0442\u043e"):s>1?"\u0412\u044b\u0431\u0440\u0430\u043d\u043e ".concat(s," \u0440\u0430\u0431\u043e\u0447\u0438\u0445 \u043c\u0435\u0441\u0442\u0430"):"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0440\u0430\u0431\u043e\u0447\u0435\u0435 \u043c\u0435\u0441\u0442\u043e"}),s>0?Object(qe.jsx)(Xe,{className:"filter__close",name:"time-close",size:16,onClick:function(e){e.stopPropagation(),a([])}}):Object(qe.jsx)(Xe,{className:"filter__arrow",name:"range-arrow-down",size:8})]})]})}n(376);var ii=function(e){var t=e.locations,n=e.checkedRooms,c=e.setCheckedRooms,r=e.openFilters,s=Object(a.useState)(!1),i=Object(it.a)(s,2),o=i[0],l=i[1],u=function(){return l(!o)},d=Object(a.useRef)(null),j=Object(a.useRef)(null);Nt({ref:d,cb:function(){return l(!1)},exclude:j});return Object(qe.jsxs)("div",{className:"filter-box my-reservation__filter-location",children:[Object(qe.jsx)("div",{className:"filter-box__name",children:"\u041a\u0430\u0431\u0438\u043d\u0435\u0442"}),Object(qe.jsxs)("div",{className:Je()("filter",{"filter--active":n.length>0}),onClick:u,ref:j,children:[Object(qe.jsx)("div",{className:"filter__text",children:n.length<=0?"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0430\u0431\u0438\u043d\u0435\u0442":n.map((function(e,t){return 0===t?Object(qe.jsx)(qe.Fragment,{children:e}):Object(qe.jsxs)(qe.Fragment,{children:[", ",e]})}))}),n.length>0?Object(qe.jsx)(Xe,{className:"filter__close",name:"time-close",size:16,onClick:function(e){e.stopPropagation(),c([])}}):Object(qe.jsx)(Xe,{className:"filter__arrow",name:"range-arrow-down",size:8})]}),Object(qe.jsxs)("div",{className:Je()("location-filter filter-box__location-filter",{"location-filter--active":o}),ref:d,children:[Object(qe.jsx)(Us,{text:"\u041a\u0430\u0431\u0438\u043d\u0435\u0442",openFilters:u}),Object(qe.jsx)("div",{className:"location-filter__wrapper",children:t.map((function(e){return Object(qe.jsxs)("label",{className:"checkbox-inner",children:[Object(qe.jsx)("input",{className:"checkbox-inner__field",type:"checkbox",onChange:function(){return t=e.name,n.includes(t)?c(n.filter((function(e){return e!==t}))):c([].concat(Object(f.a)(n),[t]));var t},checked:n.includes(e.name)}),Object(qe.jsx)("span",{className:"custom-checkbox checkbox-inner__custom-checkbox",children:e.name})]},e.id)}))}),Object(qe.jsx)("button",{className:"action-btn location-filter__action-btn",onClick:r,children:"\u0423\u043a\u0430\u0437\u0430\u0442\u044c"})]})]})},oi=s.a.forwardRef((function(e,t){var n=e.value,c=e.onClick,r=Object(b.c)();return Object(qe.jsxs)("div",{className:Je()("filter filter-box__filter",{"filter--active":""!==n}),onClick:c,ref:t,children:[Object(qe.jsx)("div",{className:"filter__text",children:""===n?"\u041e\u0442":n.replace(/[/]/g,".")}),""===n?Object(qe.jsx)(Xe,{className:"filter__arrow",name:"range-arrow-down",size:8}):Object(qe.jsx)(Xe,{className:"filter__close",name:"time-close",size:16,onClick:function(e){e.stopPropagation(),r(na(null))}})]})})),li=s.a.forwardRef((function(e,t){var n=e.value,c=e.onClick,r=Object(b.c)();return Object(qe.jsxs)("div",{className:Je()("filter filter-box__filter",{"filter--active":""!==n}),onClick:c,ref:t,children:[Object(qe.jsx)("div",{className:"filter__text",children:""===n?"\u0414\u043e":n.replace(/[/]/g,".")}),""===n?Object(qe.jsx)(Xe,{className:"filter__arrow",name:"range-arrow-down",size:8}):Object(qe.jsx)(Xe,{className:"filter__close",name:"time-close",size:16,onClick:function(e){e.stopPropagation(),r(ca(null))}})]})})),ui=function(){var e=Object(b.c)(),t=Object(b.d)(ti),n=Object(b.d)(ni);return Object(qe.jsxs)("div",{className:"filter-box my-reservation__filter-data",children:[Object(qe.jsx)("div",{className:"filter-box__name",children:"\u0414\u0430\u0442\u0430"}),Object(qe.jsxs)("div",{className:"filter-box__period",children:[Object(qe.jsx)(Mn.a,{selected:t,onChange:function(t){return e(na(t))},showYearDropdown:!0,dateFormatCalendar:"LLLL",popperClassName:"react-datepicker-popper--from",customInput:Object(qe.jsx)(oi,{})}),Object(qe.jsx)(Xe,{className:"filter-box__period-icon",name:"arrow-right"}),Object(qe.jsx)(Mn.a,{selected:n,onChange:function(t){return e(ca(t))},showYearDropdown:!0,dateFormatCalendar:"LLLL",popperClassName:"react-datepicker-popper--to",customInput:Object(qe.jsx)(li,{})})]})]})},di=s.a.forwardRef((function(e,t){var n=e.value,c=e.onClick,r=Object(b.c)();return Object(qe.jsxs)("div",{className:Je()("filter filter-box__filter",{"filter--active":""!==n}),onClick:c,ref:t,children:[Object(qe.jsx)("div",{className:"filter__text",children:""===n?"\u0412\u0440\u0435\u043c\u044f \u043e\u0442":n}),""===n?Object(qe.jsx)(Xe,{className:"filter__arrow",name:"range-arrow-down",size:8}):Object(qe.jsx)(Xe,{className:"filter__close",name:"time-close",size:16,onClick:function(e){e.stopPropagation(),r(ra(null))}})]})})),ji=s.a.forwardRef((function(e,t){var n=e.value,c=e.onClick,r=Object(b.c)();return Object(qe.jsxs)("div",{className:Je()("filter filter-box__filter",{"filter--active":""!==n}),onClick:c,ref:t,children:[Object(qe.jsx)("div",{className:"filter__text",children:""===n?"\u0412\u0440\u0435\u043c\u044f \u0434\u043e":n}),""===n?Object(qe.jsx)(Xe,{className:"filter__arrow",name:"range-arrow-down",size:8}):Object(qe.jsx)(Xe,{className:"filter__close",name:"time-close",size:16,onClick:function(e){e.stopPropagation(),r(aa(null))}})]})})),bi=function(){var e=Object(b.c)(),t=Object(b.d)(ci),n=Object(b.d)(ri);return Object(qe.jsxs)("div",{className:"filter-box my-reservation__filter-time",children:[Object(qe.jsx)("div",{className:"filter-box__name",children:"\u0412\u0440\u0435\u043c\u044f"}),Object(qe.jsxs)("div",{className:"filter-box__period",children:[Object(qe.jsx)(Mn.a,{selected:t,onChange:function(t){return e(ra(t))},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:60,minTime:(new Date).setHours(6,0,0,0),maxTime:(new Date).setHours(23,0,0,0),dateFormat:"H:mm",popperClassName:"react-datepicker-popper--from",customInput:Object(qe.jsx)(di,{})}),Object(qe.jsx)(Xe,{className:"filter-box__period-icon",name:"arrow-right"}),Object(qe.jsx)(Mn.a,{selected:n,onChange:function(t){return e(aa(t))},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:60,minTime:(new Date).setHours(6,0,0,0),maxTime:(new Date).setHours(23,0,0,0),dateFormat:"H:mm",popperClassName:"react-datepicker-popper--to",customInput:Object(qe.jsx)(ji,{})})]})]})},fi=function(e){var t=e.isFiltersOpen,n=e.openFilters,c=e.isReservation,r=Object(a.useState)(!1),s=Object(it.a)(r,2),i=s[0],o=s[1],l=As(),u=l.checkedRooms,d=l.locations,j=l.setCheckedRooms,b=Object(a.useRef)(null),f=Object(a.useRef)(null),m=function(){return o(!i)};return Nt({ref:b,cb:function(){return o(!1)},exclude:f}),Object(qe.jsxs)("div",{className:Je()("my-reservation__filters",{"my-reservation__filters--disabled":!t},{"my-reservation__filters--reservation":c&&!t}),children:[Object(qe.jsx)(Us,{text:"\u0424\u0438\u043b\u044c\u0442\u0440\u044b",openFilters:n}),Object(qe.jsxs)("div",{className:"my-reservation__wrapper",children:[Object(qe.jsx)(ui,{}),Object(qe.jsx)(bi,{}),Object(qe.jsx)(ii,{checkedRooms:u,setCheckedRooms:j,locations:d,openFilters:n}),Object(qe.jsxs)("div",{className:"filter-box my-reservation__filter-place",children:[Object(qe.jsx)(si,{showSearchFilter:m,excludeRef:f}),Object(qe.jsx)(Hs,{ref:b,customClass:"filter-box__search-filter",isDropdownActive:i,openFilters:n,showSearchFilter:m})]}),Object(qe.jsx)("button",{className:"action-btn my-reservation__btn-filter",onClick:n,children:"\u041e\u0442\u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c"})]})]})},mi=s.a.forwardRef((function(e,t){var n=e.title,c=e.subTitle,r=e.isEditMode,a=e.changeEditMode,s=e.isSearchPage,i=e.openFilters;return Object(qe.jsxs)("div",{ref:t,className:Je()("my-reservations__settings",{"my-reservation__search-settings":s}),children:[Object(qe.jsxs)("div",{className:Je()("my-reservation__title-group",{"my-reservation__search-title-group":s}),children:[Object(qe.jsx)("h2",{className:"my-reservation__main-title",children:n}),Object(qe.jsx)("span",{className:"my-reservation__sub-title",children:c})]}),Object(qe.jsxs)("div",{className:"my-reservations__btns",children:[Object(qe.jsx)("button",{className:Je()("edit-btn",{"edit-btn--active":r},{"filters-btn--active":s&&r},{"edit-btn--is-search":s}),onClick:a,children:s?"\u0424\u0438\u043b\u044c\u0442\u0440\u044b":r?"\u041e\u0442\u043c\u0435\u043d\u0430":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(qe.jsx)("button",{className:Je()("filters-btn",{"filters-btn--active":r}),onClick:i,children:Object(qe.jsx)(Xe,{className:"my-reservation__filtering-icon",name:"filter",size:38})})]})]})})),Oi=mi;function vi(e){if(e){var t,n={},c=Object(_t.a)(e);try{for(c.s();!(t=c.n()).done;){var r=t.value,a=r.table.room;n[a.name]?n[a.name].tables.push({imageUrl:r.table.imageUrl,room:r.table.room.name,place:r.table.name,dateFrom:r.from,dateTo:r.to,tableId:r.table.id,bookingId:r.id}):n[a.name]={room:{name:r.table.room.name,id:r.table.id},tables:[{imageUrl:r.table.imageUrl,room:r.table.room.name,place:r.table.name,dateFrom:r.from,dateTo:r.to,tableId:r.table.id,bookingId:r.id}]}}}catch(s){c.e(s)}finally{c.f()}return Object.values(n)}return null}mi.propTypes={title:Vt.a.string,subTitle:Vt.a.string,isEditMode:Vt.a.bool,isSearchPage:Vt.a.bool,changeEditMode:Vt.a.func,openFilters:Vt.a.func};n(377);var pi=function(){var e=Object(a.useState)(!1),t=Object(it.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),s=Object(it.a)(r,2),i=s[0],o=s[1],l=Object(a.useState)(!1),u=Object(it.a)(l,2),d=u[0],j=u[1],f=xn(),m=Object(b.c)(),O=Object(b.d)((function(e){return{myReservations:ei(e),personPermissions:ct(e)}})),h=O.myReservations,x=O.personPermissions,_=Ot(be,x),g=Object(a.useRef)(new Date),N=Object(a.useMemo)((function(){return vi(h)}),[h]),k=function(e,t,n,c){var r=Object(a.useState)([]),s=Object(it.a)(r,2),i=s[0],o=s[1],l=Object(b.c)(),u=function(e){var t={ids:[]};return e.forEach((function(e){t.ids.push(e.bookingId)})),t},d=function(){var r=Object(p.a)(v.a.mark((function r(){var a;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,l(pr(u(i),e));case 3:n(!1),c(!1),o([]),l(Nn(_n(100,{dateFrom:Object(kn.a)(t.current)}))),Zc((a=i.length>1)?"\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u044b":"\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u043e","\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0438\u043b\u0438 ".concat(a?"\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f":"\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435")),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),Xc("\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f","\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437");case 13:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(){return r.apply(this,arguments)}}();return{selectedReservations:i,setSelectedReservations:o,deleteScheduleHandle:d}}(_,g,j,c),y=k.deleteScheduleHandle,w=k.selectedReservations,C=k.setSelectedReservations,S=0!==w.length,I=Object(a.useMemo)((function(){return w.length}),[w]),R=function(){return o(!i)},T=function(){return j(!1)};return Object(a.useEffect)((function(){document.body.style.overflow=i?"hidden":"visible"}),[i]),Object(a.useEffect)((function(){m(Nn(_n(100,{dateFrom:Object(kn.a)(Object(Kc.a)(g.current,{hours:0,minutes:0})),type:0},"")))}),[]),Object(a.useEffect)((function(){n||C([])}),[n]),Object(qe.jsxs)(qe.Fragment,{children:[Object(qe.jsxs)("div",{className:"my-reservations",children:[Object(qe.jsx)(Es.Provider,{value:f,children:Object(qe.jsxs)("div",{className:"my-reservations__filter",children:[Object(qe.jsx)(Oi,{title:"\u041c\u043e\u0438 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f",isEditMode:n,changeEditMode:function(){c((function(e){return!e}))},activateSchedule:function(){return m(wr(!0))},openFilters:R}),Object(qe.jsx)(fi,{isFiltersOpen:i,openFilters:R,isReservation:!0})]})}),Object(qe.jsx)("div",{className:"rooms",children:(null===N||void 0===N?void 0:N.length)>0?Object(qe.jsx)(ai,{checkedRooms:f.checkedRooms,checkedPlaces:f.checkedPlaces,isEditMode:n,pickReservation:C,selectedReservations:w,myReservation:h,myBookings:N}):Object(qe.jsx)(Wc,{subtitle:"\u0414\u043b\u044f \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043c\u0435\u0441\u0442\u0430 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043a\u0430\u0440\u0442\u0443 \u0440\u0430\u0431\u043e\u0447\u0438\u0445 \u043c\u0435\u0441\u0442"})})]}),Object(qe.jsx)(zc,{deleteCount:I,onClick:function(){return j(!0)},title:"\u0412\u044b\u0431\u0440\u0430\u043d\u043e \u0431\u0440\u043e\u043d\u0435\u0439:",isActive:S}),d&&Object(qe.jsx)(ln,{title:Object(qe.jsx)("span",{children:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0431\u0440\u043e\u043d\u0438 "}),onClose:T,isDeleteForm:!0,children:Object(qe.jsx)("div",{className:"delete-card",children:Object(qe.jsx)(wn,{onClose:T,action:y,title:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0431\u0440\u043e\u043d\u044c \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0445 \u0441\u043b\u043e\u0442\u043e\u0432?"})})})]})};function hi(e){var t=e.isOpenSearch,n=Object(a.useState)(!1),c=Object(it.a)(n,2),r=c[0],s=c[1],i=Object(a.useRef)(null),o=Object(a.useRef)(null),l=hn(),u=Object(b.d)((function(e){return{selectedDate:Xt(e)}})).selectedDate,d=Object(b.d)(Ae(l)),j=Object(b.c)(),f=function(){return s(!0)};return Object(a.useEffect)((function(){return(null===d||void 0===d?void 0:d.id)&&j(Ct(kt(null===d||void 0===d?void 0:d.id,Object(kn.a)(Object(Kc.a)(u,{hours:0,minutes:0}))))).finally((function(){return j(Rt())})),function(){j(Et.actions.cleanState())}}),[null===d||void 0===d?void 0:d.id,j,u]),Nt({ref:i,cb:function(){s(!1)},exclude:o}),Object(qe.jsx)("main",{className:Je()("main",{"main--none":t}),children:Object(qe.jsxs)("div",{className:"main__container",children:[Object(qe.jsxs)("div",{className:"workspace",children:[Object(qe.jsxs)("div",{className:"workspace__header",children:[Object(qe.jsx)("div",{className:"workspace__header-top",children:Object(qe.jsxs)("div",{className:"workspace__header-group",children:[Object(qe.jsxs)("h2",{className:"title workspace__title",children:["\u041a\u043e\u043c\u043d\u0430\u0442\u0430 ",l]}),Object(qe.jsx)(An,{})]})}),l&&Object(qe.jsxs)("div",{className:"workspace__schema",ref:o,onMouseEnter:f,onMouseLeave:function(){return s(!1)},onTouchStart:f,children:[Object(qe.jsx)(Xe,{name:"info",size:24,fill:!0}),Object(qe.jsx)("span",{className:"workspace__schema-text",children:"\u0421\u0445\u0435\u043c\u0430 \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044f"})]})]}),Object(qe.jsx)(dn,{currentLocation:d})]}),Object(qe.jsx)(Sn,{isOpen:r,title:"\u041a\u0430\u0431\u0438\u043d\u0435\u0442 ".concat(null===d||void 0===d?void 0:d.name),ref:i,children:Object(qe.jsx)("img",{className:"modal__img",src:null===d||void 0===d?void 0:d.imageUrl,alt:"\u0421\u0445\u0435\u043c\u0430 ".concat(null===d||void 0===d?void 0:d.name," \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u0430")})})]})})}n(378);function xi(){var e=Object(a.useState)([]),t=Object(it.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),s=Object(it.a)(r,2),i=s[0],o=s[1],l=Object(a.useRef)({dateFrom:Object(Kc.a)(new Date,{hours:0,minutes:0})}),u=Object(a.useMemo)((function(){return vi(n)}),[n]),d=Object(tt.i)().fullName,j=xn(),f=Object(b.c)(),m=function(){return o(!i)},O=function(){var e=Object(p.a)(v.a.mark((function e(t,n,r){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gn.getReservations(_n(t,n,r));case 3:a=e.sent,c(a.rows),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c([]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,c){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){O(100,l.current,d)}),[d]),Object(qe.jsxs)("div",{className:"my-reservations",children:[Object(qe.jsx)(Es.Provider,{value:j,children:Object(qe.jsxs)("div",{className:"my-reservations__filter my-reservations__search",children:[Object(qe.jsx)(Oi,{title:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430",subTitle:d,isEditMode:i,changeEditMode:m,activateSchedule:function(){return f(wr(!0))},openFilters:m,isSearchPage:!0}),Object(qe.jsx)(fi,{isFiltersOpen:i,openFilters:m})]})}),(null===u||void 0===u?void 0:u.length)>0?Object(qe.jsx)("div",{className:"rooms",children:Object(qe.jsx)(ai,{checkedRooms:j.checkedRooms,checkedPlaces:j.checkedPlaces,myBookings:u})}):Object(qe.jsx)(Wc,{})]})}Object(Ln.registerLocale)("ru",ut.a),Object(Ln.setDefaultLocale)("ru");var _i,gi,Ni=function(){return Object(qe.jsxs)(tt.d,{children:[Object(qe.jsx)(Vc,{path:k,component:pa}),Object(qe.jsx)(st,{render:function(){return Object(qe.jsx)(Qs,{children:Object(qe.jsxs)(tt.d,{children:[Object(qe.jsx)(tt.b,{path:I,component:pi}),Object(qe.jsx)(tt.b,{path:C,component:xi}),Object(qe.jsx)(tt.b,{path:R,component:Ia}),Object(qe.jsx)(tt.b,{path:T,component:Ra}),Object(qe.jsx)(tt.b,{path:D,component:Ca}),Object(qe.jsx)(tt.b,{path:L,component:Ma}),Object(qe.jsx)(tt.b,{path:S,component:ys}),Object(qe.jsx)(tt.b,{path:y,component:hi}),Object(qe.jsx)(tt.b,{path:M,component:La}),Object(qe.jsx)(tt.a,{to:I})]})})}})]})};n(379),n(380),n(381),n(382);j()(),(gi=u).interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat(localStorage.getItem("accessToken")),e})),(_i=gi).interceptors.response.use((function(e){return e}),function(){var e=Object(p.a)(v.a.mark((function e(t){var n,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.config,401!==t.response.status||n.retry){e.next=8;break}return n.retry=!0,e.next=5,la.dispatch(Se());case 5:if(c=e.sent,!Se.fulfilled.match(c)){e.next=8;break}return e.abrupt("return",_i(n));case 8:return 403===t.response.status&&da.push(N),e.abrupt("return",Promise.reject(t));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),function(e){e.interceptors.response.use((function(e){return e}),function(){var e=Object(p.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 503===t.response.status?Xc("\u0421\u0435\u0440\u0432\u0438\u0441 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d","\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435"):400===t.response.status?Xc("\u0414\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b","\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443"):403===t.response.status?Xc("\u041e\u0442\u043a\u0430\u0437 \u0432 \u0434\u043e\u0441\u0442\u0443\u043f\u0435","\u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043f\u0440\u0430\u0432 \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430 \u0434\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b"):502===t.response.status&&Xc(" \u041e\u0448\u0438\u0431\u043a\u0430","\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043f\u043e\u0447\u0442\u0443. \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\u043c"),e.abrupt("return",Promise.reject(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}(gi),oa.dispatch(Te.setIsAuth(g.init(ye,oa,Te))),o.a.render(Object(qe.jsx)(s.a.StrictMode,{children:Object(qe.jsx)(b.a,{store:oa,children:Object(qe.jsxs)(tt.c,{history:da,children:[Object(qe.jsx)(Ni,{}),Object(qe.jsx)(Pn.a,{})]})})}),document.getElementById("root")),ba()}},[[383,1,2]]]);
//# sourceMappingURL=main.14a5af38.chunk.js.map